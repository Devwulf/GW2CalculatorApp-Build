(this["webpackJsonpgw2-calculator"]=this["webpackJsonpgw2-calculator"]||[]).push([[0],{148:function(e,t,a){e.exports=a(281)},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},190:function(e,t){},192:function(e,t){},203:function(e,t){},205:function(e,t){},230:function(e,t){},232:function(e,t){},233:function(e,t){},239:function(e,t){},241:function(e,t){},259:function(e,t){},261:function(e,t){},273:function(e,t){},276:function(e,t){},281:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),i=a(52),o=a.n(i),l=(a(153),a(80)),c=a.n(l),u=(a(154),a(155),a(53)),m=a(1),d=a.n(m),p=a(4),h=a(6),g=a(8),x=a(3),f=a(12),v=a(11),y=a(22),b=a(30),w=a(5),E=a(7),N=a(144),k=function(){function e(t,a,n,r,s,i,o,l,c){Object(h.a)(this,e),this.Id=void 0,this.ChatLink=void 0,this.Name=void 0,this.Icon=void 0,this.Description=void 0,this.Type=void 0,this.Rarity=void 0,this.Level=void 0,this.History=void 0,this.Id=t,this.ChatLink=a,this.Name=n,this.Icon=r,this.Description=s,this.Type=i,this.Rarity=o,this.Level=l,this.History=c}return Object(g.a)(e,[{key:"filterHistory",value:function(e){this.History=this.History.filter(e)}}]),e}(),S=function(){function e(){Object(h.a)(this,e)}return Object(g.a)(e,null,[{key:"ToHistoryItem",value:function(e){try{return new k(e.id,e.chatLink,e.name,e.icon,e.description,parseInt(e.type),parseInt(e.rarity),e.level,e.history)}catch(t){return console.log(t),null}}},{key:"ToHistoryItems",value:function(t){var a=[];return t.forEach((function(t){var n=e.ToHistoryItem(t);null!=n&&a.push(n)})),a}}]),e}();!function(e){e[e.OneHour=0]="OneHour",e[e.SixHours=1]="SixHours",e[e.TwelveHours=2]="TwelveHours",e[e.OneDay=3]="OneDay",e[e.ThreeDays=4]="ThreeDays",e[e.OneWeek=5]="OneWeek",e[e.TwoWeeks=6]="TwoWeeks",e[e.OneMonth=7]="OneMonth"}(n||(n={}));var O=new(function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this,"GW2History")).historyItems=void 0,e.version(1).stores({historyItems:"Id"}),e.open().catch((function(t){console.error("Opening the db '".concat(e.name,"' failed: ").concat(t))})),e.historyItems=e.table("historyItems"),e.historyItems.mapToClass(k),e}return Object(g.a)(a,[{key:"getHistoryItem",value:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var r,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.historyItems.get(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:if(a!==n.OneMonth){e.next=7;break}return e.abrupt("return",r);case 7:s=new Date,e.t0=a,e.next=e.t0===n.OneHour?11:e.t0===n.SixHours?13:e.t0===n.TwelveHours?15:e.t0===n.OneDay?17:e.t0===n.ThreeDays?19:e.t0===n.OneWeek?21:e.t0===n.TwoWeeks?23:25;break;case 11:return i=s.setTime(s.getTime()-36e5),e.abrupt("break",27);case 13:return i=s.setTime(s.getTime()-216e5),e.abrupt("break",27);case 15:return i=s.setTime(s.getTime()-432e5),e.abrupt("break",27);case 17:return i=s.setDate(s.getDate()-1),e.abrupt("break",27);case 19:return i=s.setDate(s.getDate()-3),e.abrupt("break",27);case 21:return i=s.setDate(s.getDate()-7),e.abrupt("break",27);case 23:return i=s.setDate(s.getDate()-14),e.abrupt("break",27);case 25:return i=s.setDate(s.getDate()-30),e.abrupt("break",27);case 27:return r.filterHistory((function(e){return e.time>=i})),e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"hasDetails",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.historyItems.get(t);case 2:if(!(a=e.sent)||!a.Name){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNewestTime",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHistoryItem(t,n.OneMonth);case 2:if((a=e.sent)&&a.History){e.next=5;break}return e.abrupt("return",0);case 5:return e.abrupt("return",a.History[0].time);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setHistoryItem",value:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.historyItems.get(t.Id);case 4:if(e.sent){e.next=8;break}return e.next=8,this.historyItems.add(t,t.Id);case 8:return e.next=10,this.historyItems.update(t.Id,{ChatLink:t.ChatLink,Name:t.Name,Icon:t.Icon,Description:t.Description,Type:t.Type,Rarity:t.Rarity,Level:t.Level,History:t.History});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setHistoryItemPrices",value:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.historyItems.get(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:return(n=r.History).unshift.apply(n,Object(u.a)(a)),e.next=8,this.historyItems.update(t,{History:r.History});case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteOldPrices",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.historyItems.get(t);case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:return n=[],r=new Date,s=r.setDate(r.getDate()-30),a.History.forEach((function(e){e.time>=s&&n.push(e)})),e.next=11,this.historyItems.update(t,{History:n});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(N.a)),C=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).dashboard=void 0,n.buyPriceChart=void 0,n.sellPriceChart=void 0,n.buyVolumeChart=void 0,n.sellVolumeChart=void 0,n.state={},n.createChart=n.createChart.bind(Object(x.a)(n)),n.createOHLCChart=n.createOHLCChart.bind(Object(x.a)(n)),n}return Object(g.a)(a,[{key:"createChart",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,r,s,i,o,l,c,u,m,p,h,g,x,f,v,y,b,w,N,k,S,C,j,P;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.itemId,e.next=3,O.getHistoryItem(t,n.OneMonth);case 3:if(a=e.sent){e.next=6;break}return e.abrupt("return");case 6:r=9e5,s=a.History[a.History.length-1],i=s.time-s.time%r,o=[],l=[],c=[],u=[],m=[],p=0,h=a.History.length-1;case 16:if(!(h>=0)){e.next=46;break}if(g=a.History[h],x=p+i,c.push({position:g.time-i,high:g.bought,low:-1*g.bid}),u.push({position:g.time-i,high:g.sold,low:-1*g.offers}),g.time<x+r&&g.time>=x&&m.push(g),(f=h-1>=0?a.History[h-1]:void 0)&&!(f.time>=x+r)){e.next=43;break}if(p+=r,!(m.length<=0)){e.next=27;break}return e.abrupt("continue",43);case 27:for(v=Number.POSITIVE_INFINITY,y=0,b=Number.POSITIVE_INFINITY,w=0,N=0;N<m.length;N++)(k=m[N]).buyPrice<v&&(v=k.buyPrice),k.buyPrice>y&&(y=k.buyPrice),k.sellPrice<b&&(b=k.sellPrice),k.sellPrice>w&&(w=k.sellPrice);S=m[0],C=m[m.length-1],j=[p,S.buyPrice,y,v,C.buyPrice],P=[p,S.sellPrice,w,b,C.sellPrice],o.push(j),l.push(P),v=Number.POSITIVE_INFINITY,y=0,b=Number.POSITIVE_INFINITY,w=0,m=[];case 43:h--,e.next=16;break;case 46:this.dashboard=Object(E.lightningChart)().Dashboard({theme:E.Themes.dark,numberOfColumns:2,numberOfRows:2,container:t.toString()}),this.buyPriceChart=this.createOHLCChart("Buy Prices",i,o,{columnIndex:0,rowIndex:0,columnSpan:1,rowSpan:1}),this.sellPriceChart=this.createOHLCChart("Sell Prices",i,l,{columnIndex:1,rowIndex:0,columnSpan:1,rowSpan:1}),this.buyVolumeChart=this.createAreaChart("Buy Volume \ud835\udeab","Bought","Bid",i,c,{columnIndex:0,rowIndex:1,columnSpan:1,rowSpan:1}),this.sellVolumeChart=this.createAreaChart("Sell Volume \ud835\udeab","Sold","Offers",i,u,{columnIndex:1,rowIndex:1,columnSpan:1,rowSpan:1});case 51:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOHLCChart",value:function(e,t,a,n){if(this.dashboard){var r=this.dashboard.createChartXY(n),s=new Date(t);r.getDefaultAxisX().setTickStrategy(E.AxisTickStrategies.DateTime,(function(e){return e.setDateOrigin(s)})),r.setTitle(e).setAutoCursor((function(e){e.disposeTickMarkerY(),e.setGridStrokeYStyle(E.emptyLine)})).setPadding({right:40});var i=r.addLegendBox(E.LegendBoxBuilders.HorizontalLegendBox).setPosition({x:100,y:100}).setOrigin(E.UIOrigins.RightTop),o=r.getDefaultAxisY().setScrollStrategy(E.AxisScrollStrategies.expansion).setTitle("Price"),l=(new E.SolidFill).setColor(Object(E.ColorRGBA)(100,149,237,50)),c=(new E.SolidLine).setFillStyle((new E.SolidFill).setColor(Object(E.ColorRGBA)(100,149,237))).setThickness(1),u=r.addAreaRangeSeries({yAxis:o}).setName("Bollinger Band").setHighFillStyle(l).setLowFillStyle(l).setHighStrokeStyle(c).setLowStrokeStyle(c).setMaxPointCount(0).setMouseInteractions(!1).setCursorEnabled(!1),m=(new E.SolidLine).setFillStyle((new E.SolidFill).setColor(Object(E.ColorRGBA)(237,137,54))).setThickness(2),d=r.addLineSeries().setName("Moving Average").setStrokeStyle(m).setMouseInteractions(!1).setCursorEnabled(!1),p=(new E.SolidLine).setFillStyle((new E.SolidFill).setColor(Object(E.ColorRGBA)(26,32,44))).setThickness(1),h=(new E.SolidFill).setColor(Object(E.ColorRGBA)(229,62,62)),g=(new E.SolidFill).setColor(Object(E.ColorRGBA)(116,42,42)),x=(new E.SolidFill).setColor(Object(E.ColorRGBA)(62,225,62)),f=(new E.SolidFill).setColor(Object(E.ColorRGBA)(34,84,61)),v=r.addOHLCSeries({yAxis:o});v.setName("Candlesticks").setFigureWidth(5).setPositiveStyle((function(e){return e.setBodyFillStyle(x).setBodyStrokeStyle(p).setStrokeStyle((new E.SolidLine).setFillStyle(f).setThickness(2))})).setNegativeStyle((function(e){return e.setBodyFillStyle(h).setBodyStrokeStyle(p).setStrokeStyle((new E.SolidLine).setFillStyle(g).setThickness(2))}));var y=[],b=0;i.add(r)[0].setButtonOnFillStyle(c.getFillStyle()).setButtonOnStrokeStyle(E.emptyLine);return v.setResultTableFormatter((function(e,t,a){var n=a.getOpen(),r=a.getClose();return e.addRow(t.getName()).addRow(t.axisX.formatValue(a.getPosition())).addRow("High ".concat(a.getHigh().toFixed(2))).addRow("".concat(n>r?"Open ".concat(n.toFixed(2)):"Close ".concat(r.toFixed(2)))).addRow("".concat(n<r?"Open ".concat(n.toFixed(2)):"Close ".concat(r.toFixed(2)))).addRow("Low ".concat(a.getLow().toFixed(2)))})),a.forEach((function(e){v.add(e),y.push((e[2]+e[3]+e[4])/3),b<30?b++:y.shift();var t=0;y.forEach((function(e){return t+=e}));var a=t/b,n=0;y.forEach((function(e){return n+=Math.pow(e-a,2)}));var r=Math.sqrt(n/b),s={position:e[0],high:a+2*r,low:a-2*r};u.add(s);var i={x:e[0],y:a};d.add(i)})),function(){var e,t,a,n,r={min:null!==(e=u.getYMin())&&void 0!==e?e:0,max:null!==(t=u.getYMax())&&void 0!==t?t:0,range:(null!==(a=u.getYMax())&&void 0!==a?a:0)-(null!==(n=u.getYMin())&&void 0!==n?n:0)};o.setInterval(r.min-.33*r.range,r.max)}(),r}}},{key:"createAreaChart",value:function(e,t,a,n,r,s){if(this.dashboard){var i=this.dashboard.createChartXY(s),o=new Date(n);i.getDefaultAxisX().setTickStrategy(E.AxisTickStrategies.DateTime,(function(e){return e.setDateOrigin(o)})),i.setTitle(e).setPadding({right:40});var l=i.addLegendBox(E.LegendBoxBuilders.HorizontalLegendBox).setPosition({x:100,y:100}).setOrigin(E.UIOrigins.RightTop),c=i.getDefaultAxisY().setScrollStrategy(E.AxisScrollStrategies.expansion).setTitle("Volume"),u=(new E.SolidFill).setColor(Object(E.ColorRGBA)(72,187,120,50)),m=(new E.SolidLine).setFillStyle((new E.SolidFill).setColor(Object(E.ColorRGBA)(72,187,120))).setThickness(1),d=i.addAreaSeries({type:E.AreaSeriesTypes.Positive,yAxis:c}).setName(t).setFillStyle(u).setStrokeStyle(m).setCursorInterpolationEnabled(!1).setMaxPointCount(0),p=(new E.SolidFill).setColor(Object(E.ColorRGBA)(245,101,101,50)),h=(new E.SolidLine).setFillStyle((new E.SolidFill).setColor(Object(E.ColorRGBA)(245,101,101))).setThickness(1),g=i.addAreaSeries({type:E.AreaSeriesTypes.Negative,yAxis:c}).setName(a).setFillStyle(p).setStrokeStyle(h).setCursorInterpolationEnabled(!1).setMaxPointCount(0);return d.setResultTableFormatter((function(e,a,n,r){return e.addRow(t).addRow(a.axisX.formatValue(n)).addRow("Amount: ".concat(r.toFixed(0)))})),g.setResultTableFormatter((function(e,t,n,r){return e.addRow(a).addRow(t.axisX.formatValue(n)).addRow("Amount: ".concat((-1*r).toFixed(0)))})),l.add(i),r.forEach((function(e){d.add({x:e.position,y:e.high}),g.add({x:e.position,y:e.low})})),i}}},{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createChart();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e,t,a,n,r;null===(e=this.sellVolumeChart)||void 0===e||e.dispose(),null===(t=this.buyVolumeChart)||void 0===t||t.dispose(),null===(a=this.sellPriceChart)||void 0===a||a.dispose(),null===(n=this.buyPriceChart)||void 0===n||n.dispose(),null===(r=this.dashboard)||void 0===r||r.dispose(),this.sellVolumeChart=void 0,this.buyVolumeChart=void 0,this.sellPriceChart=void 0,this.buyPriceChart=void 0,this.dashboard=void 0}},{key:"render",value:function(){var e=this.props.itemId;return s.a.createElement("div",{id:e.toString(),className:"h-full"})}}]),a}(s.a.Component),j=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={},n}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props,t=e.price,a=e.priceColor,n=t<0,r=Math.abs(t),i=Math.floor(r/1e4),o=Math.floor(r%1e4/100),l=Math.floor(r%1e4%100);return s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("div",{id:"gold",className:"mr-1 flex flex-row items-center"},s.a.createElement(w.a,{icon:"minus",className:"".concat(n?"":"hidden"," ").concat(a," mr-1"),style:{fontSize:"0.5rem"}}),s.a.createElement("img",{src:"https://wiki.guildwars2.com/images/d/d1/Gold_coin.png",alt:"Gold Coin",className:"mr-1 w-4 h-4"}),s.a.createElement("span",{className:"text-sm ".concat(a)},i)),s.a.createElement("div",{id:"silver",className:"mr-1 flex flex-row items-center"},s.a.createElement("img",{src:"https://wiki.guildwars2.com/images/3/3c/Silver_coin.png",alt:"Silver Coin",className:"mr-1 w-4 h-4"}),s.a.createElement("span",{className:"text-sm ".concat(a)},o)),s.a.createElement("div",{id:"copper",className:"mr-1 flex flex-row items-center"},s.a.createElement("img",{src:"https://wiki.guildwars2.com/images/e/eb/Copper_coin.png",alt:"Copper Coin",className:"mr-1 w-4 h-4"}),s.a.createElement("span",{className:"text-sm ".concat(a)},l)))}}]),a}(s.a.Component);j.defaultProps={price:0,priceColor:"text-gray-200"};var P,L,I,F,D=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={amount:1,isOpen:!1},n.toggleOpen=n.toggleOpen.bind(Object(x.a)(n)),n}return Object(g.a)(a,[{key:"toggleOpen",value:function(){this.state.isOpen?this.setState({isOpen:!1}):this.setState({isOpen:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.deleteItem,r=this.state,i=r.amount,o=r.isOpen,l=Math.round(a.SellPrice*i),c=Math.round(a.BuyPrice*i),u=Math.round(.15*a.SellPrice)*i,m=l-c-u;return s.a.createElement("div",{className:"flex flex-col px-4 py-2 bg-gray-700"},s.a.createElement("div",{className:"flex flex-row cursor-pointer",onClick:this.toggleOpen},s.a.createElement("div",{className:"flex flex-row w-2/8 items-center mr-6"},s.a.createElement("img",{src:a.Icon,alt:a.Name,className:"mr-4 w-12 h-12"}),s.a.createElement("span",{className:"italic text-gray-200"},a.Name)),s.a.createElement("div",{className:"flex flex-col xl:flex-row w-5/12 items-center"},s.a.createElement("div",{className:"flex flex-row xl:mr-4"},s.a.createElement("div",{className:"flex flex-col items-center mr-4"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 text-gray-500"},"Amount"),s.a.createElement("input",{type:"number",className:"w-16 px-1 text-sm bg-gray-600 text-gray-200",defaultValue:1,onChange:function(t){var a=parseInt(t.target.value);console.log(a),null==a||isNaN(a)||e.setState({amount:a})}})),s.a.createElement("div",{className:"flex flex-col items-center"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Net Profit"),s.a.createElement(j,{price:m,priceColor:"".concat(m<0?"text-red-500":"text-green-500")}))),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("div",{className:"flex flex-col items-center mr-4"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 text-gray-500"},"Buys"),s.a.createElement(j,{price:c})),s.a.createElement("div",{className:"flex flex-col items-center mr-4"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 text-gray-500"},"Sells"),s.a.createElement(j,{price:l})),s.a.createElement("div",{className:"flex flex-col items-center"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 text-gray-500"},"Fees"),s.a.createElement(j,{price:u})))),s.a.createElement("div",{className:"w-2/8"},s.a.createElement("div",{className:"flex flex-col xl:flex-row justify-evenly w-full h-full"},s.a.createElement("div",{className:"flex flex-row xl:flex-col items-center xl:mr-4"},s.a.createElement("label",{htmlFor:"",className:"text-sm mr-4 xl:mr-0 xl:mb-1 font-bold text-gray-500"},"Appeal"),s.a.createElement("span",{className:"text-gray-200"},a.Appeal.toFixed(2))),s.a.createElement("div",{className:"flex flex-row xl:flex-col items-center xl:mr-4"},s.a.createElement("label",{htmlFor:"",className:"text-sm mr-4 xl:mr-0 xl:mb-1 text-gray-500"},"Margin"),s.a.createElement("span",{className:a.Margin<15?"text-red-500":"text-green-500"},a.Margin.toFixed(2),"%")),s.a.createElement("div",{className:"flex flex-row xl:flex-col items-center xl:mr-4"},s.a.createElement("label",{htmlFor:"",className:"text-sm mr-4 xl:mr-0 xl:mb-1 text-gray-500"},"Sold"),s.a.createElement("span",{className:"text-gray-200"},a.Sold.toFixed(2))),s.a.createElement("div",{className:"flex flex-row xl:flex-col items-center xl:mr-4"},s.a.createElement("label",{htmlFor:"",className:"text-sm mr-4 xl:mr-0 xl:mb-1 text-gray-500"},"Bought"),s.a.createElement("span",{className:"text-gray-200"},a.Bought.toFixed(2))))),s.a.createElement("div",{className:"flex flex-row w-1/12 items-center justify-center"},s.a.createElement("button",{className:"transition duration-150 ease-in-out px-3 py-1 rounded shadow-lg bg-red-700 text-red-300 hover:bg-red-800 hover:text-red-200",onClick:function(){return n(a.Id)}},s.a.createElement(w.a,{icon:"trash-alt"})))),o&&s.a.createElement("div",{className:"mt-2 w-full",style:{height:"36rem"}},s.a.createElement(C,{itemId:a.Id})))}}]),a}(s.a.Component);!function(e){e[e.Name=0]="Name",e[e.Buys=1]="Buys",e[e.Sells=2]="Sells",e[e.Appeal=3]="Appeal",e[e.Margin=4]="Margin",e[e.Sold=5]="Sold",e[e.Bought=6]="Bought"}(P||(P={})),function(e){e[e.Ascending=0]="Ascending",e[e.Descending=1]="Descending"}(L||(L={})),function(e){e[e.None=0]="None",e[e.Junk=1]="Junk",e[e.Basic=2]="Basic",e[e.Fine=4]="Fine",e[e.Masterwork=8]="Masterwork",e[e.Rare=16]="Rare",e[e.Exotic=32]="Exotic",e[e.Ascended=64]="Ascended",e[e.Legendary=128]="Legendary",e[e.All=255]="All"}(I||(I={})),function(e){e[e.None=0]="None",e[e.Armor=1]="Armor",e[e.Back=2]="Back",e[e.Bag=4]="Bag",e[e.Consumable=8]="Consumable",e[e.Container=16]="Container",e[e.CraftingMaterial=32]="CraftingMaterial",e[e.Gathering=64]="Gathering",e[e.Gizmo=128]="Gizmo",e[e.Key=256]="Key",e[e.MiniPet=512]="MiniPet",e[e.Tool=1024]="Tool",e[e.Trait=2048]="Trait",e[e.Trinket=4096]="Trinket",e[e.Trophy=8192]="Trophy",e[e.UpgradeComponent=16384]="UpgradeComponent",e[e.Weapon=32768]="Weapon",e[e.All=65535]="All"}(F||(F={}));var B=function(){function e(t){var a,n,r,s,i,o,l,c,u,m,d;Object(h.a)(this,e),this.name=void 0,this.type=void 0,this.rarity=void 0,this.minLevel=void 0,this.maxLevel=void 0,this.minBuyPrice=void 0,this.maxBuyPrice=void 0,this.minSellPrice=void 0,this.maxSellPrice=void 0,this.sortBy=void 0,this.sortDirection=void 0,this.name=null!==(a=null===t||void 0===t?void 0:t.name)&&void 0!==a?a:"",this.type=null!==(n=null===t||void 0===t?void 0:t.type)&&void 0!==n?n:F.All,this.rarity=null!==(r=null===t||void 0===t?void 0:t.rarity)&&void 0!==r?r:I.All,this.minLevel=null!==(s=null===t||void 0===t?void 0:t.minLevel)&&void 0!==s?s:0,this.maxLevel=null!==(i=null===t||void 0===t?void 0:t.maxLevel)&&void 0!==i?i:80,this.minBuyPrice=null!==(o=null===t||void 0===t?void 0:t.minBuyPrice)&&void 0!==o?o:0,this.maxBuyPrice=null!==(l=null===t||void 0===t?void 0:t.maxBuyPrice)&&void 0!==l?l:1e8,this.minSellPrice=null!==(c=null===t||void 0===t?void 0:t.minSellPrice)&&void 0!==c?c:0,this.maxSellPrice=null!==(u=null===t||void 0===t?void 0:t.maxSellPrice)&&void 0!==u?u:1e8,this.sortBy=null!==(m=null===t||void 0===t?void 0:t.sortBy)&&void 0!==m?m:P.Appeal,this.sortDirection=null!==(d=null===t||void 0===t?void 0:t.sortDirection)&&void 0!==d?d:L.Descending}return Object(g.a)(e,[{key:"toObject",value:function(){return{name:this.name,type:this.type.valueOf().toString(),rarity:this.rarity.valueOf().toString(),minLevel:this.minLevel.toString(),maxLevel:this.maxLevel.toString(),minBuyPrice:this.minBuyPrice.toString(),maxBuyPrice:this.maxBuyPrice.toString(),minSellPrice:this.minSellPrice.toString(),maxSellPrice:this.maxSellPrice.toString(),sortBy:this.sortBy.valueOf().toString(),sortDirection:this.sortDirection.valueOf().toString()}}}]),e}(),T=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={isOpen:!1},n.toggleOpen=n.toggleOpen.bind(Object(x.a)(n)),n.toggleRarity=n.toggleRarity.bind(Object(x.a)(n)),n.checkRarity=n.checkRarity.bind(Object(x.a)(n)),n}return Object(g.a)(a,[{key:"toggleOpen",value:function(){this.state.isOpen?this.setState({isOpen:!1}):this.setState({isOpen:!0})}},{key:"toggleRarity",value:function(e){var t,a=this,n=this.props,r=n.rarity,s=n.onChange;switch(e){case I.None:case I.All:t=e;break;default:t=r^e}s(t,(function(){return a.setState({isOpen:!0})}))}},{key:"checkRarity",value:function(e){var t=this.props.rarity;return(t===I.All||e!==I.All)&&0!==(t&e)}},{key:"render",value:function(){var e,t=this,n=this.props.rarity,r=this.state.isOpen;return e=n===I.None?I[I.None]:n===I.All?I[I.All]:a.isPowerOf2(n)?I[n]:"Mixed",s.a.createElement("div",{className:"relative",tabIndex:0,onClick:this.toggleOpen},s.a.createElement("div",{className:"transition duration-150 ease-in-out px-2 py-1 flex items-center justify-between rounded-r text-sm bg-gray-600 text-gray-200 hover:shadow-lg hover:bg-gray-500 hover:text-gray-100 select-none cursor-pointer",style:{width:"6.9rem"}},s.a.createElement("span",null,e),r&&s.a.createElement(w.a,{className:"text-xs",icon:"chevron-up"})||!r&&s.a.createElement(w.a,{className:"text-xs",icon:"chevron-down"})),r&&s.a.createElement("div",{className:"absolute rounded bg-gray-600 text-gray-200",style:{top:"2rem",zIndex:100}},Object.keys(I).filter((function(e){return isNaN(parseInt(e))})).map((function(e,a){var n=I[e];return s.a.createElement("div",{key:a,className:"flex flex-row items-center px-2 py-1 text-sm rounded hover:bg-gray-700 hover:text-gray-100 select-none cursor-pointer",tabIndex:0,onClick:function(){return t.toggleRarity(n)}},t.checkRarity(n)&&s.a.createElement(w.a,{className:"mr-2",icon:"check"})||!t.checkRarity(n)&&s.a.createElement("div",{className:"",style:{width:"1.38rem"}}),I[n])}))))}}],[{key:"isPowerOf2",value:function(e){return 0!==e&&0===(e&e-1)}}]),a}(s.a.Component),A=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={isOpen:!1},n.toggleOpen=n.toggleOpen.bind(Object(x.a)(n)),n.toggleType=n.toggleType.bind(Object(x.a)(n)),n.checkType=n.checkType.bind(Object(x.a)(n)),n}return Object(g.a)(a,[{key:"toggleOpen",value:function(){this.state.isOpen?this.setState({isOpen:!1}):this.setState({isOpen:!0})}},{key:"toggleType",value:function(e){var t,a=this,n=this.props,r=n.type,s=n.onChange;switch(e){case F.None:case F.All:t=e;break;default:t=r^e}s(t,(function(){return a.setState({isOpen:!0})}))}},{key:"checkType",value:function(e){var t=this.props.type;return(t===F.All||e!==F.All)&&0!==(t&e)}},{key:"render",value:function(){var e,t=this,n=this.props.type,r=this.state.isOpen;return e=n===F.None?F[F.None]:n===F.All?F[F.All]:a.isPowerOf2(n)?F[n]:"Mixed",s.a.createElement("div",{className:"relative",tabIndex:0,onClick:this.toggleOpen},s.a.createElement("div",{className:"transition duration-150 ease-in-out px-2 py-1 text-sm flex items-center justify-between rounded-r bg-gray-600 text-gray-200 hover:shadow-lg hover:bg-gray-500 hover:text-gray-100 select-none cursor-pointer",style:{width:"10.29rem"}},s.a.createElement("span",null,e),r&&s.a.createElement(w.a,{className:"text-xs",icon:"chevron-up"})||!r&&s.a.createElement(w.a,{className:"text-xs",icon:"chevron-down"})),r&&s.a.createElement("div",{className:"absolute rounded bg-gray-600 text-gray-200",style:{top:"2rem",zIndex:100}},Object.keys(F).filter((function(e){return isNaN(parseInt(e))})).map((function(e,a){var n=F[e];return s.a.createElement("div",{key:a,className:"flex flex-row items-center px-2 py-1 text-sm rounded hover:bg-gray-700 hover:text-gray-100 select-none cursor-pointer",tabIndex:0,onClick:function(){return t.toggleType(n)}},t.checkType(n)&&s.a.createElement(w.a,{className:"mr-2",icon:"check"})||!t.checkType(n)&&s.a.createElement("div",{className:"",style:{width:"1.38rem"}}),F[n])}))))}}],[{key:"isPowerOf2",value:function(e){return 0!==e&&0===(e&e-1)}}]),a}(s.a.Component),M=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).state={query:new B,filteredItems:e.items,isFilterOpen:!1,timespan:n.OneMonth},r.resetQueryValues=r.resetQueryValues.bind(Object(x.a)(r)),r.toggleFilter=r.toggleFilter.bind(Object(x.a)(r)),r.onFilterOpen=r.onFilterOpen.bind(Object(x.a)(r)),r.onFilterClose=r.onFilterClose.bind(Object(x.a)(r)),r.onFilter=r.onFilter.bind(Object(x.a)(r)),r.onSearch=r.onSearch.bind(Object(x.a)(r)),r.sortCompare=r.sortCompare.bind(Object(x.a)(r)),r.onNameChange=r.onNameChange.bind(Object(x.a)(r)),r.onTypeChange=r.onTypeChange.bind(Object(x.a)(r)),r.onRarityChange=r.onRarityChange.bind(Object(x.a)(r)),r.onMinLevelChange=r.onMinLevelChange.bind(Object(x.a)(r)),r.onMaxLevelChange=r.onMaxLevelChange.bind(Object(x.a)(r)),r.onMinBuyPriceChange=r.onMinBuyPriceChange.bind(Object(x.a)(r)),r.onMaxBuyPriceChange=r.onMaxBuyPriceChange.bind(Object(x.a)(r)),r.onMinSellPriceChange=r.onMinSellPriceChange.bind(Object(x.a)(r)),r.onMaxSellPriceChange=r.onMaxSellPriceChange.bind(Object(x.a)(r)),r.onSort=r.onSort.bind(Object(x.a)(r)),r.onSortDirection=r.onSortDirection.bind(Object(x.a)(r)),r.onSetTimespan=r.onSetTimespan.bind(Object(x.a)(r)),r}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.onFilter()}},{key:"componentDidUpdate",value:function(e){e.items!==this.props.items&&this.onFilter()}},{key:"resetQueryValues",value:function(){this.setState({query:new B})}},{key:"toggleFilter",value:function(){this.state.isFilterOpen?this.onFilterClose():this.onFilterOpen()}},{key:"onFilterOpen",value:function(){this.setState({isFilterOpen:!0})}},{key:"onFilterClose",value:function(){this.setState({isFilterOpen:!1})}},{key:"onFilter",value:function(){var e=this.props.items,t=this.state.query,a=e;a=(a=e.filter((function(e){return e.Name.toLowerCase().includes(t.name.toLowerCase())&&0!==(t.type&e.Type)&&0!==(t.rarity&e.Rarity)&&e.Level>=t.minLevel&&e.Level<=t.maxLevel&&e.BuyPrice>=t.minBuyPrice&&e.BuyPrice<=t.maxBuyPrice&&e.SellPrice>=t.minSellPrice&&e.SellPrice<=t.maxSellPrice}))).sort(this.sortCompare),this.setState({filteredItems:a})}},{key:"onSearch",value:function(e){e.preventDefault();var t=this.props.items,a=this.state.query,n=t;n=(n=t.filter((function(e){return e.Name.toLowerCase().includes(a.name.toLowerCase())}))).sort(this.sortCompare),this.setState({filteredItems:n})}},{key:"sortCompare",value:function(e,t){var a=this.state.query,n=a.sortDirection===L.Ascending;return a.sortBy===P.Name?n?e.Name.toLowerCase().localeCompare(t.Name.toLowerCase()):t.Name.toLowerCase().localeCompare(e.Name.toLowerCase()):a.sortBy===P.Appeal?n?e.Appeal-t.Appeal:t.Appeal-e.Appeal:a.sortBy===P.Margin?n?e.Margin-t.Margin:t.Margin-e.Margin:a.sortBy===P.Sold?n?e.Sold-t.Sold:t.Sold-e.Sold:a.sortBy===P.Bought?n?e.Bought-t.Bought:t.Bought-e.Bought:a.sortBy===P.Buys?n?e.BuyPrice-t.BuyPrice:t.BuyPrice-e.BuyPrice:a.sortBy===P.Sells?n?e.SellPrice-t.SellPrice:t.SellPrice-e.SellPrice:0}},{key:"onNameChange",value:function(e){var t=e.target.value;this.setState((function(e){var a=e.query;return a.name=t,{query:a}}))}},{key:"onTypeChange",value:function(e,t){this.setState((function(t){var a=t.query;return a.type=e,{query:a}}),t)}},{key:"onRarityChange",value:function(e,t){this.setState((function(t){var a=t.query;return a.rarity=e,{query:a}}),t)}},{key:"onMinLevelChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),a>80&&(a=80),this.setState((function(e){var t=e.query;return a>t.maxLevel||(t.minLevel=a),{query:t}}))}},{key:"onMaxLevelChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),a>80&&(a=80),this.setState((function(e){var t=e.query;return a<t.minLevel||(t.maxLevel=a),{query:t}}))}},{key:"onMinBuyPriceChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),this.setState((function(e){var t=e.query;return t.minBuyPrice=a,{query:t}}))}},{key:"onMaxBuyPriceChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),this.setState((function(e){var t=e.query;return t.maxBuyPrice=a,{query:t}}))}},{key:"onMinSellPriceChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),this.setState((function(e){var t=e.query;return t.minSellPrice=a,{query:t}}))}},{key:"onMaxSellPriceChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),this.setState((function(e){var t=e.query;return t.maxSellPrice=a,{query:t}}))}},{key:"onSort",value:function(e){var t=e.target.value;this.setState((function(e){var a=e.query;return a.sortBy=parseInt(t),{query:a}}),this.onFilter)}},{key:"onSortDirection",value:function(){this.setState((function(e){var t=e.query;return t.sortDirection=t.sortDirection===L.Ascending?L.Descending:L.Ascending,{query:t}}),this.onFilter)}},{key:"onSetTimespan",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.props.onSetTimespan,n=t.target.value,r=parseInt(n),this.setState({timespan:r},Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.name,r=t.isDataStale,i=t.onReload,o=t.children,l=this.state,c=l.query,u=l.isFilterOpen,m=l.filteredItems,d=l.timespan,p=c.sortDirection===L.Ascending;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"flex flex-row justify-between items-center px-4 py-2 mb-4 bg-gray-900 text-gray-500"},s.a.createElement("span",{className:""},a),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("form",{className:"flex flex-row mr-4",onSubmit:this.onSearch},s.a.createElement("input",{type:"text",className:"pl-2 rounded-l bg-gray-600 text-gray-200",value:c.name,onChange:this.onNameChange}),s.a.createElement("button",{className:"transition duration-150 ease-in-out flex items-center px-2 rounded-r bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg"},s.a.createElement(w.a,{icon:"search",className:"mr-1 text-xs"}),s.a.createElement("span",{className:"text-xs"},"Search"))),s.a.createElement("label",{htmlFor:"",className:"mr-2 text-sm"},"Sort By"),s.a.createElement("select",{name:"",id:"",className:"pl-2 rounded-l h-6 text-sm bg-gray-600 text-gray-200",value:c.sortBy,onChange:this.onSort},s.a.createElement("option",{value:P.Name,className:""},P[P.Name]),s.a.createElement("option",{value:P.Buys,className:""},P[P.Buys]),s.a.createElement("option",{value:P.Sells,className:""},P[P.Sells]),s.a.createElement("option",{value:P.Appeal,className:""},P[P.Appeal]),s.a.createElement("option",{value:P.Margin,className:""},P[P.Margin]),s.a.createElement("option",{value:P.Sold,className:""},P[P.Sold]),s.a.createElement("option",{value:P.Bought,className:""},P[P.Bought])),s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 mr-4 rounded-r bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg",onClick:this.onSortDirection},p&&c.sortBy!==P.Name&&s.a.createElement(w.a,{icon:"sort-numeric-up"})||!p&&c.sortBy!==P.Name&&s.a.createElement(w.a,{icon:"sort-numeric-down-alt"})||p&&c.sortBy===P.Name&&s.a.createElement(w.a,{icon:"sort-alpha-up"})||!p&&c.sortBy===P.Name&&s.a.createElement(w.a,{icon:"sort-alpha-down-alt"})),s.a.createElement("label",{htmlFor:"",className:"mr-2 text-sm"},"Time Span"),s.a.createElement("select",{name:"",id:"",className:"pl-2 mr-4 rounded h-6 text-sm bg-gray-600 text-gray-200",value:d,onChange:this.onSetTimespan},s.a.createElement("option",{value:n.OneHour,className:""},n[n.OneHour]),s.a.createElement("option",{value:n.SixHours,className:""},n[n.SixHours]),s.a.createElement("option",{value:n.TwelveHours,className:""},n[n.TwelveHours]),s.a.createElement("option",{value:n.OneDay,className:""},n[n.OneDay]),s.a.createElement("option",{value:n.ThreeDays,className:""},n[n.ThreeDays]),s.a.createElement("option",{value:n.OneWeek,className:""},n[n.OneWeek]),s.a.createElement("option",{value:n.TwoWeeks,className:""},n[n.TwoWeeks]),s.a.createElement("option",{value:n.OneMonth,className:""},n[n.OneMonth])),s.a.createElement("div",{className:"relative"},s.a.createElement("button",{className:"transition duration-150 ease-in-out mr-4 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg",style:{padding:"0.20rem 0.5rem"},onClick:this.toggleFilter},s.a.createElement(w.a,{icon:"filter",className:"mr-1 text-xs"}),s.a.createElement("span",{className:"text-xs"},"Filter")),u&&s.a.createElement("div",{className:"absolute flex flex-col px-3 py-3 w-64 filter-arrow-up rounded shadow-lg bg-gray-900",style:{height:"21.7rem",top:"2.75rem",right:"0rem",zIndex:100}},s.a.createElement("div",{className:"mb-2 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Name"),s.a.createElement("input",{type:"text",className:"w-full px-2 rounded-r bg-gray-600 text-gray-200",value:c.name,onChange:this.onNameChange})),s.a.createElement("div",{className:"mb-2 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Type"),s.a.createElement(A,{type:c.type,onChange:this.onTypeChange})),s.a.createElement("div",{className:"mb-2 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Rarity"),s.a.createElement(T,{rarity:c.rarity,onChange:this.onRarityChange})),s.a.createElement("div",{className:"mb-2 flex flex-col"},s.a.createElement("span",{className:"mb-1 text-sm"},"Level"),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("div",{className:"mr-1 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Min"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:c.minLevel,onChange:this.onMinLevelChange})),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Max"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:c.maxLevel,onChange:this.onMaxLevelChange})))),s.a.createElement("div",{className:"mb-2 flex flex-col"},s.a.createElement("span",{className:"mb-1 text-sm"},"Buy Price"),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("div",{className:"mr-1 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Min"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:c.minBuyPrice,onChange:this.onMinBuyPriceChange})),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Max"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:c.maxBuyPrice,onChange:this.onMaxBuyPriceChange})))),s.a.createElement("div",{className:"mb-4 flex flex-col"},s.a.createElement("span",{className:"mb-1 text-sm"},"Sell Price"),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("div",{className:"mr-1 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Min"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:c.minSellPrice,onChange:this.onMinSellPriceChange})),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Max"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:c.maxSellPrice,onChange:this.onMaxSellPriceChange})))),s.a.createElement("div",{className:"flex flex-row justify-between"},s.a.createElement("div",{className:""},s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 py-1 rounded text-sm bg-red-700 text-red-300 hover:shadow-lg hover:bg-red-800 hover:text-red-200",onClick:this.resetQueryValues},"Reset")),s.a.createElement("div",{className:"flex flex-row-reverse"},s.a.createElement("button",{className:"transition duration-150 ease-in-out ml-2 px-2 py-1 rounded text-sm bg-indigo-700 text-indigo-300 hover:shadow-lg hover:bg-indigo-800 hover:text-indigo-200",onClick:function(){e.onFilter(),e.onFilterClose()}},"Filter"),s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 py-1 rounded text-sm bg-gray-700 text-gray-300 hover:shadow-lg hover:bg-gray-800 hover:text-gray-200",onClick:this.onFilterClose},"Cancel"))))),s.a.createElement("button",{className:"transition duration-150 ease-in-out relative flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg",style:{padding:"0.3rem 0.5rem"},title:"".concat(r?"Reload Data (Data may be stale)":"Reload Data"),onClick:i},s.a.createElement(w.a,{icon:"redo-alt",className:"text-sm"}),r&&s.a.createElement("div",{className:"absolute flex h-3 w-3",style:{top:"-0.35rem",right:"-0.35rem"}},s.a.createElement("span",{className:"animate-ping h-3 w-3 absolute rounded-full bg-yellow-500 opacity-75"}),s.a.createElement("span",{className:"relative rounded-full h-3 w-3 bg-yellow-500"}))))),null!=o?o(m):null)}}]),a}(s.a.Component),H=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(h.a)(this,e),this.id=void 0,this.hasDetails=void 0,this.newest=void 0,this.id=t,this.hasDetails=a,this.newest=n}return Object(g.a)(e,[{key:"toObject",value:function(){return{id:this.id.toString(),hasDetails:this.hasDetails.toString(),newest:this.newest.toString()}}}]),e}(),R=function(){function e(){Object(h.a)(this,e)}return Object(g.a)(e,null,[{key:"ToPricedItem",value:function(e){try{return{Id:e.id,ChatLink:e.chatLink,Name:e.name,Icon:e.icon,Description:e.description,Type:parseInt(e.type),Rarity:parseInt(e.rarity),Level:e.level,BuyPrice:e.buyPrice,SellPrice:e.sellPrice,Appeal:parseFloat(parseFloat(e.appeal).toFixed(2)),Margin:parseFloat(parseFloat(e.margin).toFixed(2)),Sold:parseFloat(parseFloat(e.sold).toFixed(2)),Bought:parseFloat(parseFloat(e.bought).toFixed(2))}}catch(t){return console.log(t),null}}},{key:"ToPricedItems",value:function(t){var a=[];return t.forEach((function(t){var n=e.ToPricedItem(t);null!=n&&a.push(n)})),a}}]),e}(),G={urls:{authority:"https://auth.devwulfcodes.com",host:"https://gw2.devwulfcodes.com",gw2calculator:"https://gw2.devwulfcodes.com/api"}},Q=new(function(){function e(){Object(h.a)(this,e)}return Object(g.a)(e,[{key:"GetItems",value:function(){var t=Object(p.a)(d.a.mark((function t(a,n,r){var s,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=G.urls.gw2calculator+"/item/pricedItems?"+new URLSearchParams(n.toObject())+"&pageNumber=".concat(r),t.next=3,e.Get(s,a);case 3:return i=t.sent,t.next=6,i.json();case 6:if(o=t.sent,!i.ok){t.next=9;break}return t.abrupt("return",R.ToPricedItems(o));case 9:return console.log(o),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"GetItemPageCount",value:function(){var t=Object(p.a)(d.a.mark((function t(a,n){var r,s,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=G.urls.gw2calculator+"/item/pricedItems/pageCount?"+new URLSearchParams(n.toObject()),t.next=3,e.Get(r,a);case 3:return s=t.sent,t.next=6,s.json();case 6:if(i=t.sent,!s.ok){t.next=9;break}return t.abrupt("return",i);case 9:return console.log(i),t.abrupt("return",0);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"GetHistoryItems",value:function(){var t=Object(p.a)(d.a.mark((function t(a,n){var r,s,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=G.urls.gw2calculator+"/item/historyItems",t.next=3,e.Post(r,a,n);case 3:return s=t.sent,t.next=6,s.json();case 6:if(i=t.sent,!s.ok){t.next=9;break}return t.abrupt("return",S.ToHistoryItems(i));case 9:return console.log(i),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"GetItemLists",value:function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,s,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=G.urls.gw2calculator+"/list/getLists",t.next=3,e.Get(n,a);case 3:return r=t.sent,t.next=6,r.json();case 6:if(s=t.sent,!r.ok){t.next=12;break}return i=s.itemLists,o=[],i.forEach((function(e){var t={id:e.id,name:e.name};o.push(t)})),t.abrupt("return",o);case 12:return console.log(s),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"GetItemList",value:function(){var t=Object(p.a)(d.a.mark((function t(a,n){var r,s,i,o,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=G.urls.gw2calculator+"/list/getList/"+n,t.next=3,e.Get(r,a);case 3:return s=t.sent,t.next=6,s.json();case 6:if(i=t.sent,!s.ok){t.next=12;break}return o=i.itemIds,l=[],o.forEach((function(e){var t=parseInt(e);l.push(t)})),t.abrupt("return",l);case 12:return console.log(i),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"CreateList",value:function(){var t=Object(p.a)(d.a.mark((function t(a,n){var r,s,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=G.urls.gw2calculator+"/list/createList",t.next=3,e.Post(r,a,{name:n});case 3:return s=t.sent,t.next=6,s.json();case 6:if(i=t.sent,!s.ok){t.next=9;break}return t.abrupt("return",i.listId);case 9:return console.log(i),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"UpdateListName",value:function(){var t=Object(p.a)(d.a.mark((function t(a,n,r){var s,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=G.urls.gw2calculator+"/list/updateName",t.next=3,e.Post(s,a,{id:n,name:r});case 3:if(!(i=t.sent).ok){t.next=6;break}return t.abrupt("return",!0);case 6:return t.next=8,i.json();case 8:return o=t.sent,console.log(o),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"AddListItem",value:function(){var t=Object(p.a)(d.a.mark((function t(a,n,r){var s,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=G.urls.gw2calculator+"/list/addItem",t.next=3,e.Post(s,a,{id:n,itemId:r});case 3:if(!(i=t.sent).ok){t.next=6;break}return t.abrupt("return",!0);case 6:return t.next=8,i.json();case 8:return o=t.sent,console.log(o),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"DeleteListItem",value:function(){var t=Object(p.a)(d.a.mark((function t(a,n,r){var s,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=G.urls.gw2calculator+"/list/deleteItem",t.next=3,e.Post(s,a,{id:n,itemId:r});case 3:if(!(i=t.sent).ok){t.next=6;break}return t.abrupt("return",!0);case 6:return t.next=8,i.json();case 8:return o=t.sent,console.log(o),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"DeleteList",value:function(){var t=Object(p.a)(d.a.mark((function t(a,n){var r,s,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=G.urls.gw2calculator+"/list/deleteList",t.next=3,e.Post(r,a,{id:n});case 3:if(!(s=t.sent).ok){t.next=6;break}return t.abrupt("return",!0);case 6:return t.next=8,s.json();case 8:return i=t.sent,console.log(i),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}],[{key:"Get",value:function(){var e=Object(p.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"Post",value:function(){var e=Object(p.a)(d.a.mark((function e(t,a,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:n?JSON.stringify(n):void 0}));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}()),_=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var r;return Object(h.a)(this,a),(r=t.call(this,e)).state={id:"",user:void 0,items:[],timespan:n.OneMonth,isLoading:!1,isDataStale:!1},r.updateId=r.updateId.bind(Object(x.a)(r)),r.updateItems=r.updateItems.bind(Object(x.a)(r)),r.deleteItem=r.deleteItem.bind(Object(x.a)(r)),r.onReload=r.onReload.bind(Object(x.a)(r)),r.setTimespan=r.setTimespan.bind(Object(x.a)(r)),r}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateId();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateId();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateId",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.listId,a=this.state.id,t&&a!==t&&this.setState({id:t,items:[],isLoading:!0},Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateItems();case 2:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateItems",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,r,s,i=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.user,r=t.id,s=t.timespan,n){e.next=3;break}return e.abrupt("return");case 3:this.setState({items:[],isLoading:!0,isDataStale:!1},Object(p.a)(d.a.mark((function e(){var t,o,l,c,u,m,p,h,g,x,f,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.GetItemList(n.access_token,r);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:o=[],l=0;case 7:if(!(l<t.length)){e.next=19;break}return c=t[l],e.next=11,O.getNewestTime(c);case 11:return u=e.sent,e.next=14,O.hasDetails(c);case 14:m=e.sent,o.push(new H(c,m,u));case 16:l++,e.next=7;break;case 19:return e.next=21,Q.GetHistoryItems(n.access_token,o);case 21:if(p=e.sent){e.next=24;break}return e.abrupt("return");case 24:h=[],l=0;case 26:if(!(l<p.length)){e.next=48;break}return g=p[l],x=o[l],e.next=31,O.deleteOldPrices(g.Id);case 31:if(x.hasDetails){e.next=36;break}return e.next=34,O.setHistoryItem(g);case 34:e.next=38;break;case 36:return e.next=38,O.setHistoryItemPrices(g.Id,g.History);case 38:return e.next=40,O.getHistoryItem(g.Id,s);case 40:if(f=e.sent){e.next=43;break}return e.abrupt("continue",45);case 43:v=a.historyToPriced(f),h.push(v);case 45:l++,e.next=26;break;case 48:i.setState({items:h,isLoading:!1},(function(){setTimeout((function(){i.setState({isDataStale:!0})}),3e5)}));case 49:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s,i,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.id,r=a.user,s=a.items,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Q.DeleteListItem(r.access_token,n,t);case 5:i=e.sent,o=Object(u.a)(s),i&&(l=o.findIndex((function(e){return e.Id===t})),o.splice(l,1),this.setState({items:o}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onReload",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({items:[],isLoading:!0},Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.updateItems();case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTimespan",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({items:[],timespan:t,isLoading:!0},Object(p.a)(d.a.mark((function e(){var r,s,i,o,l,c,u,m,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.state,s=r.user,i=r.id,s){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Q.GetItemList(s.access_token,i);case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:l=[],c=0;case 10:if(!(c<o.length)){e.next=22;break}return u=o[c],e.next=14,O.getHistoryItem(u,t);case 14:if(m=e.sent){e.next=17;break}return e.abrupt("continue",19);case 17:p=a.historyToPriced(m),l.push(p);case 19:c++,e.next=10;break;case 22:n.setState({items:l,isLoading:!1});case 23:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.items,r=t.isLoading,i=t.isDataStale;return s.a.createElement("div",{className:"main w-full px-4 py-4 bg-gray-800 text-gray-200"},s.a.createElement(y.AuthenticationContext.Consumer,null,(function(t){return null==t.oidcUser||e.state.user||e.setState({user:t.oidcUser}),a?s.a.createElement(M,{items:n,name:"Tracked Items",isDataStale:i,onReload:e.onReload,onSetTimespan:e.setTimespan},(function(t){return s.a.createElement(s.a.Fragment,null,t.length>0&&s.a.createElement(b.a,{noScrollX:!0,style:{height:"calc(100vh - 11rem)"}},t.map((function(t,a){return s.a.createElement("div",{key:a,className:"mb-2"},s.a.createElement(D,{item:t,deleteItem:e.deleteItem}))})))||t.length<=0&&!r&&s.a.createElement("div",{className:"flex justify-center"},"No items found.")||t.length<=0&&r&&s.a.createElement("div",{className:"flex flex-row items-center justify-center"},s.a.createElement(w.a,{icon:"spinner",className:"animate-spin mr-4 text-indigo-400"}),s.a.createElement("span",{className:""},"Loading items...")))})):s.a.createElement(s.a.Fragment,null,s.a.createElement(M,{items:[],name:"Items",isDataStale:!0,onReload:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),onSetTimespan:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))},(function(e){return s.a.createElement(s.a.Fragment,null)})))})))}}],[{key:"historyToPriced",value:function(e){var t=e.History[0],a=t.buyPrice,n=t.sellPrice,r=(n-a)/n*100,s=0,i=0;e.History.forEach((function(e){s+=e.sold,i+=e.bought}));var o=s/e.History.length,l=i/e.History.length,c=r>15?r*o*l:0;return{Id:e.Id,ChatLink:e.ChatLink,Name:e.Name,Icon:e.Icon,Description:e.Description,Type:e.Type,Rarity:e.Rarity,Level:e.Level,BuyPrice:a,SellPrice:n,Appeal:c,Margin:r,Sold:o,Bought:l}}}]),a}(s.a.Component),q=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"w-full h-full flex bg-gray-800 text-gray-200"})}}]),a}(s.a.Component),V=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).dragTarget=void 0,n.dragTarget=s.a.createRef(),n.state={isDragging:!1,isAdding:!1},n.onDragStart=n.onDragStart.bind(Object(x.a)(n)),n.onDragEnd=n.onDragEnd.bind(Object(x.a)(n)),n.onAdd=n.onAdd.bind(Object(x.a)(n)),n}return Object(g.a)(a,[{key:"onDragStart",value:function(e){var t=this;e.stopPropagation(),e.dataTransfer.setData("text",this.props.item.Id.toString()),requestAnimationFrame((function(){var e;null===(e=t.dragTarget.current)||void 0===e||e.classList.add("hide")})),this.setState({isDragging:!0})}},{key:"onDragEnd",value:function(e){var t;null===(t=this.dragTarget.current)||void 0===t||t.classList.remove("hide"),this.setState({isDragging:!1})}},{key:"onAdd",value:function(){this.setState((function(e){return{isAdding:!e.isAdding}}))}},{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isDragging;t.isAdding;return s.a.createElement("div",{className:"flex flex-row px-4 py-2 bg-gray-700"},s.a.createElement("div",{className:"flex flex-row w-3/12 items-center mr-6"},s.a.createElement("img",{src:e.Icon,alt:e.Name,className:"mr-4 w-12 h-12"}),s.a.createElement("span",{className:"italic text-gray-200"},e.Name)),s.a.createElement("div",{className:"flex flex-col w-2/12 items-center"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Buys"),s.a.createElement(j,{price:e.BuyPrice})),s.a.createElement("div",{className:"flex flex-col w-2/12 items-center"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Sells"),s.a.createElement(j,{price:e.SellPrice})),s.a.createElement("div",{className:"flex flex-col w-1/12 items-center"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Margin"),s.a.createElement("span",{className:"".concat(e.Margin>15?"text-green-500":"text-red-500")},e.Margin,"%")),s.a.createElement("div",{className:"flex flex-col w-1/12 items-center"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Sold"),s.a.createElement("span",{className:""},e.Sold)),s.a.createElement("div",{className:"flex flex-col w-1/12 items-center"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Bought"),s.a.createElement("span",{className:""},e.Bought)),s.a.createElement("div",{className:"flex flex-col w-1/12 items-center"},s.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Appeal"),s.a.createElement("span",{className:""},e.Appeal)),s.a.createElement("div",{className:"flex flex-row w-1/12 items-center justify-center"},s.a.createElement("div",{className:"relative px-2 py-1 mr-3 rounded shadow-lg bg-gray-800 text-gray-300 cursor-move",draggable:!0,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},s.a.createElement(w.a,{icon:"arrows-alt"}),s.a.createElement("div",{ref:this.dragTarget,className:"".concat(a?"":"hidden"," absolute px-2 py-1 flex flex-row items-center justify-center w-32 h-12 rounded bg-gray-800"),style:{top:"-0.25rem",left:"-2.75rem"}},s.a.createElement("img",{src:e.Icon,alt:e.Name,className:"mr-3 w-8 h-8 select-none"}),s.a.createElement("span",{className:"italic text-sm truncate text-gray-300 select-none"},e.Name)))))}}]),a}(s.a.Component),U=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={user:void 0,pendingQuery:new B,currentQuery:new B,filteredItems:[],isFilterOpen:!1,currentPage:1,totalPages:1},n.resetQueryValues=n.resetQueryValues.bind(Object(x.a)(n)),n.toggleFilter=n.toggleFilter.bind(Object(x.a)(n)),n.onFilterOpen=n.onFilterOpen.bind(Object(x.a)(n)),n.onFilterClose=n.onFilterClose.bind(Object(x.a)(n)),n.onFilter=n.onFilter.bind(Object(x.a)(n)),n.onSearch=n.onSearch.bind(Object(x.a)(n)),n.onToPage=n.onToPage.bind(Object(x.a)(n)),n.onFirstPage=n.onFirstPage.bind(Object(x.a)(n)),n.onLastPage=n.onLastPage.bind(Object(x.a)(n)),n.onNextPage=n.onNextPage.bind(Object(x.a)(n)),n.onPrevPage=n.onPrevPage.bind(Object(x.a)(n)),n.onNameChange=n.onNameChange.bind(Object(x.a)(n)),n.onTypeChange=n.onTypeChange.bind(Object(x.a)(n)),n.onRarityChange=n.onRarityChange.bind(Object(x.a)(n)),n.onMinLevelChange=n.onMinLevelChange.bind(Object(x.a)(n)),n.onMaxLevelChange=n.onMaxLevelChange.bind(Object(x.a)(n)),n.onMinBuyPriceChange=n.onMinBuyPriceChange.bind(Object(x.a)(n)),n.onMaxBuyPriceChange=n.onMaxBuyPriceChange.bind(Object(x.a)(n)),n.onMinSellPriceChange=n.onMinSellPriceChange.bind(Object(x.a)(n)),n.onMaxSellPriceChange=n.onMaxSellPriceChange.bind(Object(x.a)(n)),n.onSort=n.onSort.bind(Object(x.a)(n)),n.onSortDirection=n.onSortDirection.bind(Object(x.a)(n)),n}return Object(g.a)(a,[{key:"resetQueryValues",value:function(){this.setState({pendingQuery:new B})}},{key:"toggleFilter",value:function(){this.state.isFilterOpen?this.onFilterClose():this.onFilterOpen()}},{key:"onFilterOpen",value:function(){this.setState({isFilterOpen:!0})}},{key:"onFilterClose",value:function(){this.setState({isFilterOpen:!1})}},{key:"onFilter",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r,s,i,o=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.onLoadingStart,n=t.onLoadingStop,r=this.state,s=r.user,i=r.pendingQuery,s){e.next=4;break}return e.abrupt("return");case 4:this.setState({filteredItems:[]},Object(p.a)(d.a.mark((function e(){var t,r,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.GetItemPageCount(s.access_token,i);case 2:if(!((r=e.sent)<=0)){e.next=5;break}return e.abrupt("return");case 5:return a(),e.next=8,Q.GetItems(s.access_token,i,1);case 8:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=12;break}e.t0=void 0!==t;case 12:if(!e.t0){e.next=16;break}e.t2=t,e.next=17;break;case 16:e.t2=[];case 17:l=e.t2,o.setState({filteredItems:l,currentQuery:i,currentPage:1,totalPages:r},n);case 19:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSearch",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s,i,o,l,c=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.props,n=a.onLoadingStart,r=a.onLoadingStop,s=this.state,i=s.user,o=s.pendingQuery,i){e.next=5;break}return e.abrupt("return");case 5:l=new B({name:o.name}),this.setState({filteredItems:[]},Object(p.a)(d.a.mark((function e(){var t,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.GetItemPageCount(i.access_token,l);case 2:if(!((a=e.sent)<=0)){e.next=5;break}return e.abrupt("return");case 5:return n(),e.next=8,Q.GetItems(i.access_token,l,1);case 8:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=12;break}e.t0=void 0!==t;case 12:if(!e.t0){e.next=16;break}e.t2=t,e.next=17;break;case 16:e.t2=[];case 17:s=e.t2,c.setState({filteredItems:s,currentQuery:l,currentPage:1,totalPages:a},r);case 19:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onToPage",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s,i,o,l,c=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,n=a.onLoadingStart,r=a.onLoadingStop,s=this.state,i=s.user,o=s.currentQuery,l=s.totalPages,i){e.next=4;break}return e.abrupt("return");case 4:if(!(t<=0||t>l)){e.next=6;break}return e.abrupt("return");case 6:this.setState({filteredItems:[]},Object(p.a)(d.a.mark((function e(){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,Q.GetItems(i.access_token,o,t);case 3:if(e.t1=a=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==a;case 7:if(!e.t0){e.next=11;break}e.t2=a,e.next=12;break;case 11:e.t2=[];case 12:s=e.t2,c.setState({filteredItems:s,currentPage:t},r);case 14:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onFirstPage",value:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onToPage(1);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onLastPage",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.totalPages,e.next=3,this.onToPage(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onNextPage",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r,s,i,o,l,c=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.onLoadingStart,n=t.onLoadingStop,r=this.state,s=r.user,i=r.currentQuery,o=r.currentPage,l=r.totalPages,s){e.next=4;break}return e.abrupt("return");case 4:if(!(o>=l)){e.next=6;break}return e.abrupt("return");case 6:this.setState({filteredItems:[]},Object(p.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.next=3,Q.GetItems(s.access_token,i,o+1);case 3:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==t;case 7:if(!e.t0){e.next=11;break}e.t2=t,e.next=12;break;case 11:e.t2=[];case 12:r=e.t2,c.setState({filteredItems:r,currentPage:o+1},n);case 14:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onPrevPage",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a,n,r,s,i,o,l=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.onLoadingStart,n=t.onLoadingStop,r=this.state,s=r.user,i=r.currentQuery,o=r.currentPage,s){e.next=4;break}return e.abrupt("return");case 4:if(!(o<=1)){e.next=6;break}return e.abrupt("return");case 6:this.setState({filteredItems:[]},Object(p.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.next=3,Q.GetItems(s.access_token,i,o-1);case 3:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==t;case 7:if(!e.t0){e.next=11;break}e.t2=t,e.next=12;break;case 11:e.t2=[];case 12:r=e.t2,l.setState({filteredItems:r,currentPage:o-1},n);case 14:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onNameChange",value:function(e){var t=e.target.value;this.setState((function(e){var a=e.pendingQuery;return a.name=t,{pendingQuery:a}}))}},{key:"onTypeChange",value:function(e,t){this.setState((function(t){var a=t.pendingQuery;return a.type=e,{pendingQuery:a}}),t)}},{key:"onRarityChange",value:function(e,t){this.setState((function(t){var a=t.pendingQuery;return a.rarity=e,{pendingQuery:a}}),t)}},{key:"onMinLevelChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),a>80&&(a=80),this.setState((function(e){var t=e.pendingQuery;return a>t.maxLevel||(t.minLevel=a),{pendingQuery:t}}))}},{key:"onMaxLevelChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),a>80&&(a=80),this.setState((function(e){var t=e.pendingQuery;return a<t.minLevel||(t.maxLevel=a),{pendingQuery:t}}))}},{key:"onMinBuyPriceChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),this.setState((function(e){var t=e.pendingQuery;return t.minBuyPrice=a,{pendingQuery:t}}))}},{key:"onMaxBuyPriceChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),this.setState((function(e){var t=e.pendingQuery;return t.maxBuyPrice=a,{pendingQuery:t}}))}},{key:"onMinSellPriceChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),this.setState((function(e){var t=e.pendingQuery;return t.minSellPrice=a,{pendingQuery:t}}))}},{key:"onMaxSellPriceChange",value:function(e){var t,a=parseInt(null!==(t=e.target.value)&&void 0!==t?t:"0");a<0&&(a=0),this.setState((function(e){var t=e.pendingQuery;return t.maxSellPrice=a,{pendingQuery:t}}))}},{key:"onSort",value:function(e){var t=e.target.value;this.setState((function(e){var a=e.pendingQuery;return a.sortBy=parseInt(t),{pendingQuery:a}}),this.onFilter)}},{key:"onSortDirection",value:function(){this.setState((function(e){var t=e.pendingQuery;return t.sortDirection=t.sortDirection===L.Ascending?L.Descending:L.Ascending,{pendingQuery:t}}),this.onFilter)}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.name,n=t.children,r=this.state,i=r.pendingQuery,o=r.filteredItems,l=r.isFilterOpen,c=r.currentPage,u=r.totalPages,m=i.sortDirection===L.Ascending,h=[],g=c<5?1:c-4;g<=(c+4<=u?c+4:u);g++)h.push(g);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"flex flex-row justify-between items-center px-4 py-2 mb-4 bg-gray-900 text-gray-500"},s.a.createElement(y.AuthenticationContext.Consumer,null,(function(t){return null==t.oidcUser||e.state.user||e.setState({user:t.oidcUser},e.onFilter),s.a.createElement(s.a.Fragment,null)})),s.a.createElement("span",{className:""},a),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("form",{className:"flex flex-row mr-4",onSubmit:this.onSearch},s.a.createElement("input",{type:"text",className:"pl-2 rounded-l bg-gray-600 text-gray-200",value:i.name,onChange:this.onNameChange}),s.a.createElement("button",{className:"transition duration-150 ease-in-out flex items-center px-2 rounded-r bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg"},s.a.createElement(w.a,{icon:"search",className:"mr-1 text-xs"}),s.a.createElement("span",{className:"text-xs"},"Search"))),s.a.createElement("label",{htmlFor:"",className:"mr-2 text-sm"},"Sort By"),s.a.createElement("select",{name:"",id:"",className:"pl-2 rounded-l h-6 text-sm bg-gray-700 text-gray-300",value:i.sortBy,onChange:this.onSort},s.a.createElement("option",{value:P.Name,className:""},P[P.Name]),s.a.createElement("option",{value:P.Buys,className:""},P[P.Buys]),s.a.createElement("option",{value:P.Sells,className:""},P[P.Sells]),s.a.createElement("option",{value:P.Appeal,className:""},P[P.Appeal]),s.a.createElement("option",{value:P.Margin,className:""},P[P.Margin]),s.a.createElement("option",{value:P.Sold,className:""},P[P.Sold]),s.a.createElement("option",{value:P.Bought,className:""},P[P.Bought])),s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 mr-4 rounded-r border-l border-gray-800 bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg",onClick:this.onSortDirection},m&&i.sortBy!==P.Name&&s.a.createElement(w.a,{icon:"sort-numeric-up"})||!m&&i.sortBy!==P.Name&&s.a.createElement(w.a,{icon:"sort-numeric-down-alt"})||m&&i.sortBy===P.Name&&s.a.createElement(w.a,{icon:"sort-alpha-up"})||!m&&i.sortBy===P.Name&&s.a.createElement(w.a,{icon:"sort-alpha-down-alt"})),s.a.createElement("div",{className:"relative"},s.a.createElement("button",{className:"transition duration-150 ease-in-out mr-4 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg",style:{padding:"0.20rem 0.5rem"},onClick:this.toggleFilter},s.a.createElement(w.a,{icon:"filter",className:"mr-1 text-xs"}),s.a.createElement("span",{className:"text-xs"},"Filter")),l&&s.a.createElement("div",{className:"absolute flex flex-col px-3 py-3 w-64 filter-arrow-up rounded shadow-lg bg-gray-900",style:{height:"21.7rem",top:"2.75rem",right:"0rem",zIndex:100}},s.a.createElement("div",{className:"mb-2 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Name"),s.a.createElement("input",{type:"text",className:"w-full px-2 rounded-r bg-gray-600 text-gray-200",value:i.name,onChange:this.onNameChange})),s.a.createElement("div",{className:"mb-2 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Type"),s.a.createElement(A,{type:i.type,onChange:this.onTypeChange})),s.a.createElement("div",{className:"mb-2 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Rarity"),s.a.createElement(T,{rarity:i.rarity,onChange:this.onRarityChange})),s.a.createElement("div",{className:"mb-2 flex flex-col"},s.a.createElement("span",{className:"mb-1 text-sm"},"Level"),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("div",{className:"mr-1 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Min"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:i.minLevel,onChange:this.onMinLevelChange})),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Max"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:i.maxLevel,onChange:this.onMaxLevelChange})))),s.a.createElement("div",{className:"mb-2 flex flex-col"},s.a.createElement("span",{className:"mb-1 text-sm"},"Buy Price"),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("div",{className:"mr-1 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Min"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:i.minBuyPrice,onChange:this.onMinBuyPriceChange})),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Max"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:i.maxBuyPrice,onChange:this.onMaxBuyPriceChange})))),s.a.createElement("div",{className:"mb-4 flex flex-col"},s.a.createElement("span",{className:"mb-1 text-sm"},"Sell Price"),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("div",{className:"mr-1 flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Min"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:i.minSellPrice,onChange:this.onMinSellPriceChange})),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("label",{htmlFor:"",className:"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300"},"Max"),s.a.createElement("input",{type:"number",className:"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200",value:i.maxSellPrice,onChange:this.onMaxSellPriceChange})))),s.a.createElement("div",{className:"flex flex-row justify-between"},s.a.createElement("div",{className:""},s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 py-1 rounded text-sm bg-red-700 text-red-300 hover:shadow-lg hover:bg-red-800 hover:text-red-200",onClick:this.resetQueryValues},"Reset")),s.a.createElement("div",{className:"flex flex-row-reverse"},s.a.createElement("button",{className:"transition duration-150 ease-in-out ml-2 px-2 py-1 rounded text-sm bg-indigo-700 text-indigo-300 hover:shadow-lg hover:bg-indigo-800 hover:text-indigo-200",onClick:Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onFilter();case 2:e.onFilterClose();case 3:case"end":return t.stop()}}),t)})))},"Filter"),s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 py-1 rounded text-sm bg-gray-700 text-gray-300 hover:shadow-lg hover:bg-gray-800 hover:text-gray-200",onClick:this.onFilterClose},"Cancel"))))),s.a.createElement("button",{className:"transition duration-150 ease-in-out flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg",style:{padding:"0.3rem 0.5rem"},onClick:this.onFilter},s.a.createElement(w.a,{icon:"redo-alt",className:"text-sm"})))),null!=n?n(o):null,u>0&&s.a.createElement("div",{className:"mt-4 flex flex-row-reverse w-full"},s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("button",{className:"transition duration-150 ease-in-out mr-4 px-2 py-1 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg",onClick:this.onFirstPage},s.a.createElement(w.a,{icon:"angle-double-left",className:"mr-1 text-xs"}),s.a.createElement("span",{className:""},"First")),s.a.createElement("button",{className:"transition duration-150 ease-in-out mr-4 px-2 py-1 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg",onClick:this.onPrevPage},s.a.createElement(w.a,{icon:"arrow-left",className:"mr-1 text-xs"}),s.a.createElement("span",{className:""},"Prev")),h.map((function(t,a){return s.a.createElement("button",{key:a,disabled:c===t,className:"transition duration-150 ease-in-out mr-4 px-2 py-1 flex items-center rounded ".concat(c===t?"bg-gray-900 text-gray-200 cursor-default":"bg-gray-700 text-gray-300 hover:bg-gray-900 hover:text-gray-200 hover:shadow-lg"),onClick:function(){return e.onToPage(t)}},t)})),s.a.createElement("button",{className:"transition duration-150 ease-in-out mr-4 px-2 py-1 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg",onClick:this.onNextPage},s.a.createElement("span",{className:"mr-1"},"Next"),s.a.createElement(w.a,{icon:"arrow-right",className:"text-xs"})),s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 py-1 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg",onClick:this.onLastPage},s.a.createElement("span",{className:"mr-1"},"Last"),s.a.createElement(w.a,{icon:"angle-double-right",className:"text-xs"})))))}}]),a}(s.a.Component),W=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={user:void 0,isLoading:!1},n.onLoadingStart=n.onLoadingStart.bind(Object(x.a)(n)),n.onLoadingStop=n.onLoadingStop.bind(Object(x.a)(n)),n}return Object(g.a)(a,[{key:"onLoadingStart",value:function(){this.setState({isLoading:!0})}},{key:"onLoadingStop",value:function(){this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.isLoading;return s.a.createElement("div",{className:"main w-full px-4 py-4 bg-gray-800 text-gray-200"},s.a.createElement(y.AuthenticationContext.Consumer,null,(function(t){return null==t.oidcUser||e.state.user||e.setState({user:t.oidcUser}),a?s.a.createElement(U,{name:"Results",onLoadingStart:e.onLoadingStart,onLoadingStop:e.onLoadingStop},(function(e){return s.a.createElement(s.a.Fragment,null,e.length>0&&s.a.createElement(b.a,{noScrollX:!0,style:{height:"calc(100vh - 14rem)"}},e.map((function(e,t){return s.a.createElement("div",{key:t,className:"mb-2"},s.a.createElement(V,{item:e,accessToken:a.access_token}))})))||e.length<=0&&!n&&s.a.createElement("div",{className:""},"No items found.")||e.length<=0&&n&&s.a.createElement("div",{className:"flex flex-row items-center justify-center"},s.a.createElement(w.a,{icon:"spinner",className:"animate-spin mr-4 text-indigo-400"}),s.a.createElement("span",{className:""},"Loading items...")))})):s.a.createElement("div",{className:""},"Not logged in.")})))}}]),a}(s.a.Component),Y=a(36),z=a(13),X={client_id:"gw2_calculator_app",response_type:"id_token token",scope:"openid email roles profile gw2calculator",automaticSilentRenew:!0,loadUserInfo:!0,authority:G.urls.authority,redirect_uri:"".concat(G.urls.host,"/authentication/callback"),post_logout_redirect_uri:"".concat(G.urls.host,"/"),silent_redirect_uri:"".concat(G.urls.host,"/authentication/silent_callback")},J=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement("header",{className:"",style:{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.2)",zIndex:100}},s.a.createElement(y.AuthenticationContext.Consumer,null,(function(e){return s.a.createElement("div",{className:"flex justify-between items-center px-4 bg-indigo-700 text-indigo-200"},s.a.createElement("div",{className:"flex flex-row items-center"},s.a.createElement(Y.b,{className:"transition duration-150 ease-in-out mr-6 text-lg font-bold hover:text-indigo-100",to:"/"},"GW2 Calculator"),s.a.createElement(Y.b,{className:"transition duration-150 ease-in-out mr-3 py-5 px-2 hover:bg-indigo-600 hover:text-indigo-100",to:"/"},"Dashboard"),s.a.createElement(Y.b,{className:"transition duration-150 ease-in-out mr-3 py-5 px-2 hover:bg-indigo-600 hover:text-indigo-100",to:"/search"},"Search")),e.oidcUser&&s.a.createElement("div",{className:""},s.a.createElement("span",{className:"mr-4"},"Hello, ",e.oidcUser.profile.name,"!"),s.a.createElement("button",{className:"transition duration-150 ease-in-out px-4 py-1 bg-indigo-800 hover:shadow-lg hover:bg-indigo-900 hover:text-indigo-100",onClick:function(){return e.logout()}},"Logout"))||!e.oidcUser&&s.a.createElement("div",{className:""},s.a.createElement("button",{className:"transition duration-150 ease-in-out px-4 py-1 bg-indigo-800 hover:shadow-lg hover:bg-indigo-900 hover:text-indigo-100",onClick:function(){return e.login()}},"Login")))})))}}]),a}(s.a.Component),K=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={isAdding:!1,name:""},n.onAddItemListStart=n.onAddItemListStart.bind(Object(x.a)(n)),n.onAddItemListStop=n.onAddItemListStop.bind(Object(x.a)(n)),n.onAddItemList=n.onAddItemList.bind(Object(x.a)(n)),n}return Object(g.a)(a,[{key:"onAddItemListStart",value:function(e){e.stopPropagation(),this.setState({isAdding:!0})}},{key:"onAddItemListStop",value:function(e){e.stopPropagation(),this.setState({isAdding:!1})}},{key:"onAddItemList",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),a=this.props.onAddItemList,n=this.state.name){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,a(n);case 7:this.setState({isAdding:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.isAdding,n=t.name;return s.a.createElement("div",{className:"transition duration-150 ease-in-out flex flex-row items-center justify-between mx-2 border-2 border-dashed rounded-lg border-indigo-700 bg-opacity-0 bg-indigo-700 text-indigo-300 hover:bg-opacity-100 hover:text-indigo-200 cursor-pointer",tabIndex:0,onClick:this.onAddItemListStart},!a&&s.a.createElement("div",{className:"px-4 py-3"},s.a.createElement("div",{className:"pointer-events-none select-none"},s.a.createElement(w.a,{icon:"plus",className:"mr-3"}),"Add New List..."))||a&&s.a.createElement("div",{className:"px-2 py-3 flex flex-row"},s.a.createElement("input",{type:"text",className:"px-2 mr-1 w-2/3 rounded bg-indigo-400 text-indigo-900",value:n,onClick:function(e){return e.stopPropagation()},onChange:function(t){return e.setState({name:t.target.value})}}),s.a.createElement("div",{className:"flex flex-row"},s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 mr-1 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",style:{paddingTop:"0.35rem",paddingBottom:"0.35rem"},onClick:this.onAddItemList},s.a.createElement(w.a,{className:"text-xs",icon:"check"})),s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",onClick:this.onAddItemListStop},s.a.createElement(w.a,{className:"text-xs",icon:"times"})))))}}]),a}(s.a.Component),$=a(147);function Z(e){var t=Object(z.g)().push,a=e.to,n=e.children,r=Object($.a)(e,["to","children"]);return s.a.createElement("div",Object.assign({onClick:function(){return t(a)}},r),n)}var ee=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={isMouseHover:!1,isDragHover:!1,isEditing:!1,newName:e.itemList.name},n.onMouseEnter=n.onMouseEnter.bind(Object(x.a)(n)),n.onMouseLeave=n.onMouseLeave.bind(Object(x.a)(n)),n.onDragEnter=n.onDragEnter.bind(Object(x.a)(n)),n.onDragOver=n.onDragOver.bind(Object(x.a)(n)),n.onDragLeave=n.onDragLeave.bind(Object(x.a)(n)),n.onDrop=n.onDrop.bind(Object(x.a)(n)),n.onEditNameStart=n.onEditNameStart.bind(Object(x.a)(n)),n.onEditNameStop=n.onEditNameStop.bind(Object(x.a)(n)),n.onEditName=n.onEditName.bind(Object(x.a)(n)),n.onDeleteList=n.onDeleteList.bind(Object(x.a)(n)),n}return Object(g.a)(a,[{key:"onMouseEnter",value:function(){this.setState({isMouseHover:!0})}},{key:"onMouseLeave",value:function(){this.setState({isMouseHover:!1})}},{key:"onDragEnter",value:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.setState({isDragHover:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragLeave",value:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.setState({isDragHover:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDrop",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props,n=a.itemList,r=a.onDrop,s=parseInt(t.dataTransfer.getData("text")),e.next=5,r(n.id,s);case 5:this.setState({isDragHover:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEditNameStart",value:function(e){e.stopPropagation(),this.setState({isEditing:!0,newName:this.props.itemList.name})}},{key:"onEditNameStop",value:function(e){e.stopPropagation(),this.setState({isEditing:!1})}},{key:"onEditName",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),a=this.props,n=a.itemList,r=a.onEditName,s=this.state.newName){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,r(n.id,s);case 7:this.setState({isEditing:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDeleteList",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),a=this.props,n=a.itemList,r=a.onDeleteList,e.next=4,r(n.id);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.itemList,a=this.state,n=a.isMouseHover,r=a.isDragHover,i=a.isEditing,o=a.newName;return s.a.createElement(Z,{className:"transition duration-150 ease-in-out flex flex-row items-center justify-between px-4 py-3 bg-opacity-25 ".concat(r?"bg-green-700 text-green-300":"bg-indigo-700 text-indigo-300"," hover:bg-opacity-100 hover:text-indigo-200 cursor-pointer"),to:"/list/".concat(t.id),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},!i&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"truncate pointer-events-none select-none"},t.name),s.a.createElement("div",{className:"".concat(n?"":"hidden"," flex flex-row")},s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 mr-1 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",style:{paddingTop:"0.35rem",paddingBottom:"0.35rem"},onClick:this.onEditNameStart},s.a.createElement(w.a,{className:"text-xs",icon:"pencil-alt"})),s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",onClick:this.onDeleteList},s.a.createElement(w.a,{className:"text-xs",icon:"trash-alt"}))))||i&&s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{type:"text",className:"px-2 w-2/3 rounded bg-indigo-400 text-indigo-900",value:o,onClick:function(e){return e.stopPropagation()},onChange:function(t){return e.setState({newName:t.target.value})}}),s.a.createElement("div",{className:"".concat(n?"":"hidden"," flex flex-row")},s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 mr-1 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",style:{paddingTop:"0.35rem",paddingBottom:"0.35rem"},onClick:this.onEditName},s.a.createElement(w.a,{className:"text-xs",icon:"check"})),s.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",onClick:this.onEditNameStop},s.a.createElement(w.a,{className:"text-xs",icon:"times"})))))}}]),a}(s.a.Component),te=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={user:void 0,itemLists:[]},n.refreshItemLists=n.refreshItemLists.bind(Object(x.a)(n)),n.onAddItem=n.onAddItem.bind(Object(x.a)(n)),n.onEditName=n.onEditName.bind(Object(x.a)(n)),n.onAddList=n.onAddList.bind(Object(x.a)(n)),n.onDeleteList=n.onDeleteList.bind(Object(x.a)(n)),n}return Object(g.a)(a,[{key:"refreshItemLists",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.user){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Q.GetItemLists(t.access_token);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return");case 8:this.setState({itemLists:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onAddItem",value:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.user){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Q.AddListItem(n.access_token,t,a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onEditName",value:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.user,s=n.itemLists,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Q.UpdateListName(r.access_token,t,a);case 5:e.sent&&(i=s.findIndex((function(e){return e.id===t})),s[i].name=a,this.setState({itemLists:s}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onAddList",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.user,r=a.itemLists,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Q.CreateList(n.access_token,t);case 5:(s=e.sent)&&(i={id:s,name:t},r.push(i),this.setState({itemLists:r}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDeleteList",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.user,r=a.itemLists,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Q.DeleteList(n.access_token,t);case 5:e.sent&&(s=r.findIndex((function(e){return e.id===t})),r.splice(s,1),this.setState({itemLists:r}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.itemLists,n=t.user;return s.a.createElement("div",{className:"sidebar hidden py-4 xl:flex xl:w-1/4 bg-gray-900",style:{width:"16rem"}},s.a.createElement(y.AuthenticationContext.Consumer,null,(function(t){return null==t.oidcUser||e.state.user||e.setState({user:t.oidcUser},(function(){e.refreshItemLists()})),n?s.a.createElement(b.a,{noScrollX:!0},a.map((function(t,a){return s.a.createElement("div",{key:a,className:"mb-2"},s.a.createElement(ee,{itemList:t,onDrop:e.onAddItem,onEditName:e.onEditName,onDeleteList:e.onDeleteList}))})),s.a.createElement("div",{className:"w-full flex flex-col"},s.a.createElement(K,{onAddItemList:e.onAddList}))):s.a.createElement(s.a.Fragment,null,s.a.createElement(b.a,{noScrollX:!0},s.a.createElement("div",{className:"w-full flex flex-col"},s.a.createElement(K,{onAddItemList:e.onAddList}))))})))}}]),a}(s.a.Component),ae=a(44),ne=a(146),re=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"w-full h-full flex items-center justify-center bg-gray-800 text-gray-200"},s.a.createElement("div",{className:"flex flex-col"},s.a.createElement("span",{className:"text-6xl"},"404"),s.a.createElement("span",{className:"text-2xl"},"Page Not Found.")))}}]),a}(s.a.Component);function se(){var e=Object(z.h)().id;return s.a.createElement(_,{listId:e})}ae.b.add(ne.a);var ie=function(){return s.a.createElement("div",{className:"flex flex-col"},s.a.createElement(Y.a,null,s.a.createElement(y.AuthenticationProvider,{configuration:X,callbackComponentOverride:function(){return s.a.createElement("div",{className:"flex justify-center items-center w-screen h-screen bg-gray-700 text-gray-100"},s.a.createElement("div",{className:"flex flex-row items-center"},s.a.createElement("img",{src:c.a,alt:"logo",className:"App-logo w-12"}),s.a.createElement("span",{className:""},"Logging in...")))},authenticating:function(){return s.a.createElement("div",{className:"flex justify-center items-center w-screen h-screen bg-gray-700 text-gray-100"},s.a.createElement("div",{className:"flex flex-row items-center"},s.a.createElement("img",{src:c.a,alt:"logo",className:"App-logo w-12"}),s.a.createElement("span",{className:""},"Logging out...")))}},s.a.createElement(J,null),s.a.createElement(z.a,{path:"/authentication/callback",to:"/"}),s.a.createElement("div",{className:"flex flex-row",style:{height:"calc(100vh - 4rem)"}},s.a.createElement(z.d,null,s.a.createElement(z.b,{exact:!0,path:"/",component:q}),s.a.createElement(z.b,{path:"/search",component:W}),s.a.createElement(z.b,{exact:!0,path:"/list/:id",component:se}),s.a.createElement(z.b,{component:re})),s.a.createElement(te,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"}},[[148,1,2]]]);
//# sourceMappingURL=main.186a7500.chunk.js.map