{"version":3,"sources":["logo.svg","components/Price.tsx","utils/ItemField.ts","utils/ItemRarity.ts","utils/ItemType.ts","components/ItemComparisonSlot.tsx","dataContracts/ItemQuery.ts","utils/HistoryTimespan.ts","components/RarityMultiSelect.tsx","components/TypeMultiSelect.tsx","components/ListSortingBar.tsx","dataContracts/HistoryItemQuery.ts","dataContracts/HistoryItem.ts","dataContracts/PricedItem.ts","environment.ts","services/ApiService.ts","services/LocalDB.ts","pages/MyList.tsx","pages/Dashboard.tsx","components/ItemSummarySlot.tsx","components/SortingBar.tsx","pages/GeneralSearch.tsx","open-id-config.ts","components/Header.tsx","components/AddItemListSlot.tsx","components/CustomLink.tsx","components/ItemListSlot.tsx","components/Sidebar.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","Price","props","state","this","price","priceColor","isNegative","absPrice","Math","abs","gold","floor","silver","copper","className","id","icon","style","fontSize","src","alt","React","Component","defaultProps","ItemField","ItemFieldSort","ItemRarity","ItemType","ItemComparisonSlot","amount","item","deleteItem","revenue","round","SellPrice","expenditure","BuyPrice","totalFees","netProfit","Icon","Name","htmlFor","type","defaultValue","onChange","event","value","parseInt","target","console","log","isNaN","setState","Appeal","toFixed","Margin","Sold","Bought","onClick","Id","HistoryTimespan","ItemQuery","options","name","rarity","minLevel","maxLevel","minBuyPrice","maxBuyPrice","minSellPrice","maxSellPrice","sortBy","sortDirection","All","Descending","valueOf","toString","RarityMultiSelect","isOpen","toggleOpen","bind","toggleRarity","checkRarity","otherRarity","newRarity","None","selectedText","isPowerOf2","tabIndex","width","top","zIndex","Object","keys","filter","map","index","itemRarity","key","TypeMultiSelect","toggleType","checkType","otherType","newType","itemType","ListSortingBar","query","filteredItems","items","isFilterOpen","resetQueryValues","toggleFilter","onFilterOpen","onFilterClose","onFilter","onSearch","sortCompare","onNameChange","onTypeChange","onRarityChange","onMinLevelChange","onMaxLevelChange","onMinBuyPriceChange","onMaxBuyPriceChange","onMinSellPriceChange","onMaxSellPriceChange","onSort","onSortDirection","toLowerCase","includes","Type","Rarity","Level","sort","preventDefault","a","b","isSortAscending","Ascending","localeCompare","Buys","Sells","prevState","callback","onReload","children","onSubmit","padding","height","right","HistoryItemQuery","newest","HistoryItemPrices","history","History","HistoryItemFactory","ChatLink","chatLink","Description","description","level","e","arr","forEach","itemResult","ToHistoryItem","push","PricedItemFactory","buyPrice","sellPrice","parseFloat","appeal","margin","sold","bought","ToPricedItem","environment","urls","authority","host","gw2calculator","accessToken","pageNumber","url","URLSearchParams","toObject","ApiService","Get","response","json","result","ok","ToPricedItems","queries","Post","ToHistoryItems","itemLists","itemList","itemIds","idNum","listId","itemId","fetch","method","mode","cache","headers","body","JSON","stringify","undefined","historyItemPrices","version","stores","open","catch","error","table","mapToClass","timespan","get","OneWeek","now","Date","OneHour","SixHours","TwelveHours","OneDay","ThreeDays","timeFromNow","setDate","getTime","getDate","time","getHistoryItemPrices","newHistory","newItem","add","unshift","update","currentPrices","weekFromNow","Dexie","MyList","user","isLoading","updateId","setTimespan","getItems","GetItemList","access_token","ids","historyItemQueries","i","length","LocalDB","getNewestTime","GetHistoryItems","historyItems","pricedItems","deleteOldPrices","setHistoryItemPrices","prices","pricedItem","newestPrice","sumSold","sumBought","avgSold","avgBought","DeleteListItem","tempItems","itemIndex","findIndex","splice","Consumer","oidcUser","sortedItems","noScrollX","logo","Dashboard","ItemSummarySlot","dragTarget","createRef","isDragging","isAdding","onDragStart","onDragEnd","onAdd","stopPropagation","dataTransfer","setData","requestAnimationFrame","current","classList","remove","draggable","ref","left","SortingBar","pendingQuery","currentQuery","currentPage","totalPages","onToPage","onFirstPage","onLastPage","onNextPage","onPrevPage","onLoadingStart","onLoadingStop","GetItemPageCount","GetItems","nameOnlyQuery","pageNums","disabled","GeneralSearch","Weapon","Exotic","configuration","client_id","response_type","scope","automaticSilentRenew","loadUserInfo","redirect_uri","post_logout_redirect_uri","silent_redirect_uri","Header","boxShadow","to","profile","logout","login","AddItemListSlot","onAddItemListStart","onAddItemListStop","onAddItemList","paddingTop","paddingBottom","CustomLink","useHistory","rest","ItemListSlot","isMouseHover","isDragHover","isEditing","newName","onMouseEnter","onMouseLeave","onDragEnter","onDragOver","onDragLeave","onDrop","onEditNameStart","onEditNameStop","onEditName","onDeleteList","getData","Sidebar","refreshItemLists","onAddItem","onAddList","GetItemLists","AddListItem","UpdateListName","list","CreateList","DeleteList","MyListComponent","useParams","library","fas","App","callbackComponentOverride","authenticating","path","exact","component","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","message"],"mappings":"0GAAAA,EAAOC,QAAU,IAA0B,kC,+SCYtBC,E,kDAOjB,WAAYC,GAAoB,IAAD,8BAC3B,cAAMA,IAEDC,MAAQ,GAHc,E,qDAQrB,IAAD,EACyBC,KAAKF,MAA3BG,EADH,EACGA,MAAOC,EADV,EACUA,WACTC,EAAaF,EAAQ,EACrBG,EAAWC,KAAKC,IAAIL,GAEpBM,EAAOF,KAAKG,MAAMJ,EAAW,KAC7BK,EAASJ,KAAKG,MAAMJ,EAAW,IAAQ,KACvCM,EAASL,KAAKG,MAAMJ,EAAW,IAAQ,KAE7C,OACI,yBAAKO,UAAU,iBACX,yBAAKC,GAAG,OAAOD,UAAU,mCACrB,kBAAC,IAAD,CAAiBE,KAAK,QAAQF,UAAS,UAAKR,EAAa,GAAK,SAAvB,YAAmCD,EAAnC,SAAsDY,MAAO,CAACC,SAAU,YAC/G,yBAAKC,IAAI,wDAAwDC,IAAI,YAAYN,UAAU,iBAC3F,0BAAMA,UAAS,kBAAaT,IAAeK,IAE/C,yBAAKK,GAAG,SAASD,UAAU,mCACvB,yBAAKK,IAAI,0DAA0DC,IAAI,cAAcN,UAAU,iBAC/F,0BAAMA,UAAS,kBAAaT,IAAeO,IAE/C,yBAAKG,GAAG,SAASD,UAAU,mCACvB,yBAAKK,IAAI,0DAA0DC,IAAI,cAAcN,UAAU,iBAC/F,0BAAMA,UAAS,kBAAaT,IAAeQ,S,GArC5BQ,IAAMC,WAApBtB,EAEVuB,aAA2B,CAC9BnB,MAAO,EACPC,WAAY,iB,IChBRmB,EAUAC,ECVAC,ECAAC,ECeSC,E,kDACjB,WAAY3B,GAAiC,IAAD,8BACxC,cAAMA,IAEDC,MAAQ,CACT2B,OAAQ,GAJ4B,E,qDAwBlC,IAAD,SACwB1B,KAAKF,MAA1B6B,EADH,EACGA,KAAMC,EADT,EACSA,WACNF,EAAW1B,KAAKD,MAAhB2B,OAEFG,EAAUxB,KAAKyB,MAAMH,EAAKI,UAAYL,GACtCM,EAAc3B,KAAKyB,MAAMH,EAAKM,SAAWP,GAEzCQ,EADM7B,KAAKyB,MAAuB,IAAjBH,EAAKI,WACJL,EAClBS,EAAYN,EAAUG,EAAcE,EAI1C,OACI,yBAAKvB,UAAU,uCACX,yBAAKA,UAAU,yCACX,yBAAKK,IAAKW,EAAKS,KAAMnB,IAAKU,EAAKU,KAAM1B,UAAU,mBAC/C,0BAAMA,UAAU,wBAAwBgB,EAAKU,OAEjD,yBAAK1B,UAAU,iDACX,yBAAKA,UAAU,yBACX,yBAAKA,UAAU,mCACX,2BAAO2B,QAAQ,GAAG3B,UAAU,8BAA5B,UACA,2BAAO4B,KAAK,SAAS5B,UAAU,8CAC3B6B,aAAc,EACdC,SAAU,SAAAC,GACN,IAAMC,EAAgBC,SAASF,EAAMG,OAAOF,OAC5CG,QAAQC,IAAIJ,GACC,MAATA,GAAkBK,MAAML,IACxB,EAAKM,SAAS,CAACvB,OAAQiB,QAGvC,yBAAKhC,UAAU,8BACX,2BAAO2B,QAAQ,GAAG3B,UAAU,wCAA5B,cACA,kBAAC,EAAD,CAAOV,MAAOkC,EAAWjC,WAAU,UAAMiC,EAAY,EAAI,eAAiB,sBAGlF,yBAAKxB,UAAU,iBACX,yBAAKA,UAAU,mCACX,2BAAO2B,QAAQ,GAAG3B,UAAU,8BAA5B,QACA,kBAAC,EAAD,CAAOV,MAAO+B,KAElB,yBAAKrB,UAAU,mCACX,2BAAO2B,QAAQ,GAAG3B,UAAU,8BAA5B,SACA,kBAAC,EAAD,CAAOV,MAAO4B,KAElB,yBAAKlB,UAAU,8BACX,2BAAO2B,QAAQ,GAAG3B,UAAU,8BAA5B,QACA,kBAAC,EAAD,CAAOV,MAAOiC,OAI1B,yBAAKvB,UAAU,SACX,yBAAKA,UAAU,0DACX,yBAAKA,UAAU,kDACX,2BAAO2B,QAAQ,GAAG3B,UAAU,wDAA5B,UACA,0BAAMA,UAAU,iBAAiBgB,EAAKuB,OAAOC,QAAQ,KAEzD,yBAAKxC,UAAU,kDACX,2BAAO2B,QAAQ,GAAG3B,UAAU,8CAA5B,UACA,0BAAMA,UAAWgB,EAAKyB,OAAS,GAAK,eAAiB,kBAAmBzB,EAAKyB,OAAOD,QAAQ,GAA5F,MAEJ,yBAAKxC,UAAU,kDACX,2BAAO2B,QAAQ,GAAG3B,UAAU,8CAA5B,QACA,0BAAMA,UAAU,iBAAiBgB,EAAK0B,KAAKF,QAAQ,KAEvD,yBAAKxC,UAAU,kDACX,2BAAO2B,QAAQ,GAAG3B,UAAU,8CAA5B,UACA,0BAAMA,UAAU,iBAAiBgB,EAAK2B,OAAOH,QAAQ,OAIjE,yBAAKxC,UAAU,oDACX,4BAAQA,UAAU,8HACd4C,QAAS,kBAAM3B,EAAWD,EAAK6B,MAC/B,kBAAC,IAAD,CAAiB3C,KAAK,qB,GAnGEK,IAAMC,Y,SHf1CE,O,eAAAA,I,eAAAA,I,iBAAAA,I,mBAAAA,I,mBAAAA,I,eAAAA,I,oBAAAA,M,cAUAC,O,yBAAAA,I,4BAAAA,M,cCVAC,O,eAAAA,I,eAAAA,I,iBAAAA,I,eAAAA,I,2BAAAA,I,gBAAAA,I,oBAAAA,I,wBAAAA,I,2BAAAA,I,gBAAAA,M,cCAAC,O,eAAAA,I,iBAAAA,I,eAAAA,I,aAAAA,I,2BAAAA,I,0BAAAA,I,wCAAAA,I,0BAAAA,I,mBAAAA,I,eAAAA,I,uBAAAA,I,kBAAAA,I,oBAAAA,I,wBAAAA,I,sBAAAA,I,2CAAAA,I,uBAAAA,I,kBAAAA,M,KEIL,ICJKiC,EDICC,EAAb,WAaI,WAAYC,GAA6B,IAAD,+CAZjCC,UAYiC,OAXjCrB,UAWiC,OAVjCsB,YAUiC,OATjCC,cASiC,OARjCC,cAQiC,OAPjCC,iBAOiC,OANjCC,iBAMiC,OALjCC,kBAKiC,OAJjCC,kBAIiC,OAHjCC,YAGiC,OAFjCC,mBAEiC,EACpCrE,KAAK4D,KAAL,iBAAYD,QAAZ,IAAYA,OAAZ,EAAYA,EAASC,YAArB,QAA6B,GAC7B5D,KAAKuC,KAAL,iBAAYoB,QAAZ,IAAYA,OAAZ,EAAYA,EAASpB,YAArB,QAA6Bf,EAAS8C,IACtCtE,KAAK6D,OAAL,iBAAcF,QAAd,IAAcA,OAAd,EAAcA,EAASE,cAAvB,QAAiCtC,EAAW+C,IAC5CtE,KAAK8D,SAAL,iBAAgBH,QAAhB,IAAgBA,OAAhB,EAAgBA,EAASG,gBAAzB,QAAqC,EACrC9D,KAAK+D,SAAL,iBAAgBJ,QAAhB,IAAgBA,OAAhB,EAAgBA,EAASI,gBAAzB,QAAqC,GACrC/D,KAAKgE,YAAL,iBAAmBL,QAAnB,IAAmBA,OAAnB,EAAmBA,EAASK,mBAA5B,QAA2C,EAC3ChE,KAAKiE,YAAL,iBAAmBN,QAAnB,IAAmBA,OAAnB,EAAmBA,EAASM,mBAA5B,QAA2C,IAC3CjE,KAAKkE,aAAL,iBAAoBP,QAApB,IAAoBA,OAApB,EAAoBA,EAASO,oBAA7B,QAA6C,EAC7ClE,KAAKmE,aAAL,iBAAoBR,QAApB,IAAoBA,OAApB,EAAoBA,EAASQ,oBAA7B,QAA6C,IAC7CnE,KAAKoE,OAAL,iBAAcT,QAAd,IAAcA,OAAd,EAAcA,EAASS,cAAvB,QAAiC/C,EAAU6B,OAC3ClD,KAAKqE,cAAL,iBAAqBV,QAArB,IAAqBA,OAArB,EAAqBA,EAASU,qBAA9B,QAA+C/C,EAAciD,WAxBrE,uDA4BQ,MAAO,CACHX,KAAM5D,KAAK4D,KACXrB,KAAMvC,KAAKuC,KAAKiC,UAAUC,WAC1BZ,OAAQ7D,KAAK6D,OAAOW,UAAUC,WAC9BX,SAAU9D,KAAK8D,SAASW,WACxBV,SAAU/D,KAAK+D,SAASU,WACxBT,YAAahE,KAAKgE,YAAYS,WAC9BR,YAAajE,KAAKiE,YAAYQ,WAC9BP,aAAclE,KAAKkE,aAAaO,WAChCN,aAAcnE,KAAKmE,aAAaM,WAChCL,OAAQpE,KAAKoE,OAAOI,UAAUC,WAC9BJ,cAAerE,KAAKqE,cAAcG,UAAUC,gBAvCxD,KESqBC,E,kDACjB,WAAY5E,GAAgC,IAAD,8BACvC,cAAMA,IAEDC,MAAQ,CACT4E,QAAQ,GAGZ,EAAKC,WAAa,EAAKA,WAAWC,KAAhB,gBAClB,EAAKC,aAAe,EAAKA,aAAaD,KAAlB,gBACpB,EAAKE,YAAc,EAAKA,YAAYF,KAAjB,gBAToB,E,yDAkBpB7E,KAAKD,MAAhB4E,OAEJ3E,KAAKiD,SAAS,CAAC0B,QAAQ,IAEvB3E,KAAKiD,SAAS,CAAC0B,QAAQ,M,mCAGVK,GAA0B,IAEvCC,EAFsC,SACbjF,KAAKF,MAA1B+D,EADkC,EAClCA,OAAQpB,EAD0B,EAC1BA,SAEhB,OAAQuC,GACR,KAAKzD,EAAW2D,KAChB,KAAK3D,EAAW+C,IACZW,EAAYD,EACZ,MACJ,QACIC,EAAYpB,EAASmB,EAIzBvC,EAASwC,GAAW,kBAAM,EAAKhC,SAAS,CAAC0B,QAAQ,S,kCAGjCK,GAAmC,IAC3CnB,EAAW7D,KAAKF,MAAhB+D,OACR,OAAIA,IAAWtC,EAAW+C,KAAOU,IAAgBzD,EAAW+C,MAE1B,KAA1BT,EAASmB,K,+BAGX,IAGFG,EAHC,OACGtB,EAAW7D,KAAKF,MAAhB+D,OACAc,EAAW3E,KAAKD,MAAhB4E,OAYR,OARIQ,EADAtB,IAAWtC,EAAW2D,KACP3D,EAAWA,EAAW2D,MAChCrB,IAAWtC,EAAW+C,IACZ/C,EAAWA,EAAW+C,KAChCI,EAAkBU,WAAWvB,GACnBtC,EAAWsC,GAEX,QAGf,yBAAKlD,UAAU,WAAW0E,SAAU,EAAG9B,QAASvD,KAAK4E,YACjD,yBAAKjE,UAAU,+MAA+MG,MAAO,CAACwE,MAAO,WACzO,8BAAOH,GACLR,GACE,kBAAC,IAAD,CAAiBhE,UAAU,UAAUE,KAAK,iBAE5C8D,GACE,kBAAC,IAAD,CAAiBhE,UAAU,UAAUE,KAAK,kBAGhD8D,GACE,yBAAKhE,UAAU,6CAA6CG,MAAO,CAACyE,IAAK,OAAQC,OAAQ,MACpFC,OAAOC,KAAKnE,GAAYoE,QAAO,SAAAhE,GAAI,OAAIqB,MAAMJ,SAASjB,OAAQiE,KAAI,SAACjD,EAAOkD,GACvE,IAAMC,EAAyBvE,EAAWoB,GAE1C,OACI,yBAAKoD,IAAKF,EAAOlF,UAAU,wHACvB0E,SAAU,EACV9B,QAAS,kBAAM,EAAKuB,aAAagB,KAC/B,EAAKf,YAAYe,IACf,kBAAC,IAAD,CAAiBnF,UAAU,OAAOE,KAAK,YAEzC,EAAKkE,YAAYe,IACf,yBAAKnF,UAAU,GAAGG,MAAO,CAACwE,MAAO,aAEpC/D,EAAWuE,Y,kCA5ElBjC,GAEtB,OAAsB,IADJA,GAC6C,KAD7CA,IACqC,O,GAfhB3C,IAAMC,WCAhC6E,E,kDACjB,WAAYlG,GAA8B,IAAD,8BACrC,cAAMA,IAEDC,MAAQ,CACT4E,QAAQ,GAGZ,EAAKC,WAAa,EAAKA,WAAWC,KAAhB,gBAClB,EAAKoB,WAAa,EAAKA,WAAWpB,KAAhB,gBAClB,EAAKqB,UAAY,EAAKA,UAAUrB,KAAf,gBAToB,E,yDAkBlB7E,KAAKD,MAAhB4E,OAEJ3E,KAAKiD,SAAS,CAAC0B,QAAQ,IAEvB3E,KAAKiD,SAAS,CAAC0B,QAAQ,M,iCAGZwB,GAAsB,IAEjCC,EAFgC,SACTpG,KAAKF,MAAxByC,EAD4B,EAC5BA,KAAME,EADsB,EACtBA,SAEd,OAAQ0D,GACR,KAAK3E,EAAS0D,KACd,KAAK1D,EAAS8C,IACV8B,EAAUD,EACV,MACJ,QACIC,EAAU7D,EAAO4D,EAIrB1D,EAAS2D,GAAS,kBAAM,EAAKnD,SAAS,CAAC0B,QAAQ,S,gCAGjCwB,GAA+B,IACrC5D,EAASvC,KAAKF,MAAdyC,KACR,OAAIA,IAASf,EAAS8C,KAAO6B,IAAc3E,EAAS8C,MAEtB,KAAtB/B,EAAO4D,K,+BAGT,IAGFhB,EAHC,OACG5C,EAASvC,KAAKF,MAAdyC,KACAoC,EAAW3E,KAAKD,MAAhB4E,OAYR,OARIQ,EADA5C,IAASf,EAAS0D,KACH1D,EAASA,EAAS0D,MAC5B3C,IAASf,EAAS8C,IACR9C,EAASA,EAAS8C,KAC5B0B,EAAgBZ,WAAW7C,GACjBf,EAASe,GAET,QAGf,yBAAK5B,UAAU,WAAW0E,SAAU,EAAG9B,QAASvD,KAAK4E,YACjD,yBAAKjE,UAAU,+MAA+MG,MAAO,CAACwE,MAAO,aACzO,8BAAOH,GACLR,GACE,kBAAC,IAAD,CAAiBhE,UAAU,UAAUE,KAAK,iBAE5C8D,GACE,kBAAC,IAAD,CAAiBhE,UAAU,UAAUE,KAAK,kBAGhD8D,GACE,yBAAKhE,UAAU,6CAA6CG,MAAO,CAACyE,IAAK,OAAQC,OAAQ,MACpFC,OAAOC,KAAKlE,GAAUmE,QAAO,SAAAhE,GAAI,OAAIqB,MAAMJ,SAASjB,OAAQiE,KAAI,SAACjD,EAAOkD,GACrE,IAAMQ,EAAqB7E,EAASmB,GAEpC,OACI,yBAAKoD,IAAKF,EAAOlF,UAAU,wHACvB0E,SAAU,EACV9B,QAAS,kBAAM,EAAK0C,WAAWI,KAC7B,EAAKH,UAAUG,IACb,kBAAC,IAAD,CAAiB1F,UAAU,OAAOE,KAAK,YAEzC,EAAKqF,UAAUG,IACb,yBAAK1F,UAAU,GAAGG,MAAO,CAACwE,MAAO,aAEpC9D,EAAS6E,Y,kCA5EhB9D,GAEtB,OAAoB,IADJA,GACyC,KADzCA,IACiC,O,GAfZrB,IAAMC,WCU9BmF,E,kDACjB,WAAYxG,GAA6B,IAAD,8BACpC,cAAMA,IAEDC,MAAQ,CACTwG,MAAO,IAAI7C,EACX8C,cAAe1G,EAAM2G,MACrBC,cAAc,GAGlB,EAAKC,iBAAmB,EAAKA,iBAAiB9B,KAAtB,gBACxB,EAAK+B,aAAe,EAAKA,aAAa/B,KAAlB,gBACpB,EAAKgC,aAAe,EAAKA,aAAahC,KAAlB,gBACpB,EAAKiC,cAAgB,EAAKA,cAAcjC,KAAnB,gBACrB,EAAKkC,SAAW,EAAKA,SAASlC,KAAd,gBAChB,EAAKmC,SAAW,EAAKA,SAASnC,KAAd,gBAChB,EAAKoC,YAAc,EAAKA,YAAYpC,KAAjB,gBAEnB,EAAKqC,aAAe,EAAKA,aAAarC,KAAlB,gBACpB,EAAKsC,aAAe,EAAKA,aAAatC,KAAlB,gBACpB,EAAKuC,eAAiB,EAAKA,eAAevC,KAApB,gBACtB,EAAKwC,iBAAmB,EAAKA,iBAAiBxC,KAAtB,gBACxB,EAAKyC,iBAAmB,EAAKA,iBAAiBzC,KAAtB,gBACxB,EAAK0C,oBAAsB,EAAKA,oBAAoB1C,KAAzB,gBAC3B,EAAK2C,oBAAsB,EAAKA,oBAAoB3C,KAAzB,gBAC3B,EAAK4C,qBAAuB,EAAKA,qBAAqB5C,KAA1B,gBAC5B,EAAK6C,qBAAuB,EAAKA,qBAAqB7C,KAA1B,gBAC5B,EAAK8C,OAAS,EAAKA,OAAO9C,KAAZ,gBACd,EAAK+C,gBAAkB,EAAKA,gBAAgB/C,KAArB,gBA3Ba,E,gEA+BpC7E,KAAK+G,a,yCAIL/G,KAAKiD,SAAS,CAACsD,MAAO,IAAI7C,M,qCAID1D,KAAKD,MAAtB2G,aAEJ1G,KAAK8G,gBAEL9G,KAAK6G,iB,qCAIT7G,KAAKiD,SAAS,CAACyD,cAAc,M,sCAI7B1G,KAAKiD,SAAS,CAACyD,cAAc,M,iCAGtB,IAECD,EAAUzG,KAAKF,MAAf2G,MACAF,EAAUvG,KAAKD,MAAfwG,MACJC,EAA8BC,EAClC3D,QAAQC,IAAI0D,GACZD,EAAgBC,EAAMd,QAAO,SAAAhE,GACzB,OAAOA,EAAKU,KAAKwF,cAAcC,SAASvB,EAAM3C,KAAKiE,gBACf,KAA5BtB,EAAMhE,KAAOZ,EAAKoG,OACc,KAAhCxB,EAAM1C,OAASlC,EAAKqG,SACrBrG,EAAKsG,OAAS1B,EAAMzC,UACpBnC,EAAKsG,OAAS1B,EAAMxC,UACpBpC,EAAKM,UAAYsE,EAAMvC,aACvBrC,EAAKM,UAAYsE,EAAMtC,aACvBtC,EAAKI,WAAawE,EAAMrC,cACxBvC,EAAKI,WAAawE,EAAMpC,gBAEnCrB,QAAQC,IAAIyD,GAEZA,EAAgBA,EAAc0B,KAAKlI,KAAKiH,aAExCjH,KAAKiD,SAAS,CAACuD,oB,+BAIV9D,GACLA,EAAMyF,iBADwC,IAEtC1B,EAAUzG,KAAKF,MAAf2G,MACAF,EAAUvG,KAAKD,MAAfwG,MACJC,EAA8BC,EAKlCD,GAJAA,EAAgBC,EAAMd,QAAO,SAAAhE,GACzB,OAAOA,EAAKU,KAAKwF,cAAcC,SAASvB,EAAM3C,KAAKiE,mBAGzBK,KAAKlI,KAAKiH,aAExCjH,KAAKiD,SAAS,CAACuD,oB,kCAGP4B,EAAeC,GAAwB,IACvC9B,EAAUvG,KAAKD,MAAfwG,MACF+B,EAA2B/B,EAAMlC,gBAAkB/C,EAAciH,UAEvE,OAAIhC,EAAMnC,SAAW/C,EAAUgB,KACvBiG,EACOF,EAAE/F,KAAKwF,cAAcW,cAAcH,EAAEhG,KAAKwF,eAE9CQ,EAAEhG,KAAKwF,cAAcW,cAAcJ,EAAE/F,KAAKwF,eAGjDtB,EAAMnC,SAAW/C,EAAU6B,OACvBoF,EACOF,EAAElF,OAASmF,EAAEnF,OAEjBmF,EAAEnF,OAASkF,EAAElF,OAGpBqD,EAAMnC,SAAW/C,EAAU+B,OACvBkF,EACOF,EAAEhF,OAASiF,EAAEjF,OAEjBiF,EAAEjF,OAASgF,EAAEhF,OAGpBmD,EAAMnC,SAAW/C,EAAUgC,KACvBiF,EACOF,EAAE/E,KAAOgF,EAAEhF,KAEfgF,EAAEhF,KAAO+E,EAAE/E,KAGlBkD,EAAMnC,SAAW/C,EAAUiC,OACvBgF,EACOF,EAAE9E,OAAS+E,EAAE/E,OAEjB+E,EAAE/E,OAAS8E,EAAE9E,OAGpBiD,EAAMnC,SAAW/C,EAAUoH,KACvBH,EACOF,EAAEnG,SAAWoG,EAAEpG,SAEnBoG,EAAEpG,SAAWmG,EAAEnG,SAGtBsE,EAAMnC,SAAW/C,EAAUqH,MACvBJ,EACOF,EAAErG,UAAYsG,EAAEtG,UAEpBsG,EAAEtG,UAAYqG,EAAErG,UAGpB,I,mCAGEW,GACT,IAAMC,EAAQD,EAAMG,OAAOF,MAC3B3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MAExB,OADAA,EAAM3C,KAAOjB,EACN,CAAC4D,c,mCAIHH,EAAmBwC,GAC5B5I,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MAExB,OADAA,EAAMhE,KAAO6D,EACN,CAACG,WACTqC,K,qCAGQ3D,EAAuB2D,GAClC5I,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MAExB,OADAA,EAAM1C,OAASoB,EACR,CAACsB,WACTqC,K,uCAGUlG,GAA6C,IAAD,EACrDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACRA,EAAQ,KACRA,EAAQ,IACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MACxB,OAAI5D,EAAQ4D,EAAMxC,WAGlBwC,EAAMzC,SAAWnB,GAFN,CAAC4D,c,uCAOH7D,GAA6C,IAAD,EACrDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACRA,EAAQ,KACRA,EAAQ,IACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MACxB,OAAI5D,EAAQ4D,EAAMzC,WAGlByC,EAAMxC,SAAWpB,GAFN,CAAC4D,c,0CAOA7D,GAA6C,IAAD,EACxDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MAExB,OADAA,EAAMvC,YAAcrB,EACb,CAAC4D,c,0CAII7D,GAA6C,IAAD,EACxDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MAExB,OADAA,EAAMtC,YAActB,EACb,CAAC4D,c,2CAIK7D,GAA6C,IAAD,EACzDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MAExB,OADAA,EAAMrC,aAAevB,EACd,CAAC4D,c,2CAIK7D,GAA6C,IAAD,EACzDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MAExB,OADAA,EAAMpC,aAAexB,EACd,CAAC4D,c,6BAIT7D,GACH,IAAMC,EAAQD,EAAMG,OAAOF,MAC3B3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MAExB,OADAA,EAAMnC,OAASxB,SAASD,GACjB,CAAC4D,WACTvG,KAAK+G,Y,wCAIR/G,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAUpC,MAExB,OADAA,EAAMlC,cAAgBkC,EAAMlC,gBAAkB/C,EAAciH,UAAYjH,EAAciD,WAAajD,EAAciH,UAC1G,CAAChC,WACTvG,KAAK+G,Y,+BAGF,IAAD,SACgC/G,KAAKF,MAAlC8D,EADH,EACGA,KAAMiF,EADT,EACSA,SAAUC,EADnB,EACmBA,SADnB,EAE0C9I,KAAKD,MAA5CwG,EAFH,EAEGA,MAAOG,EAFV,EAEUA,aAAcF,EAFxB,EAEwBA,cACvB8B,EAA2B/B,EAAMlC,gBAAkB/C,EAAciH,UACvE,OACI,oCACI,yBAAK5H,UAAU,uFACX,0BAAMA,UAAU,IAAIiD,GAEpB,yBAAKjD,UAAU,qBACX,0BAAMA,UAAU,qBACZoI,SAAU/I,KAAKgH,UACf,2BAAOzE,KAAK,OAAO5B,UAAU,2CACzBgC,MAAO4D,EAAM3C,KACbnB,SAAUzC,KAAKkH,eACnB,4BAAQvG,UAAU,wJACd,kBAAC,IAAD,CAAiBE,KAAK,SAASF,UAAU,iBACzC,0BAAMA,UAAU,WAAhB,YAGR,2BAAO2B,QAAQ,GAAG3B,UAAU,gBAA5B,WACA,4BAAQiD,KAAK,GAAGhD,GAAG,GAAGD,UAAU,uDAC5BgC,MAAO4D,EAAMnC,OACb3B,SAAUzC,KAAK2H,QACf,4BAAQhF,MAAOtB,EAAUgB,KAAM1B,UAAU,IAAIU,EAAUA,EAAUgB,OACjE,4BAAQM,MAAOtB,EAAUoH,KAAM9H,UAAU,IAAIU,EAAUA,EAAUoH,OACjE,4BAAQ9F,MAAOtB,EAAUqH,MAAO/H,UAAU,IAAIU,EAAUA,EAAUqH,QAClE,4BAAQ/F,MAAOtB,EAAU6B,OAAQvC,UAAU,IAAIU,EAAUA,EAAU6B,SACnE,4BAAQP,MAAOtB,EAAU+B,OAAQzC,UAAU,IAAIU,EAAUA,EAAU+B,SACnE,4BAAQT,MAAOtB,EAAUgC,KAAM1C,UAAU,IAAIU,EAAUA,EAAUgC,OACjE,4BAAQV,MAAOtB,EAAUiC,OAAQ3C,UAAU,IAAIU,EAAUA,EAAUiC,UAEvE,4BAAQ3C,UAAU,0IACd4C,QAASvD,KAAK4H,iBACZU,GAAmB/B,EAAMnC,SAAW/C,EAAUgB,MAC5C,kBAAC,IAAD,CAAiBxB,KAAK,sBAExByH,GAAmB/B,EAAMnC,SAAW/C,EAAUgB,MAC5C,kBAAC,IAAD,CAAiBxB,KAAK,2BAEzByH,GAAmB/B,EAAMnC,SAAW/C,EAAUgB,MAC3C,kBAAC,IAAD,CAAiBxB,KAAK,oBAExByH,GAAmB/B,EAAMnC,SAAW/C,EAAUgB,MAC5C,kBAAC,IAAD,CAAiBxB,KAAK,yBAG9B,yBAAKF,UAAU,YACX,4BAAQA,UAAU,qJAAqJG,MAAO,CAACkI,QAAS,kBACpLzF,QAASvD,KAAK4G,cACd,kBAAC,IAAD,CAAiB/F,KAAK,SAASF,UAAU,iBACzC,0BAAMA,UAAU,WAAhB,WAEF+F,GACE,yBAAK/F,UAAU,sFAAsFG,MAAO,CAACmI,OAAQ,UAAW1D,IAAK,UAAW2D,MAAO,OAAQ1D,OAAQ,MACnK,yBAAK7E,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,QACA,2BAAO4B,KAAK,OAAO5B,UAAU,kDACzBgC,MAAO4D,EAAM3C,KACbnB,SAAUzC,KAAKkH,gBAEvB,yBAAKvG,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,QACA,kBAAC,EAAD,CAAiB4B,KAAMgE,EAAMhE,KAAME,SAAUzC,KAAKmH,gBAEtD,yBAAKxG,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,UACA,kBAAC,EAAD,CAAmBkD,OAAQ0C,EAAM1C,OAAQpB,SAAUzC,KAAKoH,kBAE5D,yBAAKzG,UAAU,sBACX,0BAAMA,UAAU,gBAAhB,SACA,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO4D,EAAMzC,SACbrB,SAAUzC,KAAKqH,oBAEvB,yBAAK1G,UAAU,iBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO4D,EAAMxC,SACbtB,SAAUzC,KAAKsH,sBAI/B,yBAAK3G,UAAU,sBACX,0BAAMA,UAAU,gBAAhB,aACA,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO4D,EAAMvC,YACbvB,SAAUzC,KAAKuH,uBAEvB,yBAAK5G,UAAU,iBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO4D,EAAMtC,YACbxB,SAAUzC,KAAKwH,yBAI/B,yBAAK7G,UAAU,sBACX,0BAAMA,UAAU,gBAAhB,cACA,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO4D,EAAMrC,aACbzB,SAAUzC,KAAKyH,wBAEvB,yBAAK9G,UAAU,iBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO4D,EAAMpC,aACb1B,SAAUzC,KAAK0H,0BAK/B,yBAAK/G,UAAU,iCACX,yBAAKA,UAAU,IACX,4BAAQA,UAAU,4IACd4C,QAASvD,KAAK2G,kBADlB,UAKJ,yBAAKhG,UAAU,yBACX,4BAAQA,UAAU,6JACd4C,QAAS,WACL,EAAKwD,WACL,EAAKD,kBAHb,UAOA,4BAAQnG,UAAU,gJACd4C,QAASvD,KAAK8G,eADlB,cASpB,4BAAQnG,UAAU,gJAAgJG,MAAO,CAACkI,QAAS,iBAC/KzF,QAASsF,GACT,kBAAC,IAAD,CAAiBhI,KAAK,WAAWF,UAAU,eAI1C,MAAZmI,EAAmBA,EAAStC,GAAgB,U,GAnajBtF,IAAMC,WCvBrCgI,EAAb,WAII,WAAYvI,EAAYwI,GAAkB,yBAHlCxI,QAGiC,OAFjCwI,YAEiC,EACrCpJ,KAAKY,GAAKA,EACVZ,KAAKoJ,OAAL,OAAcA,QAAd,IAAcA,IAAU,EANhC,uDAUQ,MAAO,CACHxI,GAAIZ,KAAKY,GAAG6D,WACZ2E,OAAQpJ,KAAKoJ,OAAO3E,gBAZhC,KCIa4E,EAIT,WAAYzI,EAAY0I,GAA+B,yBAHvC9F,QAGsC,OAFtC+F,aAEsC,EAClDvJ,KAAKwD,GAAK5C,EACVZ,KAAKuJ,QAAUD,GAgBVE,EAAb,2GACyB7H,GACjB,IAcI,MAb4B,CACxB6B,GAAI7B,EAAKf,GACT6I,SAAU9H,EAAK+H,SACfrH,KAAMV,EAAKiC,KACXxB,KAAMT,EAAKd,KACX8I,YAAahI,EAAKiI,YAClB7B,KAAMnF,SAASjB,EAAKY,MACpByF,OAAQpF,SAASjB,EAAKkC,QACtBoE,MAAOtG,EAAKkI,MAEZN,QAAS5H,EAAK2H,SAIpB,MAAMQ,GAEJ,OADAhH,QAAQC,IAAI+G,GACL,QAnBnB,qCAuB0BrD,GAClB,IAAMsD,EAAqB,GAO3B,OANAtD,EAAMuD,SAAQ,SAACrI,GACX,IAAMsI,EAAaT,EAAmBU,cAAcvI,GAClC,MAAdsI,GACAF,EAAII,KAAKF,MAGVF,MA/Bf,KCLaK,EAAb,0GACwBzI,GAChB,IAmBI,MAlB2B,CACvB6B,GAAI7B,EAAKf,GACT6I,SAAU9H,EAAK+H,SACfrH,KAAMV,EAAKiC,KACXxB,KAAMT,EAAKd,KACX8I,YAAahI,EAAKiI,YAClB7B,KAAMnF,SAASjB,EAAKY,MACpByF,OAAQpF,SAASjB,EAAKkC,QACtBoE,MAAOtG,EAAKkI,MAEZ5H,SAAUN,EAAK0I,SACftI,UAAWJ,EAAK2I,UAChBpH,OAAQqH,WAAWA,WAAW5I,EAAK6I,QAAQrH,QAAQ,IACnDC,OAAQmH,WAAWA,WAAW5I,EAAK8I,QAAQtH,QAAQ,IACnDE,KAAMkH,WAAWA,WAAW5I,EAAK+I,MAAMvH,QAAQ,IAC/CG,OAAQiH,WAAWA,WAAW5I,EAAKgJ,QAAQxH,QAAQ,KAIzD,MAAM2G,GAEJ,OADAhH,QAAQC,IAAI+G,GACL,QAxBnB,oCA4ByBrD,GACjB,IAAMsD,EAAoB,GAO1B,OANAtD,EAAMuD,SAAQ,SAACrI,GACX,IAAMsI,EAAaG,EAAkBQ,aAAajJ,GAChC,MAAdsI,GACAF,EAAII,KAAKF,MAGVF,MApCf,KCbec,EARK,CAChBC,KAAM,CACFC,UAAW,gCACXC,KAAM,+BACNC,cAAe,qCC0KR,M,0IAtKWC,EAAqB3E,EAAkB4E,G,kFACnDC,EAAMP,EAAYC,KAAKG,cAAgB,qBAAuB,IAAII,gBAAgB9E,EAAM+E,YAAlF,sBAA+GH,G,SACpGI,EAAWC,IAAIJ,EAAKF,G,cAArCO,E,gBACeA,EAASC,O,UAAxBC,E,QAEFF,EAASG,G,yCACFxB,EAAkByB,cAAcF,I,cAE3C7I,QAAQC,IAAI4I,G,kBACL,M,uLAGmBT,EAAqB3E,G,kFACzC6E,EAAMP,EAAYC,KAAKG,cAAgB,+BAAiC,IAAII,gBAAgB9E,EAAM+E,Y,SACjFC,EAAWC,IAAIJ,EAAKF,G,cAArCO,E,gBACeA,EAASC,O,UAAxBC,E,QAEFF,EAASG,G,yCACFD,G,cAEX7I,QAAQC,IAAI4I,G,kBACL,G,oLAGkBT,EAAqBY,G,kFACxCV,EAAMP,EAAYC,KAAKG,cAAgB,qB,SACtBM,EAAWQ,KAAKX,EAAKF,EAAaY,G,cAAnDL,E,gBACeA,EAASC,O,UAAxBC,E,QAEFF,EAASG,G,yCACFpC,EAAmBwC,eAAeL,I,cAE7C7I,QAAQC,IAAI4I,G,kBACL,M,iLAGeT,G,sFAChBE,EAAMP,EAAYC,KAAKG,cAAgB,iB,SACtBM,EAAWC,IAAIJ,EAAKF,G,cAArCO,E,gBACeA,EAASC,O,UAAxBC,E,QAEFF,EAASG,G,wBACHnF,EAAQkF,EAAOM,UACfA,EAAwB,GAC9BxF,EAAMuD,SAAQ,SAACrI,GACX,IAAMuK,EAAqB,CACvBtL,GAAIe,EAAKf,GACTgD,KAAMjC,EAAKiC,MAGfqI,EAAU9B,KAAK+B,M,kBAGZD,G,eAGXnJ,QAAQC,IAAI4I,G,kBACL,M,8KAGcT,EAAqBtK,G,sFACpCwK,EAAMP,EAAYC,KAAKG,cAAgB,iBAAmBrK,E,SACzC2K,EAAWC,IAAIJ,EAAKF,G,cAArCO,E,gBACeA,EAASC,O,UAAxBC,E,QAEFF,EAASG,G,wBACHnF,EAAQkF,EAAOQ,QACfA,EAAoB,GAC1B1F,EAAMuD,SAAQ,SAACpJ,GACX,IAAMwL,EAAQxJ,SAAShC,GACvBuL,EAAQhC,KAAKiC,M,kBAGVD,G,eAGXrJ,QAAQC,IAAI4I,G,kBACL,M,+KAGaT,EAAqBtH,G,kFACnCwH,EAAMP,EAAYC,KAAKG,cAAgB,mB,SACtBM,EAAWQ,KAAKX,EAAKF,EAAa,CAACtH,S,cAApD6H,E,gBACeA,EAASC,O,UAAxBC,E,QAEFF,EAASG,G,yCACFD,EAAOU,Q,cAElBvJ,QAAQC,IAAI4I,G,kBACL,M,mLAGiBT,EAAqBtK,EAAYgD,G,kFACnDwH,EAAMP,EAAYC,KAAKG,cAAgB,mB,SACtBM,EAAWQ,KAAKX,EAAKF,EAAa,CAACtK,KAAIgD,S,YAAxD6H,E,QAEOG,G,0CACF,G,uBAEUH,EAASC,O,cAAxBC,E,OACN7I,QAAQC,IAAI4I,G,mBACL,G,kLAGcT,EAAqBtK,EAAY0L,G,kFAChDlB,EAAMP,EAAYC,KAAKG,cAAgB,gB,SACtBM,EAAWQ,KAAKX,EAAKF,EAAa,CAACtK,KAAI0L,W,YAAxDb,E,QAEOG,G,0CACF,G,uBAEUH,EAASC,O,cAAxBC,E,OACN7I,QAAQC,IAAI4I,G,mBACL,G,qLAGiBT,EAAqBtK,EAAY0L,G,kFACnDlB,EAAMP,EAAYC,KAAKG,cAAgB,mB,SACtBM,EAAWQ,KAAKX,EAAKF,EAAa,CAACtK,KAAI0L,W,YAAxDb,E,QAEOG,G,0CACF,G,uBAEUH,EAASC,O,cAAxBC,E,OACN7I,QAAQC,IAAI4I,G,mBACL,G,iLAGaT,EAAqBtK,G,kFACnCwK,EAAMP,EAAYC,KAAKG,cAAgB,mB,SACtBM,EAAWQ,KAAKX,EAAKF,EAAa,CAACtK,O,YAApD6K,E,QAEOG,G,0CACF,G,uBAEUH,EAASC,O,cAAxBC,E,OACN7I,QAAQC,IAAI4I,G,mBACL,G,0KAGcP,EAAaF,G,0FAC3BqB,MAAMnB,EAAK,CACdoB,OAAQ,MACRC,KAAM,OACNC,MAAO,WACPC,QAAS,CACL,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BzB,O,wKAKbE,EAAaF,EAAqB0B,G,0FACjDL,MAAMnB,EAAK,CACdoB,OAAQ,OACRC,KAAM,OACNC,MAAO,WACPC,QAAS,CACL,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BzB,IAE/B0B,KAAMA,EAAOC,KAAKC,UAAUF,QAAQG,K,gIRzKpCtJ,O,qBAAAA,I,uBAAAA,I,6BAAAA,I,mBAAAA,I,yBAAAA,I,sBAAAA,M,SSwGG,M,kDAhGX,aAAe,IAAD,8BACV,cAAM,eAHFuJ,uBAEM,EAGV,EAAKC,QAAQ,GAAGC,OAAO,CACnBF,kBAAmB,OAEvB,EAAKG,OAAOC,OAAM,SAAAC,GACdvK,QAAQuK,MAAR,0BAAiC,EAAKzJ,KAAtC,qBAAuDyJ,OAG3D,EAAKL,kBAAoB,EAAKM,MAAM,qBACpC,EAAKN,kBAAkBO,WAAWlE,GAXxB,E,0GAcazI,EAAY4M,G,6FAChBxN,KAAKgN,kBAAkBS,IAAI7M,G,UAAxCe,E,gDAEK,M,UAEP6L,IAAa/J,EAAgBiK,Q,yCACtB/L,EAAK4H,S,OAEZ9C,EAA6B,GAC3BkH,EAAM,IAAIC,K,KAERJ,E,cACH/J,EAAgBoK,Q,UAGhBpK,EAAgBqK,S,UAGhBrK,EAAgBsK,Y,UAGhBtK,EAAgBuK,O,UAGhBvK,EAAgBwK,U,2BAXjBC,EAAcP,EAAIQ,QAAQR,EAAIS,UAAa,M,oCAG3CF,EAAcP,EAAIQ,QAAQR,EAAIS,UAAa,O,oCAG3CF,EAAcP,EAAIQ,QAAQR,EAAIS,UAAa,O,oCAG3CF,EAAcP,EAAIQ,QAAQR,EAAIU,UAAY,G,oCAG1CH,EAAcP,EAAIQ,QAAQR,EAAIU,UAAY,G,oCAG1CH,EAAcP,EAAIQ,QAAQR,EAAIU,UAAY,G,oCAI9C1M,EAAK4H,QAAQS,SAAQ,SAAA/J,GACbA,EAAMqO,MAAQJ,GACdzH,EAAM0D,KAAKlK,M,kBAGZwG,G,uLAGS7F,G,uFACMZ,KAAKuO,qBAAqB3N,EAAI6C,EAAgBiK,S,UAA9DpE,E,gDAEK,G,gCAEJA,EAAQ,GAAGgF,M,2LAGK1N,EAAY4N,G,2FAChBxO,KAAKgN,kBAAkBS,IAAI7M,G,UAAxCe,E,8BAGI8M,EAAU,IAAIpF,EAAkBzI,EAAI4N,G,SACpCxO,KAAKgN,kBAAkB0B,IAAID,EAASA,EAAQjL,I,+CAQtD,EAAA7B,EAAK4H,SAAQoF,QAAb,oBAAwBH,I,UAClBxO,KAAKgN,kBAAkB4B,OAAOhO,EAAI,CAAC2I,QAAS5H,EAAK4H,U,yLAGrC3I,G,6FACCZ,KAAKgN,kBAAkBS,IAAI7M,G,UAAxCe,E,+DAIAkN,EAAqC,GACrClB,EAAY,IAAIC,KAChBkB,EAAsBnB,EAAIQ,QAAQR,EAAIU,UAAY,GACxD1M,EAAK4H,QAAQS,SAAQ,SAAA/J,GACbA,EAAMqO,MAAQQ,GACdD,EAAc1E,KAAKlK,M,UAGrBD,KAAKgN,kBAAkB4B,OAAOhO,EAAI,CAAC2I,QAASsF,I,6GA/FpCE,MCqBDC,E,kDACjB,WAAYlP,GAAqB,IAAD,8BAC5B,cAAMA,IAEDC,MAAQ,CACTa,GAAI,GACJqO,UAAMlC,EAENtG,MAAO,GACP+G,SAAU/J,EAAgBiK,QAC1BwB,WAAW,GAGf,EAAKC,SAAW,EAAKA,SAAStK,KAAd,gBAChB,EAAKuK,YAAc,EAAKA,YAAYvK,KAAjB,gBACnB,EAAKwK,SAAW,EAAKA,SAASxK,KAAd,gBAChB,EAAKjD,WAAa,EAAKA,WAAWiD,KAAhB,gBAClB,EAAKgE,SAAW,EAAKA,SAAShE,KAAd,gBAhBY,E,0LAoBtB7E,KAAKmP,W,2QAILnP,KAAKmP,W,oQAIH9C,EAAWrM,KAAKF,MAAhBuM,O,EACiBrM,KAAKD,MAAtBa,E,EAAAA,GAAI4M,E,EAAAA,SACRnB,GAAUzL,IAAOyL,GACjBrM,KAAKiD,SAAS,CAACrC,GAAIyL,EAAQ5F,MAAO,GAAIyI,WAAW,GAAjD,sBAAwD,sBAAA9G,EAAA,sEAC9C,EAAKgH,YAAY5B,GAD6B,4C,iLAK9CA,G,uFACMxN,KAAKqP,SAAS7B,G,OAA5B/G,E,OACNzG,KAAKiD,SAAS,CAACwD,QAAO+G,WAAU0B,WAAW,I,+KAGhC1B,G,wHACUxN,KAAKD,MAAlBkP,E,EAAAA,KAAMrO,E,EAAAA,GAETqO,E,yCACM,I,uBAEO1D,EAAW+D,YAAYL,EAAKM,aAAc3O,G,UAAtD4O,E,gDAEK,I,OAELC,EAAyC,GACtCC,EAAI,E,aAAGA,EAAIF,EAAIG,Q,wBACd/O,EAAK4O,EAAIE,G,UACME,EAAQC,cAAcjP,G,QAArCwI,E,OACNqG,EAAmBtF,KAAK,IAAIhB,EAAiBvI,EAAIwI,I,QAHrBsG,I,yCAMLnE,EAAWuE,gBAAgBb,EAAKM,aAAcE,G,WAAnEM,E,iDAEK,I,QAELC,EAA4B,GACzBN,EAAI,E,aAAGA,EAAIK,EAAaJ,Q,wBACvBhO,EAAOoO,EAAaL,G,UACpBE,EAAQK,gBAAgBtO,EAAK6B,I,yBAC7BoM,EAAQM,qBAAqBvO,EAAK6B,GAAI7B,EAAK4H,S,yBAE5BqG,EAAQrB,qBAAqB5M,EAAK6B,GAAIgK,G,YAArD2C,E,WACSA,EAAOR,QAAU,G,wBACtBS,EAAyB,CAC3B5M,GAAI7B,EAAK6B,GACTiG,SAAU9H,EAAK8H,SACfpH,KAAMV,EAAKU,KACXD,KAAMT,EAAKS,KACXuH,YAAahI,EAAKgI,YAClB5B,KAAMpG,EAAKoG,KACXC,OAAQrG,EAAKqG,OACbC,MAAOtG,EAAKsG,MAEZhG,SAAU,EACVF,UAAW,EACXmB,OAAQ,EACRE,OAAQ,EACRC,KAAM,EACNC,OAAQ,GAEZ0M,EAAY7F,KAAKiG,G,gCAKfC,EAAcF,EAAO,GACrB9F,EAAWgG,EAAYhG,SACvBC,EAAY+F,EAAY/F,UACxBG,GAAUH,EAAYD,GAAYC,EAAY,IAChDgG,EAAkB,EAClBC,EAAoB,EACxBJ,EAAOnG,SAAQ,SAAA/J,GACXqQ,GAAWrQ,EAAMyK,KACjB6F,GAAatQ,EAAM0K,UAGjB6F,EAAUF,EAAUH,EAAOR,OAC3Bc,EAAYF,EAAYJ,EAAOR,OAE/BnF,EAASC,EAAS,GAAKA,EAAS+F,EAAUC,EAAY,EAEtDL,EAAyB,CAC3B5M,GAAI7B,EAAK6B,GACTiG,SAAU9H,EAAK8H,SACfpH,KAAMV,EAAKU,KACXD,KAAMT,EAAKS,KACXuH,YAAahI,EAAKgI,YAClB5B,KAAMpG,EAAKoG,KACXC,OAAQrG,EAAKqG,OACbC,MAAOtG,EAAKsG,MAEZhG,SAAUoI,EACVtI,UAAWuI,EACXpH,OAAQsH,EACRpH,OAAQqH,EACRpH,KAAMmN,EACNlN,OAAQmN,GAGZT,EAAY7F,KAAKiG,G,QA/DoBV,I,iDAkElCM,G,kLAGM1D,G,wFACetM,KAAKD,MAAzBa,E,EAAAA,GAAIqO,E,EAAAA,KAAMxI,E,EAAAA,MACbwI,E,iEAGgB1D,EAAWmF,eAAezB,EAAKM,aAAc3O,EAAI0L,G,OAAhEX,E,OACAgF,E,YAAgBlK,GAClBkF,IACMiF,EAAYD,EAAUE,WAAU,SAAAlP,GAAI,OAAIA,EAAK6B,KAAO8I,KAC1DqE,EAAUG,OAAOF,EAAW,GAC5B5Q,KAAKiD,SAAS,CAACwD,MAAOkK,K,6PAK1B3Q,KAAKiD,SAAS,CAACiM,WAAW,EAAMzI,MAAO,IAAvC,sBAA4C,sBAAA2B,EAAA,sEAClC,EAAKgH,YAAY,EAAKrP,MAAMyN,UADM,4C,qIAKtC,IAAD,SACwCxN,KAAKD,MAA1CkP,EADH,EACGA,KAAMxI,EADT,EACSA,MAAiByI,GAD1B,EACgB1B,SADhB,EAC0B0B,WAE/B,OACI,yBAAKvO,UAAU,mDACX,kBAAC,wBAAsBoQ,SAAvB,MACK,SAAAjR,GAIG,OAHsB,MAAlBA,EAAMkR,UAAqB,EAAKjR,MAAMkP,MACtC,EAAKhM,SAAS,CAACgM,KAAMnP,EAAMkR,WAE3B/B,EAEI,kBAAC,EAAD,CAAgBxI,MAAOA,EAAO7C,KAAK,gBAAgBiF,SAAU,EAAKA,WAC7D,SAAAoI,GAAW,OACR,oCACMA,EAAYtB,OAAS,GACnB,kBAAC,IAAD,CAAWuB,WAAS,EAACpQ,MAAO,CAACmI,OAAQ,wBAChCgI,EAAYrL,KAAI,SAACjD,EAAOkD,GAAR,OACb,yBAAKE,IAAKF,EAAOlF,UAAU,QACvB,kBAAC,EAAD,CAAoBgB,KAAMgB,EAAOf,WAAY,EAAKA,mBAKjEqP,EAAYtB,QAAU,IAAMT,GACzB,yBAAKvO,UAAU,uBAAf,oBAIHsQ,EAAYtB,QAAU,GAAKT,GACxB,yBAAKvO,UAAU,6CACX,yBAAKK,IAAKmQ,IAAMlQ,IAAI,OAAON,UAAU,kBACrC,0BAAMA,UAAU,IAAhB,yBASrB,oCACH,kBAAC,EAAD,CAAgB8F,MAAO,GAAI7C,KAAK,QAAQiF,SAAQ,sBAAE,sBAAAT,EAAA,4FAC7C,SAAA6I,GAAW,OAAK,iD,GApMb/P,IAAMC,WCxBrBiQ,E,uKAEb,OACI,yBAAKzQ,UAAU,yC,GAHYO,IAAMC,WCcxBkQ,E,kDAGjB,WAAYvR,GAA8B,IAAD,8BACrC,cAAMA,IAHFwR,gBAEiC,EAGrC,EAAKA,WAAapQ,IAAMqQ,YAExB,EAAKxR,MAAQ,CACTyR,YAAY,EACZC,UAAU,GAGd,EAAKC,YAAc,EAAKA,YAAY7M,KAAjB,gBACnB,EAAK8M,UAAY,EAAKA,UAAU9M,KAAf,gBACjB,EAAK+M,MAAQ,EAAKA,MAAM/M,KAAX,gBAZwB,E,wDAe7BnC,GAAyC,IAAD,OAChDA,EAAMmP,kBACNnP,EAAMoP,aAAaC,QAAQ,OAAQ/R,KAAKF,MAAM6B,KAAK6B,GAAGiB,YAEtDuN,uBAAsB,WAAO,IAAD,EACxB,YAAKV,WAAWW,eAAhB,SAAyBC,UAAUxD,IAAI,WAG3C1O,KAAKiD,SAAS,CAACuO,YAAY,M,gCAGrB9O,GAAyC,IAAD,EAC9C,UAAA1C,KAAKsR,WAAWW,eAAhB,SAAyBC,UAAUC,OAAO,QAC1CnS,KAAKiD,SAAS,CAACuO,YAAY,M,8BAI3BxR,KAAKiD,UAAS,SAAA0F,GAAS,MAAK,CAAC8I,UAAW9I,EAAU8I,e,+BAG5C,IACE9P,EAAS3B,KAAKF,MAAd6B,KADH,EAE4B3B,KAAKD,MAA9ByR,EAFH,EAEGA,WAFH,EAEeC,SAEpB,OACI,yBAAK9Q,UAAU,uCACX,yBAAKA,UAAU,0CACX,yBAAKK,IAAKW,EAAKS,KAAMnB,IAAKU,EAAKU,KAAM1B,UAAU,mBAC/C,0BAAMA,UAAU,wBAAwBgB,EAAKU,OAEjD,yBAAK1B,UAAU,qCACX,2BAAO2B,QAAQ,GAAG3B,UAAU,wCAA5B,QACA,kBAAC,EAAD,CAAOV,MAAO0B,EAAKM,YAEvB,yBAAKtB,UAAU,qCACX,2BAAO2B,QAAQ,GAAG3B,UAAU,wCAA5B,SACA,kBAAC,EAAD,CAAOV,MAAO0B,EAAKI,aAEvB,yBAAKpB,UAAU,qCACX,2BAAO2B,QAAQ,GAAG3B,UAAU,wCAA5B,UACA,0BAAMA,UAAS,UAAKgB,EAAKyB,OAAS,GAAK,iBAAmB,iBAAmBzB,EAAKyB,OAAlF,MAEJ,yBAAKzC,UAAU,qCACX,2BAAO2B,QAAQ,GAAG3B,UAAU,wCAA5B,QACA,0BAAMA,UAAU,IAAIgB,EAAK0B,OAE7B,yBAAK1C,UAAU,qCACX,2BAAO2B,QAAQ,GAAG3B,UAAU,wCAA5B,UACA,0BAAMA,UAAU,IAAIgB,EAAK2B,SAE7B,yBAAK3C,UAAU,qCACX,2BAAO2B,QAAQ,GAAG3B,UAAU,wCAA5B,UACA,0BAAMA,UAAU,IAAIgB,EAAKuB,SAE7B,yBAAKvC,UAAU,oDACX,yBAAKA,UAAU,kFACXyR,WAAS,EACTV,YAAa1R,KAAK0R,YAClBC,UAAW3R,KAAK2R,WAChB,kBAAC,IAAD,CAAiB9Q,KAAK,eACtB,yBAAKwR,IAAKrS,KAAKsR,WAAY3Q,UAAS,UAAK6Q,EAAa,GAAK,SAAvB,+FAA8H1Q,MAAO,CAACyE,IAAK,WAAY+M,KAAM,aAC7L,yBAAKtR,IAAKW,EAAKS,KAAMnB,IAAKU,EAAKU,KAAM1B,UAAU,6BAC/C,0BAAMA,UAAU,qDAAqDgB,EAAKU,c,GAhFzDnB,IAAMC,WCc9BoR,E,kDACjB,WAAYzS,GAAyB,IAAD,8BAChC,cAAMA,IAEDC,MAAQ,CACTkP,UAAMlC,EACNyF,aAAc,IAAI9O,EAClB+O,aAAc,IAAI/O,EAClB8C,cAAe,GACfE,cAAc,EACdgM,YAAa,EACbC,WAAY,GAGhB,EAAKhM,iBAAmB,EAAKA,iBAAiB9B,KAAtB,gBACxB,EAAK+B,aAAe,EAAKA,aAAa/B,KAAlB,gBACpB,EAAKgC,aAAe,EAAKA,aAAahC,KAAlB,gBACpB,EAAKiC,cAAgB,EAAKA,cAAcjC,KAAnB,gBACrB,EAAKkC,SAAW,EAAKA,SAASlC,KAAd,gBAChB,EAAKmC,SAAW,EAAKA,SAASnC,KAAd,gBAChB,EAAK+N,SAAW,EAAKA,SAAS/N,KAAd,gBAChB,EAAKgO,YAAc,EAAKA,YAAYhO,KAAjB,gBACnB,EAAKiO,WAAa,EAAKA,WAAWjO,KAAhB,gBAClB,EAAKkO,WAAa,EAAKA,WAAWlO,KAAhB,gBAClB,EAAKmO,WAAa,EAAKA,WAAWnO,KAAhB,gBAElB,EAAKqC,aAAe,EAAKA,aAAarC,KAAlB,gBACpB,EAAKsC,aAAe,EAAKA,aAAatC,KAAlB,gBACpB,EAAKuC,eAAiB,EAAKA,eAAevC,KAApB,gBACtB,EAAKwC,iBAAmB,EAAKA,iBAAiBxC,KAAtB,gBACxB,EAAKyC,iBAAmB,EAAKA,iBAAiBzC,KAAtB,gBACxB,EAAK0C,oBAAsB,EAAKA,oBAAoB1C,KAAzB,gBAC3B,EAAK2C,oBAAsB,EAAKA,oBAAoB3C,KAAzB,gBAC3B,EAAK4C,qBAAuB,EAAKA,qBAAqB5C,KAA1B,gBAC5B,EAAK6C,qBAAuB,EAAKA,qBAAqB7C,KAA1B,gBAC5B,EAAK8C,OAAS,EAAKA,OAAO9C,KAAZ,gBACd,EAAK+C,gBAAkB,EAAKA,gBAAgB/C,KAArB,gBAnCS,E,+DAuChC7E,KAAKiD,SAAS,CAACuP,aAAc,IAAI9O,M,qCAIR1D,KAAKD,MAAtB2G,aAEJ1G,KAAK8G,gBAEL9G,KAAK6G,iB,qCAIT7G,KAAKiD,SAAS,CAACyD,cAAc,M,sCAI7B1G,KAAKiD,SAAS,CAACyD,cAAc,M,uKAIa1G,KAAKF,MAAvCmT,E,EAAAA,eAAgBC,E,EAAAA,c,EACOlT,KAAKD,MAA5BkP,E,EAAAA,KAAMuD,E,EAAAA,aAETvD,E,iDAGLjP,KAAKiD,SAAS,CAACuD,cAAe,IAA9B,sBAAmC,gCAAA4B,EAAA,sEACNmD,EAAW4H,iBAAiBlE,EAAKM,aAAciD,GADzC,aACzBG,EADyB,SAEb,GAFa,wDAK/BM,IAL+B,SAOX1H,EAAW6H,SAASnE,EAAKM,aAAciD,EAAc,GAP1C,sJAOgD,GAPhD,QAOzB/L,EAPyB,KAQ/B,EAAKxD,SAAS,CAACuD,cAAeC,EAAOgM,aAAcD,EAAcE,YAAa,EAAGC,WAAYA,GAAaO,GAR3E,6C,8KAYxBxQ,G,6FACXA,EAAMyF,iB,EACoCnI,KAAKF,MAAvCmT,E,EAAAA,eAAgBC,E,EAAAA,c,EACOlT,KAAKD,MAA5BkP,E,EAAAA,KAAMuD,E,EAAAA,aAETvD,E,iDAGCoE,EAAgB,IAAI3P,EAAU,CAACE,KAAM4O,EAAa5O,OACxD5D,KAAKiD,SAAS,CAACuD,cAAe,IAA9B,sBAAmC,gCAAA4B,EAAA,sEACNmD,EAAW4H,iBAAiBlE,EAAKM,aAAc8D,GADzC,aACzBV,EADyB,SAEb,GAFa,wDAK/BM,IAL+B,SAOX1H,EAAW6H,SAASnE,EAAKM,aAAc8D,EAAe,GAP3C,sJAOiD,GAPjD,QAOzB5M,EAPyB,KAQ/B,EAAKxD,SAAS,CAACuD,cAAeC,EAAOgM,aAAcY,EAAeX,YAAa,EAAGC,WAAYA,GAAaO,GAR5E,6C,+KAYxB/H,G,+FAC+BnL,KAAKF,MAAvCmT,E,EAAAA,eAAgBC,E,EAAAA,c,EACmBlT,KAAKD,MAAxCkP,E,EAAAA,KAAMwD,E,EAAAA,aAAcE,E,EAAAA,WAEvB1D,E,sDAGD9D,GAAc,GAAKA,EAAawH,G,iDAGpC3S,KAAKiD,SAAS,CAACuD,cAAe,IAA9B,sBAAmC,8BAAA4B,EAAA,6DAC/B6K,IAD+B,SAGX1H,EAAW6H,SAASnE,EAAKM,aAAckD,EAActH,GAH1C,oJAGyD,GAHzD,QAGzB1E,EAHyB,KAI/B,EAAKxD,SAAS,CAACuD,cAAeC,EAAOiM,YAAavH,GAAa+H,GAJhC,6C,qQAS7BlT,KAAK4S,SAAS,G,gQAIZD,EAAe3S,KAAKD,MAApB4S,W,SACF3S,KAAK4S,SAASD,G,mRAIsB3S,KAAKF,MAAvCmT,E,EAAAA,eAAgBC,E,EAAAA,c,EACgClT,KAAKD,MAArDkP,E,EAAAA,KAAMwD,E,EAAAA,aAAcC,E,EAAAA,YAAaC,E,EAAAA,WAEpC1D,E,sDAGDyD,GAAeC,G,iDAInB3S,KAAKiD,SAAS,CAACuD,cAAe,IAA9B,sBAAmC,8BAAA4B,EAAA,6DAC/B6K,IAD+B,SAGX1H,EAAW6H,SAASnE,EAAKM,aAAckD,EAAcC,EAAc,GAHxD,oJAG8D,GAH9D,QAGzBjM,EAHyB,KAI/B,EAAKxD,SAAS,CAACuD,cAAeC,EAAOiM,YAAaA,EAAc,GAAIQ,GAJrC,6C,iRASOlT,KAAKF,MAAvCmT,E,EAAAA,eAAgBC,E,EAAAA,c,EACoBlT,KAAKD,MAAzCkP,E,EAAAA,KAAMwD,E,EAAAA,aAAcC,E,EAAAA,YAEvBzD,E,sDAGDyD,GAAe,G,iDAGnB1S,KAAKiD,SAAS,CAACuD,cAAe,IAA9B,sBAAmC,8BAAA4B,EAAA,6DAC/B6K,IAD+B,SAGX1H,EAAW6H,SAASnE,EAAKM,aAAckD,EAAcC,EAAc,GAHxD,oJAG8D,GAH9D,QAGzBjM,EAHyB,KAI/B,EAAKxD,SAAS,CAACuD,cAAeC,EAAOiM,YAAaA,EAAc,GAAIQ,GAJrC,6C,yIAQ1BxQ,GACT,IAAMC,EAAQD,EAAMG,OAAOF,MAC3B3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aAExB,OADAjM,EAAM3C,KAAOjB,EACN,CAAC6P,aAAcjM,Q,mCAIjBH,EAAmBwC,GAC5B5I,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aAExB,OADAjM,EAAMhE,KAAO6D,EACN,CAACoM,aAAcjM,KACvBqC,K,qCAGQ3D,EAAuB2D,GAClC5I,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aAExB,OADAjM,EAAM1C,OAASoB,EACR,CAACuN,aAAcjM,KACvBqC,K,uCAGUlG,GAA6C,IAAD,EACrDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACRA,EAAQ,KACRA,EAAQ,IACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aACxB,OAAI7P,EAAQ4D,EAAMxC,WAGlBwC,EAAMzC,SAAWnB,GAFN,CAAC6P,aAAcjM,Q,uCAOjB7D,GAA6C,IAAD,EACrDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACRA,EAAQ,KACRA,EAAQ,IACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aACxB,OAAI7P,EAAQ4D,EAAMzC,WAGlByC,EAAMxC,SAAWpB,GAFN,CAAC6P,aAAcjM,Q,0CAOd7D,GAA6C,IAAD,EACxDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aAExB,OADAjM,EAAMvC,YAAcrB,EACb,CAAC6P,aAAcjM,Q,0CAIV7D,GAA6C,IAAD,EACxDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aAExB,OADAjM,EAAMtC,YAActB,EACb,CAAC6P,aAAcjM,Q,2CAIT7D,GAA6C,IAAD,EACzDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aAExB,OADAjM,EAAMrC,aAAevB,EACd,CAAC6P,aAAcjM,Q,2CAIT7D,GAA6C,IAAD,EACzDC,EAAQC,SAAQ,UAACF,EAAMG,OAAOF,aAAd,QAAuB,KACvCA,EAAQ,IACRA,EAAQ,GACZ3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aAExB,OADAjM,EAAMpC,aAAexB,EACd,CAAC6P,aAAcjM,Q,6BAIvB7D,GACH,IAAMC,EAAQD,EAAMG,OAAOF,MAC3B3C,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aAExB,OADAjM,EAAMnC,OAASxB,SAASD,GACjB,CAAC6P,aAAcjM,KACvBvG,KAAK+G,Y,wCAIR/G,KAAKiD,UAAS,SAAA0F,GACV,IAAMpC,EAAQoC,EAAU6J,aAExB,OADAjM,EAAMlC,cAAgBkC,EAAMlC,gBAAkB/C,EAAciH,UAAYjH,EAAciD,WAAajD,EAAciH,UAC1G,CAACiK,aAAcjM,KACvBvG,KAAK+G,Y,+BAUR,IAPM,IAAD,SACsB/G,KAAKF,MAAxB8D,EADH,EACGA,KAAMkF,EADT,EACSA,SADT,EAE0E9I,KAAKD,MAA5EyS,EAFH,EAEGA,aAAchM,EAFjB,EAEiBA,cAAeE,EAFhC,EAEgCA,aAAcgM,EAF9C,EAE8CA,YAAaC,EAF3D,EAE2DA,WAE1DrK,EAA2BkK,EAAanO,gBAAkB/C,EAAciH,UACxE+K,EAAqB,GAElB5D,EAAIgD,EAAc,EAAI,EAAIA,EAAc,EAC7ChD,IAAOgD,EAAc,GAAMC,EAAaD,EAAc,EAAIC,GAC1DjD,IACA4D,EAASnJ,KAAKuF,GAGlB,OACI,oCACI,yBAAK/O,UAAU,uFACX,kBAAC,wBAAsBoQ,SAAvB,MACK,SAAAjR,GAIG,OAHsB,MAAlBA,EAAMkR,UAAqB,EAAKjR,MAAMkP,MACtC,EAAKhM,SAAS,CAACgM,KAAMnP,EAAMkR,UAAW,EAAKjK,UAG3C,wCAIZ,0BAAMpG,UAAU,IAAIiD,GACpB,yBAAKjD,UAAU,qBACX,0BAAMA,UAAU,qBACZoI,SAAU/I,KAAKgH,UACf,2BAAOzE,KAAK,OAAO5B,UAAU,2CACzBgC,MAAO6P,EAAa5O,KACpBnB,SAAUzC,KAAKkH,eACnB,4BAAQvG,UAAU,wJACd,kBAAC,IAAD,CAAiBE,KAAK,SAASF,UAAU,iBACzC,0BAAMA,UAAU,WAAhB,YAGR,2BAAO2B,QAAQ,GAAG3B,UAAU,gBAA5B,WACA,4BAAQiD,KAAK,GAAGhD,GAAG,GAAGD,UAAU,uDAC5BgC,MAAO6P,EAAapO,OACpB3B,SAAUzC,KAAK2H,QACf,4BAAQhF,MAAOtB,EAAUgB,KAAM1B,UAAU,IAAIU,EAAUA,EAAUgB,OACjE,4BAAQM,MAAOtB,EAAUoH,KAAM9H,UAAU,IAAIU,EAAUA,EAAUoH,OACjE,4BAAQ9F,MAAOtB,EAAUqH,MAAO/H,UAAU,IAAIU,EAAUA,EAAUqH,QAClE,4BAAQ/F,MAAOtB,EAAU6B,OAAQvC,UAAU,IAAIU,EAAUA,EAAU6B,SACnE,4BAAQP,MAAOtB,EAAU+B,OAAQzC,UAAU,IAAIU,EAAUA,EAAU+B,SACnE,4BAAQT,MAAOtB,EAAUgC,KAAM1C,UAAU,IAAIU,EAAUA,EAAUgC,OACjE,4BAAQV,MAAOtB,EAAUiC,OAAQ3C,UAAU,IAAIU,EAAUA,EAAUiC,UAEvE,4BAAQ3C,UAAU,mKACd4C,QAASvD,KAAK4H,iBACZU,GAAmBkK,EAAapO,SAAW/C,EAAUgB,MACnD,kBAAC,IAAD,CAAiBxB,KAAK,sBAExByH,GAAmBkK,EAAapO,SAAW/C,EAAUgB,MACnD,kBAAC,IAAD,CAAiBxB,KAAK,2BAEzByH,GAAmBkK,EAAapO,SAAW/C,EAAUgB,MAClD,kBAAC,IAAD,CAAiBxB,KAAK,oBAExByH,GAAmBkK,EAAapO,SAAW/C,EAAUgB,MACnD,kBAAC,IAAD,CAAiBxB,KAAK,yBAG9B,yBAAKF,UAAU,YACX,4BAAQA,UAAU,qJAAqJG,MAAO,CAACkI,QAAS,kBACpLzF,QAASvD,KAAK4G,cACd,kBAAC,IAAD,CAAiB/F,KAAK,SAASF,UAAU,iBACzC,0BAAMA,UAAU,WAAhB,WAEF+F,GACE,yBAAK/F,UAAU,sFAAsFG,MAAO,CAACmI,OAAQ,UAAW1D,IAAK,UAAW2D,MAAO,OAAQ1D,OAAQ,MACnK,yBAAK7E,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,QACA,2BAAO4B,KAAK,OAAO5B,UAAU,kDACzBgC,MAAO6P,EAAa5O,KACpBnB,SAAUzC,KAAKkH,gBAEvB,yBAAKvG,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,QACA,kBAAC,EAAD,CAAiB4B,KAAMiQ,EAAajQ,KAAME,SAAUzC,KAAKmH,gBAE7D,yBAAKxG,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,UACA,kBAAC,EAAD,CAAmBkD,OAAQ2O,EAAa3O,OAAQpB,SAAUzC,KAAKoH,kBAEnE,yBAAKzG,UAAU,sBACX,0BAAMA,UAAU,gBAAhB,SACA,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO6P,EAAa1O,SACpBrB,SAAUzC,KAAKqH,oBAEvB,yBAAK1G,UAAU,iBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO6P,EAAazO,SACpBtB,SAAUzC,KAAKsH,sBAI/B,yBAAK3G,UAAU,sBACX,0BAAMA,UAAU,gBAAhB,aACA,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO6P,EAAaxO,YACpBvB,SAAUzC,KAAKuH,uBAEvB,yBAAK5G,UAAU,iBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO6P,EAAavO,YACpBxB,SAAUzC,KAAKwH,yBAI/B,yBAAK7G,UAAU,sBACX,0BAAMA,UAAU,gBAAhB,cACA,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,sBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO6P,EAAatO,aACpBzB,SAAUzC,KAAKyH,wBAEvB,yBAAK9G,UAAU,iBACX,2BAAO2B,QAAQ,GAAG3B,UAAU,yDAA5B,OACA,2BAAO4B,KAAK,SAAS5B,UAAU,0DAC3BgC,MAAO6P,EAAarO,aACpB1B,SAAUzC,KAAK0H,0BAK/B,yBAAK/G,UAAU,iCACX,yBAAKA,UAAU,IACX,4BAAQA,UAAU,4IACd4C,QAASvD,KAAK2G,kBADlB,UAKJ,yBAAKhG,UAAU,yBACX,4BAAQA,UAAU,6JACd4C,QAAO,sBAAE,sBAAA6E,EAAA,sEACC,EAAKrB,WADN,OAEL,EAAKD,gBAFA,4CADb,UAOA,4BAAQnG,UAAU,gJACd4C,QAASvD,KAAK8G,eADlB,cASpB,4BAAQnG,UAAU,gJAAgJG,MAAO,CAACkI,QAAS,iBAC/KzF,QAASvD,KAAK+G,UACd,kBAAC,IAAD,CAAiBlG,KAAK,WAAWF,UAAU,eAI1C,MAAZmI,EAAmBA,EAAStC,GAAgB,KAC5CmM,EAAa,GACV,yBAAKhS,UAAU,qCACX,yBAAKA,UAAU,iBACX,4BAAQA,UAAU,+JACd4C,QAASvD,KAAK6S,aACd,kBAAC,IAAD,CAAiBhS,KAAK,oBAAoBF,UAAU,iBACpD,0BAAMA,UAAU,IAAhB,UAEJ,4BAAQA,UAAU,+JACd4C,QAASvD,KAAKgT,YACd,kBAAC,IAAD,CAAiBnS,KAAK,aAAaF,UAAU,iBAC7C,0BAAMA,UAAU,IAAhB,SAEH2S,EAAS1N,KAAI,SAACjD,EAAOkD,GAAR,OACV,4BAAQE,IAAKF,EAAO0N,SAAUb,IAAgB/P,EAC1ChC,UAAS,uFAAkF+R,IAAgB/P,EAAQ,2CAA6C,mFAChKY,QAAS,kBAAM,EAAKqP,SAASjQ,KAC5BA,MAGT,4BAAQhC,UAAU,+JACd4C,QAASvD,KAAK+S,YACd,0BAAMpS,UAAU,QAAhB,QACA,kBAAC,IAAD,CAAiBE,KAAK,cAAcF,UAAU,aAElD,4BAAQA,UAAU,0JACd4C,QAASvD,KAAK8S,YACd,0BAAMnS,UAAU,QAAhB,QACA,kBAAC,IAAD,CAAiBE,KAAK,qBAAqBF,UAAU,oB,GA/d7CO,IAAMC,WCTzBqS,E,kDACjB,WAAY1T,GAA4B,IAAD,8BACnC,cAAMA,IAEDC,MAAQ,CACTkP,UAAMlC,EACNmC,WAAW,GAGf,EAAK+D,eAAiB,EAAKA,eAAepO,KAApB,gBACtB,EAAKqO,cAAgB,EAAKA,cAAcrO,KAAnB,gBATc,E,6DAanC7E,KAAKiD,SAAS,CAACiM,WAAW,M,sCAI1BlP,KAAKiD,SAAS,CAACiM,WAAW,M,+BAGpB,IAAD,SACuBlP,KAAKD,MAAzBkP,EADH,EACGA,KAAMC,EADT,EACSA,UAQJ1N,EAASiS,OACPlS,EAAWmS,OAUvB,OACI,yBAAK/S,UAAU,mDACX,kBAAC,wBAAsBoQ,SAAvB,MACK,SAAAjR,GAIG,OAHsB,MAAlBA,EAAMkR,UAAqB,EAAKjR,MAAMkP,MACtC,EAAKhM,SAAS,CAACgM,KAAMnP,EAAMkR,WAE3B/B,EAEI,kBAAC,EAAD,CAAYrL,KAAK,UAAUqP,eAAgB,EAAKA,eAAgBC,cAAe,EAAKA,gBAC/E,SAAAjC,GAAW,OACR,oCACMA,EAAYtB,OAAS,GACnB,kBAAC,IAAD,CAAWuB,WAAS,EAACpQ,MAAO,CAACmI,OAAQ,wBAChCgI,EAAYrL,KAAI,SAACjD,EAAOkD,GAAR,OACb,yBAAKE,IAAKF,EAAOlF,UAAU,QACvB,kBAAC,EAAD,CAAiBgB,KAAMgB,EAAOuI,YAAa+D,EAAKM,qBAK/D0B,EAAYtB,QAAU,IAAMT,GACzB,yBAAKvO,UAAU,IAAf,oBAIHsQ,EAAYtB,QAAU,GAAKT,GACxB,yBAAKvO,UAAU,6CACX,yBAAKK,IAAKmQ,IAAMlQ,IAAI,OAAON,UAAU,kBACrC,0BAAMA,UAAU,IAAhB,yBAUxB,yBAAKA,UAAU,IAAf,0B,GAhFeO,IAAMC,W,gBCPlCwS,EAZO,CAClBC,UAAW,qBACXC,cAAe,iBACfC,MAAO,2CACPC,sBAAsB,EACtBC,cAAc,EACdjJ,UAAWF,EAAYC,KAAKC,UAC5BkJ,aAAa,GAAD,OAAKpJ,EAAYC,KAAKE,KAAtB,4BACZkJ,yBAAyB,GAAD,OAAKrJ,EAAYC,KAAKE,KAAtB,KACxBmJ,oBAAoB,GAAD,OAAKtJ,EAAYC,KAAKE,KAAtB,oCCPFoJ,E,uKAEb,OACI,4BAAQzT,UAAU,GAAGG,MAAO,CAACuT,UAAW,sCAAuC7O,OAAQ,MACnF,kBAAC,wBAAsBuL,SAAvB,MACK,SAAAjR,GACG,OACI,yBAAKa,UAAU,wEACX,yBAAKA,UAAU,8BACX,kBAAC,IAAD,CAAMA,UAAU,mFACZ2T,GAAG,KADP,kBAIA,kBAAC,IAAD,CAAM3T,UAAU,+FACZ2T,GAAG,KADP,aAIA,kBAAC,IAAD,CAAM3T,UAAU,+FACZ2T,GAAG,WADP,UAIA,kBAAC,IAAD,CAAM3T,UAAU,+FACZ2T,GAAG,SADP,YAMHxU,EAAMkR,UACH,yBAAKrQ,UAAU,IACX,0BAAMA,UAAU,QAAhB,UAA+Bb,EAAMkR,SAASuD,QAAQ3Q,KAAtD,KACA,4BAAQjD,UAAU,wHACd4C,QAAS,kBAAMzD,EAAM0U,WADzB,aAMN1U,EAAMkR,UACJ,yBAAKrQ,UAAU,IACX,4BAAQA,UAAU,wHACd4C,QAAS,kBAAMzD,EAAM2U,UADzB,mB,GAtCJvT,IAAMC,WCarBuT,E,kDACjB,WAAY5U,GAA8B,IAAD,8BACrC,cAAMA,IAEDC,MAAQ,CACT0R,UAAU,EACV7N,KAAM,IAGV,EAAK+Q,mBAAqB,EAAKA,mBAAmB9P,KAAxB,gBAC1B,EAAK+P,kBAAoB,EAAKA,kBAAkB/P,KAAvB,gBACzB,EAAKgQ,cAAgB,EAAKA,cAAchQ,KAAnB,gBAVgB,E,+DAatBnC,GACfA,EAAMmP,kBACN7R,KAAKiD,SAAS,CAACwO,UAAU,M,wCAGX/O,GACdA,EAAMmP,kBACN7R,KAAKiD,SAAS,CAACwO,UAAU,M,6EAGT/O,G,4EAChBA,EAAMmP,kBACEgD,EAAkB7U,KAAKF,MAAvB+U,cACAjR,EAAS5D,KAAKD,MAAd6D,K,iEAIFiR,EAAcjR,G,OACpB5D,KAAKiD,SAAS,CAACwO,UAAU,I,sIAGnB,IAAD,SACsBzR,KAAKD,MAAxB0R,EADH,EACGA,SAAU7N,EADb,EACaA,KAElB,OACI,yBAAKjD,UAAU,+OACX0E,SAAU,EACV9B,QAASvD,KAAK2U,qBACXlD,GACC,yBAAK9Q,UAAU,aACX,yBAAKA,UAAU,mCACX,kBAAC,IAAD,CAAiBE,KAAK,OAAOF,UAAU,SAD3C,qBAMP8Q,GACG,yBAAK9Q,UAAU,2BACX,2BAAO4B,KAAK,OAAO5B,UAAU,wDACzBgC,MAAOiB,EACPL,QAAS,SAAAb,GAAK,OAAIA,EAAMmP,mBACxBpP,SAAU,SAAAC,GAAK,OAAI,EAAKO,SAAS,CAACW,KAAMlB,EAAMG,OAAOF,WACzD,yBAAKhC,UAAU,iBACX,4BAAQA,UAAU,kKAAkKG,MAAO,CAACgU,WAAY,UAAWC,cAAe,WAC9NxR,QAASvD,KAAK6U,eACd,kBAAC,IAAD,CAAiBlU,UAAU,UAAUE,KAAK,WAE9C,4BAAQF,UAAU,6JACd4C,QAASvD,KAAK4U,mBACd,kBAAC,IAAD,CAAiBjU,UAAU,UAAUE,KAAK,kB,GA/D7BK,IAAMC,W,QCTpC,SAAS6T,EAAWlV,GAAyB,IAChDqK,EAAS8K,cAAT9K,KACAmK,EAA0BxU,EAA1BwU,GAAIxL,EAAsBhJ,EAAtBgJ,SAAaoM,EAF8B,YAErBpV,EAFqB,mBAGvD,OACI,uCAAKyD,QAAS,kBAAM4G,EAAKmK,KAASY,GAC7BpM,G,ICSQqM,E,kDACjB,WAAYrV,GAA2B,IAAD,8BAClC,cAAMA,IAEDC,MAAQ,CACTqV,cAAc,EACdC,aAAa,EACbC,WAAW,EACXC,QAASzV,EAAMoM,SAAStI,MAG5B,EAAK4R,aAAe,EAAKA,aAAa3Q,KAAlB,gBACpB,EAAK4Q,aAAe,EAAKA,aAAa5Q,KAAlB,gBACpB,EAAK6Q,YAAc,EAAKA,YAAY7Q,KAAjB,gBACnB,EAAK8Q,WAAa,EAAKA,WAAW9Q,KAAhB,gBAClB,EAAK+Q,YAAc,EAAKA,YAAY/Q,KAAjB,gBACnB,EAAKgR,OAAS,EAAKA,OAAOhR,KAAZ,gBAEd,EAAKiR,gBAAkB,EAAKA,gBAAgBjR,KAArB,gBACvB,EAAKkR,eAAiB,EAAKA,eAAelR,KAApB,gBACtB,EAAKmR,WAAa,EAAKA,WAAWnR,KAAhB,gBAClB,EAAKoR,aAAe,EAAKA,aAAapR,KAAlB,gBApBc,E,2DAwBlC7E,KAAKiD,SAAS,CAACmS,cAAc,M,qCAI7BpV,KAAKiD,SAAS,CAACmS,cAAc,M,2EAGf1S,G,iEACdA,EAAMyF,iBACNnI,KAAKiD,SAAS,CAACoS,aAAa,I,wIAGrB3S,GACPA,EAAMyF,mB,2EAGQzF,G,iEACdA,EAAMyF,iBACNnI,KAAKiD,SAAS,CAACoS,aAAa,I,6KAGnB3S,G,oFACTA,EAAMyF,iB,EACuBnI,KAAKF,MAA1BoM,E,EAAAA,SAAU2J,E,EAAAA,OACZvJ,EAAS1J,SAASF,EAAMoP,aAAaoE,QAAQ,S,SAC7CL,EAAO3J,EAAStL,GAAI0L,G,OAC1BtM,KAAKiD,SAAS,CAACoS,aAAa,I,6IAGhB3S,GACZA,EAAMmP,kBACN7R,KAAKiD,SAAS,CAACqS,WAAW,EAAMC,QAASvV,KAAKF,MAAMoM,SAAStI,S,qCAGlDlB,GACXA,EAAMmP,kBACN7R,KAAKiD,SAAS,CAACqS,WAAW,M,0EAGb5S,G,gFACbA,EAAMmP,kB,EAC2B7R,KAAKF,MAA9BoM,E,EAAAA,SAAU8J,E,EAAAA,WACVT,EAAYvV,KAAKD,MAAjBwV,Q,iEAIFS,EAAW9J,EAAStL,GAAI2U,G,OAC9BvV,KAAKiD,SAAS,CAACqS,WAAW,I,mLAGX5S,G,kFACfA,EAAMmP,kB,EAC6B7R,KAAKF,MAAhCoM,E,EAAAA,SAAU+J,E,EAAAA,a,SACZA,EAAa/J,EAAStL,I,sIAGtB,IAAD,OACGsL,EAAalM,KAAKF,MAAlBoM,SADH,EAEqDlM,KAAKD,MAAvDqV,EAFH,EAEGA,aAAcC,EAFjB,EAEiBA,YAAaC,EAF9B,EAE8BA,UAAWC,EAFzC,EAEyCA,QAE9C,OACI,kBAACP,EAAD,CAAYrU,UAAS,iHAA4G0U,EAAc,8BAAgC,gCAA1J,8DACjBf,GAAE,gBAAWpI,EAAStL,IACtB4U,aAAcxV,KAAKwV,aACnBC,aAAczV,KAAKyV,aACnBC,YAAa1V,KAAK0V,YAClBC,WAAY3V,KAAK2V,WACjBC,YAAa5V,KAAK4V,YAClBC,OAAQ7V,KAAK6V,SACVP,GACC,oCACI,0BAAM3U,UAAU,4CAA4CuL,EAAStI,MACrE,yBAAKjD,UAAS,UAAKyU,EAAe,GAAK,SAAzB,mBACV,4BAAQzU,UAAU,kKAAkKG,MAAO,CAACgU,WAAY,UAAWC,cAAe,WAC9NxR,QAASvD,KAAK8V,iBACd,kBAAC,IAAD,CAAiBnV,UAAU,UAAUE,KAAK,gBAE9C,4BAAQF,UAAU,6JACd4C,QAASvD,KAAKiW,cACd,kBAAC,IAAD,CAAiBtV,UAAU,UAAUE,KAAK,kBAKzDyU,GACG,oCACI,2BAAO/S,KAAK,OAAO5B,UAAU,mDACzBgC,MAAO4S,EACPhS,QAAS,SAAAb,GAAK,OAAIA,EAAMmP,mBACxBpP,SAAU,SAAAC,GAAK,OAAI,EAAKO,SAAS,CAACsS,QAAS7S,EAAMG,OAAOF,WAC5D,yBAAKhC,UAAS,UAAKyU,EAAe,GAAK,SAAzB,mBACV,4BAAQzU,UAAU,kKAAkKG,MAAO,CAACgU,WAAY,UAAWC,cAAe,WAC9NxR,QAASvD,KAAKgW,YACd,kBAAC,IAAD,CAAiBrV,UAAU,UAAUE,KAAK,WAE9C,4BAAQF,UAAU,6JACd4C,QAASvD,KAAK+V,gBACd,kBAAC,IAAD,CAAiBpV,UAAU,UAAUE,KAAK,kB,GA1HhCK,IAAMC,WCJ3BgV,E,kDACjB,WAAYrW,GAAsB,IAAD,8BAC7B,cAAMA,IAEDC,MAAQ,CACTkP,UAAMlC,EACNd,UAAW,IAGf,EAAKmK,iBAAmB,EAAKA,iBAAiBvR,KAAtB,gBAExB,EAAKwR,UAAY,EAAKA,UAAUxR,KAAf,gBACjB,EAAKmR,WAAa,EAAKA,WAAWnR,KAAhB,gBAClB,EAAKyR,UAAY,EAAKA,UAAUzR,KAAf,gBACjB,EAAKoR,aAAe,EAAKA,aAAapR,KAAlB,gBAbS,E,oLAiBrBoK,EAASjP,KAAKD,MAAdkP,K,iEAIgB1D,EAAWgL,aAAatH,EAAKM,c,UAA/CtD,E,wDAINjM,KAAKiD,SAAS,CAACgJ,c,+KAGHrL,EAAY0L,G,0EAChB2C,EAASjP,KAAKD,MAAdkP,K,iEAIF1D,EAAWiL,YAAYvH,EAAKM,aAAc3O,EAAI0L,G,mLAGvC1L,EAAYgD,G,kFACG5D,KAAKD,MAAzBkP,E,EAAAA,KAAMhD,E,EAAAA,UACTgD,E,iEAGgB1D,EAAWkL,eAAexH,EAAKM,aAAc3O,EAAIgD,G,gBAE5DiC,EAAQoG,EAAU4E,WAAU,SAAA6F,GAAI,OAAIA,EAAK9V,KAAOA,KACtDqL,EAAUpG,GAAOjC,KAAOA,EACxB5D,KAAKiD,SAAS,CAACgJ,e,kLAIPrI,G,oFACgB5D,KAAKD,MAAzBkP,E,EAAAA,KAAMhD,E,EAAAA,UACTgD,E,iEAGgB1D,EAAWoL,WAAW1H,EAAKM,aAAc3L,G,QAAxD+H,E,UAEIO,EAAqB,CACvBtL,GAAI+K,EACJ/H,KAAMA,GAEVqI,EAAU9B,KAAK+B,GACflM,KAAKiD,SAAS,CAACgJ,e,mLAIJrL,G,kFACaZ,KAAKD,MAAzBkP,E,EAAAA,KAAMhD,E,EAAAA,UACTgD,E,iEAGgB1D,EAAWqL,WAAW3H,EAAKM,aAAc3O,G,gBAEpDiF,EAAQoG,EAAU4E,WAAU,SAAA6F,GAAI,OAAIA,EAAK9V,KAAOA,KACtDqL,EAAU6E,OAAOjL,EAAO,GACxB7F,KAAKiD,SAAS,CAACgJ,e,sIAIb,IAAD,SACuBjM,KAAKD,MAAzBkM,EADH,EACGA,UAAWgD,EADd,EACcA,KAEnB,OACI,yBAAKtO,UAAU,mDAAmDG,MAAO,CAACwE,MAAO,UAC7E,kBAAC,wBAAsByL,SAAvB,MACK,SAAAjR,GAKG,OAJsB,MAAlBA,EAAMkR,UAAqB,EAAKjR,MAAMkP,MACtC,EAAKhM,SAAS,CAACgM,KAAMnP,EAAMkR,WAAW,WAClC,EAAKoF,sBAETnH,EAEI,kBAAC,IAAD,CAAWiC,WAAS,GACfjF,EAAUrG,KAAI,SAACsG,EAAUrG,GAAX,OACX,yBAAKE,IAAKF,EAAOlF,UAAU,QACvB,kBAAC,EAAD,CAAcuL,SAAUA,EAAU2J,OAAQ,EAAKQ,UAAWL,WAAY,EAAKA,WAAYC,aAAc,EAAKA,mBAGlH,yBAAKtV,UAAU,wBACX,kBAAC,EAAD,CAAiBkU,cAAe,EAAKyB,cAM9C,oCACH,kBAAC,IAAD,CAAWpF,WAAS,GAChB,yBAAKvQ,UAAU,wBACX,kBAAC,EAAD,CAAiBkU,cAAe,EAAKyB,uB,GA5GpCpV,IAAMC,W,kBC2C3C,SAAS0V,KAAmB,IAChBjW,EAAOkW,cAAPlW,GAER,OACI,kBAAC,EAAD,CAAQyL,OAAQzL,IAhDxBmW,KAAQrI,IAAIsI,MAoDGC,OAlDf,WAmBI,OACI,yBAAKtW,UAAU,iBACX,kBAAC,IAAD,KACI,kBAAC,yBAAD,CAAwBgT,cAAeA,EACnCuD,0BAtBG,kBACf,yBAAKvW,UAAU,gFACX,yBAAKA,UAAU,8BACX,yBAAKK,IAAKmQ,IAAMlQ,IAAI,OAAON,UAAU,kBACrC,0BAAMA,UAAU,IAAhB,oBAmBIwW,eAdI,kBAChB,yBAAKxW,UAAU,gFACX,yBAAKA,UAAU,8BACX,yBAAKK,IAAKmQ,IAAMlQ,IAAI,OAAON,UAAU,kBACrC,0BAAMA,UAAU,IAAhB,sBAWI,kBAAC,EAAD,MACA,kBAAC,IAAD,CAAUyW,KAAK,2BAA2B9C,GAAG,MAC7C,yBAAK3T,UAAU,gBAAgBG,MAAO,CAACmI,OAAQ,uBAC3C,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOoO,OAAK,EAACD,KAAK,IAAIE,UAAWlG,IACjC,kBAAC,IAAD,CAAOgG,KAAK,UAAUE,UAAW9D,IACjC,kBAAC,IAAD,CAAO6D,OAAK,EAACD,KAAK,QAAQE,UAAWtI,IACrC,kBAAC,IAAD,CAAOoI,KAAK,YAAYE,UAAWT,MAEvC,kBAAC,EAAD,WCzCJU,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,GAAD,OAEFC,SAASC,eAAe,SDiIpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdlL,OAAM,SAAAC,GACLvK,QAAQuK,MAAMA,EAAMkL,c","file":"static/js/main.2e4f970b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.ee7cd8ed.svg\";","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\n\r\nexport type PriceProps = {\r\n    price: number;\r\n    priceColor: string;\r\n}\r\n\r\nexport type PriceState = {\r\n\r\n}\r\n\r\nexport default class Price extends React.Component<PriceProps, PriceState> {\r\n\r\n    static defaultProps: PriceProps = {\r\n        price: 0,\r\n        priceColor: \"text-gray-200\"\r\n    }\r\n\r\n    constructor(props: PriceProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { price, priceColor } = this.props;\r\n        const isNegative = price < 0;\r\n        const absPrice = Math.abs(price);\r\n\r\n        const gold = Math.floor(absPrice / 10000);\r\n        const silver = Math.floor(absPrice % 10000 / 100);\r\n        const copper = Math.floor(absPrice % 10000 % 100);\r\n\r\n        return (\r\n            <div className=\"flex flex-row\">\r\n                <div id=\"gold\" className=\"mr-1 flex flex-row items-center\">\r\n                    <FontAwesomeIcon icon=\"minus\" className={`${isNegative ? \"\" : \"hidden\"} ${priceColor} mr-1`} style={{fontSize: \"0.5rem\"}} />\r\n                    <img src=\"https://wiki.guildwars2.com/images/d/d1/Gold_coin.png\" alt=\"Gold Coin\" className=\"mr-1 w-4 h-4\"/>\r\n                    <span className={`text-sm ${priceColor}`}>{gold}</span>\r\n                </div>\r\n                <div id=\"silver\" className=\"mr-1 flex flex-row items-center\">\r\n                    <img src=\"https://wiki.guildwars2.com/images/3/3c/Silver_coin.png\" alt=\"Silver Coin\" className=\"mr-1 w-4 h-4\"/>\r\n                    <span className={`text-sm ${priceColor}`}>{silver}</span>\r\n                </div>\r\n                <div id=\"copper\" className=\"mr-1 flex flex-row items-center\">\r\n                    <img src=\"https://wiki.guildwars2.com/images/e/eb/Copper_coin.png\" alt=\"Copper Coin\" className=\"mr-1 w-4 h-4\"/>\r\n                    <span className={`text-sm ${priceColor}`}>{copper}</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","export enum ItemField {\r\n    Name,\r\n    Buys,\r\n    Sells,\r\n    Appeal,\r\n    Margin,\r\n    Sold,\r\n    Bought\r\n}\r\n\r\nexport enum ItemFieldSort {\r\n    Ascending,\r\n    Descending  \r\n}","export enum ItemRarity {\r\n    None = 0,\r\n    Junk = 1,\r\n    Basic = 2,\r\n    Fine = 4,\r\n    Masterwork = 8,\r\n    Rare = 16,\r\n    Exotic = 32,\r\n    Ascended = 64,\r\n    Legendary = 128,\r\n    All = 255\r\n}","export enum ItemType {\r\n    None = 0,\r\n    Armor = 1,\r\n    Back = 2,\r\n    Bag = 4,\r\n    Consumable = 8,\r\n    Container = 16,\r\n    CraftingMaterial = 32,\r\n    Gathering = 64,\r\n    Gizmo = 128,\r\n    Key = 256,\r\n    MiniPet = 512,\r\n    Tool = 1024,\r\n    Trait = 2048,\r\n    Trinket = 4096,\r\n    Trophy = 8192,\r\n    UpgradeComponent = 16384,\r\n    Weapon = 32768,\r\n    All = 65535\r\n}","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport { PricedItem } from \"../dataContracts/PricedItem\";\r\nimport ApiService from \"../services/ApiService\";\r\nimport Price from \"./Price\";\r\n\r\nexport type ItemComparisonSlotProps = {\r\n    item: PricedItem;\r\n    deleteItem(itemId: number): Promise<void>;\r\n}\r\n\r\nexport type ItemComparisonSlotState = {\r\n    amount: number;\r\n}\r\n\r\nexport default class ItemComparisonSlot extends React.Component<ItemComparisonSlotProps, ItemComparisonSlotState> {\r\n    constructor(props: ItemComparisonSlotProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            amount: 1\r\n        };\r\n\r\n        //this.getNetProfit = this.getNetProfit.bind(this);\r\n    }\r\n\r\n    /*\r\n    getNetProfit(): number {\r\n        const { item, amount } = this.state;\r\n\r\n        if (item == null)\r\n            return 0;\r\n\r\n        const revenue = Math.round(item.SellPrice * amount);\r\n        const expenditure = Math.round(item.BuyPrice * amount);\r\n        const totalFees = item.Fee * amount;\r\n        return revenue - expenditure - totalFees;\r\n    }\r\n    */\r\n    \r\n    render() {\r\n        const { item, deleteItem } = this.props;\r\n        const { amount } = this.state;\r\n\r\n        const revenue = Math.round(item.SellPrice * amount);\r\n        const expenditure = Math.round(item.BuyPrice * amount);\r\n        const fee = Math.round(item.SellPrice * 0.15);\r\n        const totalFees = fee * amount;\r\n        const netProfit = revenue - expenditure - totalFees;\r\n\r\n        // TODO: Amount is not sorting with items\r\n\r\n        return (\r\n            <div className=\"flex flex-row px-4 py-2 bg-gray-700\">\r\n                <div className=\"flex flex-row w-2/8 items-center mr-6\">\r\n                    <img src={item.Icon} alt={item.Name} className=\"mr-4 w-12 h-12\"/>\r\n                    <span className=\"italic text-gray-200\">{item.Name}</span>\r\n                </div>\r\n                <div className=\"flex flex-col xl:flex-row w-5/12 items-center\">\r\n                    <div className=\"flex flex-row xl:mr-4\">\r\n                        <div className=\"flex flex-col items-center mr-4\">\r\n                            <label htmlFor=\"\" className=\"text-sm mb-1 text-gray-500\">Amount</label>\r\n                            <input type=\"number\" className=\"w-16 px-1 text-sm bg-gray-600 text-gray-200\"\r\n                                defaultValue={1}\r\n                                onChange={event => {\r\n                                    const value: number = parseInt(event.target.value);\r\n                                    console.log(value);\r\n                                    if (value != null && !isNaN(value))\r\n                                        this.setState({amount: value});\r\n                                }} />\r\n                        </div>\r\n                        <div className=\"flex flex-col items-center\">\r\n                            <label htmlFor=\"\" className=\"text-sm mb-1 font-bold text-gray-500\">Net Profit</label>\r\n                            <Price price={netProfit} priceColor={`${ netProfit < 0 ? \"text-red-500\" : \"text-green-500\" }`} />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex flex-row\">\r\n                        <div className=\"flex flex-col items-center mr-4\">\r\n                            <label htmlFor=\"\" className=\"text-sm mb-1 text-gray-500\">Buys</label>\r\n                            <Price price={expenditure} />\r\n                        </div>\r\n                        <div className=\"flex flex-col items-center mr-4\">\r\n                            <label htmlFor=\"\" className=\"text-sm mb-1 text-gray-500\">Sells</label>\r\n                            <Price price={revenue} />\r\n                        </div>\r\n                        <div className=\"flex flex-col items-center\">\r\n                            <label htmlFor=\"\" className=\"text-sm mb-1 text-gray-500\">Fees</label>\r\n                            <Price price={totalFees} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"w-2/8\">\r\n                    <div className=\"flex flex-col xl:flex-row justify-evenly w-full h-full\">\r\n                        <div className=\"flex flex-row xl:flex-col items-center xl:mr-4\">\r\n                            <label htmlFor=\"\" className=\"text-sm mr-4 xl:mr-0 xl:mb-1 font-bold text-gray-500\">Appeal</label>\r\n                            <span className=\"text-gray-200\">{item.Appeal.toFixed(2)}</span>\r\n                        </div>\r\n                        <div className=\"flex flex-row xl:flex-col items-center xl:mr-4\">\r\n                            <label htmlFor=\"\" className=\"text-sm mr-4 xl:mr-0 xl:mb-1 text-gray-500\">Margin</label>\r\n                            <span className={item.Margin < 15 ? \"text-red-500\" : \"text-green-500\"}>{item.Margin.toFixed(2)}%</span>\r\n                        </div>\r\n                        <div className=\"flex flex-row xl:flex-col items-center xl:mr-4\">\r\n                            <label htmlFor=\"\" className=\"text-sm mr-4 xl:mr-0 xl:mb-1 text-gray-500\">Sold</label>\r\n                            <span className=\"text-gray-200\">{item.Sold.toFixed(2)}</span>\r\n                        </div>\r\n                        <div className=\"flex flex-row xl:flex-col items-center xl:mr-4\">\r\n                            <label htmlFor=\"\" className=\"text-sm mr-4 xl:mr-0 xl:mb-1 text-gray-500\">Bought</label>\r\n                            <span className=\"text-gray-200\">{item.Bought.toFixed(2)}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex flex-row w-1/12 items-center justify-center\">\r\n                    <button className=\"transition duration-150 ease-in-out px-3 py-1 rounded shadow-lg bg-red-700 text-red-300 hover:bg-red-800 hover:text-red-200\"\r\n                        onClick={() => deleteItem(item.Id)}>\r\n                        <FontAwesomeIcon icon=\"trash-alt\" />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n        /*\r\n        return (\r\n            <tr className=\"bg-gray-700\">\r\n                <td className=\"\">\r\n                    <div className=\"flex flex-row items-center\">\r\n                        <img src={item.Icon} alt={item.Name} className=\"mr-4 w-12 h-12\"/>\r\n                        <span className=\"italic\">{item.Name}</span>\r\n                    </div>\r\n                </td>\r\n                <td className=\"\">\r\n                    <div className=\"flex justify-center\">\r\n                        <Price price={item.BuyPrice} />\r\n                    </div>\r\n                </td>\r\n                <td className=\"\">\r\n                    <div className=\"flex justify-center\">\r\n                        <Price price={item.SellPrice} />\r\n                    </div>\r\n                </td>\r\n                <td className=\"\">\r\n                    <div className=\"flex justify-center\">\r\n                        <Price price={item.Fee} />\r\n                    </div>\r\n                </td>\r\n                <td className=\"\">\r\n                    <div className=\"text-center\">\r\n                        {item.AppealValue}\r\n                    </div>\r\n                </td>\r\n                <td className=\"\">\r\n                    <div className=\"text-center\">\r\n                        {item.Margin}\r\n                    </div>\r\n                </td>\r\n                <td className=\"\">\r\n                    <div className=\"text-center\">\r\n                        {item.TransactionRate}\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        );\r\n        */\r\n    }\r\n}","import { ItemField, ItemFieldSort } from \"../utils/ItemField\";\r\nimport { ItemRarity } from \"../utils/ItemRarity\";\r\nimport { ItemType } from \"../utils/ItemType\";\r\n\r\nexport class ItemQuery {\r\n    public name: string;\r\n    public type: ItemType;\r\n    public rarity: ItemRarity;\r\n    public minLevel: number;\r\n    public maxLevel: number;\r\n    public minBuyPrice: number;\r\n    public maxBuyPrice: number;\r\n    public minSellPrice: number;\r\n    public maxSellPrice: number;\r\n    public sortBy: ItemField;\r\n    public sortDirection: ItemFieldSort;\r\n\r\n    constructor(options?: ItemQueryOptions) {\r\n        this.name = options?.name ?? \"\";\r\n        this.type = options?.type ?? ItemType.All;\r\n        this.rarity = options?.rarity ?? ItemRarity.All;\r\n        this.minLevel = options?.minLevel ?? 0;\r\n        this.maxLevel = options?.maxLevel ?? 80;\r\n        this.minBuyPrice = options?.minBuyPrice ?? 0;\r\n        this.maxBuyPrice = options?.maxBuyPrice ?? 100000000;\r\n        this.minSellPrice = options?.minSellPrice ?? 0;\r\n        this.maxSellPrice = options?.maxSellPrice ?? 100000000;\r\n        this.sortBy = options?.sortBy ?? ItemField.Appeal;\r\n        this.sortDirection = options?.sortDirection ?? ItemFieldSort.Descending;\r\n    }\r\n\r\n    toObject(): { [key: string]: string } {\r\n        return {\r\n            name: this.name,\r\n            type: this.type.valueOf().toString(),\r\n            rarity: this.rarity.valueOf().toString(),\r\n            minLevel: this.minLevel.toString(),\r\n            maxLevel: this.maxLevel.toString(),\r\n            minBuyPrice: this.minBuyPrice.toString(),\r\n            maxBuyPrice: this.maxBuyPrice.toString(),\r\n            minSellPrice: this.minSellPrice.toString(),\r\n            maxSellPrice: this.maxSellPrice.toString(),\r\n            sortBy: this.sortBy.valueOf().toString(),\r\n            sortDirection: this.sortDirection.valueOf().toString()\r\n        };\r\n    }\r\n}\r\n\r\nexport interface ItemQueryOptions {\r\n    name?: string;\r\n    type?: ItemType;\r\n    rarity?: ItemRarity;\r\n    minLevel?: number;\r\n    maxLevel?: number;\r\n    minBuyPrice?: number;\r\n    maxBuyPrice?: number;\r\n    minSellPrice?: number;\r\n    maxSellPrice?: number;\r\n    sortBy?: ItemField;\r\n    sortDirection?: ItemFieldSort;\r\n}","export enum HistoryTimespan {\r\n    OneHour,\r\n    SixHours,\r\n    TwelveHours,\r\n    OneDay,\r\n    ThreeDays,\r\n    OneWeek\r\n}","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport { ItemRarity } from \"../utils/ItemRarity\";\r\n\r\nexport type RarityMultiSelectProps = {\r\n    rarity: ItemRarity;\r\n    onChange(rarity: ItemRarity, callback?: (() => void) | undefined): void;\r\n} \r\n\r\nexport type RarityMultiSelectState = {\r\n    isOpen: boolean;\r\n}\r\n\r\nexport default class RarityMultiSelect extends React.Component<RarityMultiSelectProps, RarityMultiSelectState> {\r\n    constructor(props: RarityMultiSelectProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isOpen: false\r\n        };\r\n\r\n        this.toggleOpen = this.toggleOpen.bind(this);\r\n        this.toggleRarity = this.toggleRarity.bind(this);\r\n        this.checkRarity = this.checkRarity.bind(this);\r\n    }\r\n\r\n    private static isPowerOf2(rarity: ItemRarity): boolean {\r\n        const rarityNum = rarity as number;\r\n        return (rarityNum !== 0) && ((rarityNum & (rarityNum - 1)) === 0);\r\n    }\r\n\r\n    private toggleOpen() {\r\n        const { isOpen } = this.state;\r\n        if (isOpen)\r\n            this.setState({isOpen: false});\r\n        else\r\n            this.setState({isOpen: true}, );\r\n    }\r\n\r\n    private toggleRarity(otherRarity: ItemRarity) {\r\n        const { rarity, onChange } = this.props;\r\n        let newRarity: ItemRarity;\r\n        switch (otherRarity) {\r\n        case ItemRarity.None:\r\n        case ItemRarity.All:\r\n            newRarity = otherRarity;\r\n            break;\r\n        default:\r\n            newRarity = rarity ^ otherRarity;\r\n            break;\r\n        }\r\n\r\n        onChange(newRarity, () => this.setState({isOpen: true}));\r\n    }\r\n\r\n    private checkRarity(otherRarity: ItemRarity): boolean {\r\n        const { rarity } = this.props;\r\n        if (rarity !== ItemRarity.All && otherRarity === ItemRarity.All)\r\n            return false;\r\n        return (rarity & otherRarity) !== 0;\r\n    }\r\n    \r\n    render() {\r\n        const { rarity } = this.props;\r\n        const { isOpen } = this.state;\r\n        let selectedText: string;\r\n\r\n        if (rarity === ItemRarity.None)\r\n            selectedText = ItemRarity[ItemRarity.None];\r\n        else if (rarity === ItemRarity.All)\r\n            selectedText = ItemRarity[ItemRarity.All];\r\n        else if (RarityMultiSelect.isPowerOf2(rarity))\r\n            selectedText = ItemRarity[rarity];\r\n        else\r\n            selectedText = \"Mixed\";\r\n\r\n        return(\r\n            <div className=\"relative\" tabIndex={0} onClick={this.toggleOpen}>\r\n                <div className=\"transition duration-150 ease-in-out px-2 py-1 flex items-center justify-between rounded-r text-sm bg-gray-600 text-gray-200 hover:shadow-lg hover:bg-gray-500 hover:text-gray-100 select-none cursor-pointer\" style={{width: \"6.9rem\"}}>\r\n                    <span>{selectedText}</span>\r\n                    {(isOpen && \r\n                        <FontAwesomeIcon className=\"text-xs\" icon=\"chevron-up\" />\r\n                    ) ||\r\n                    (!isOpen && \r\n                        <FontAwesomeIcon className=\"text-xs\" icon=\"chevron-down\" />\r\n                    )}\r\n                </div>\r\n                {(isOpen && \r\n                    <div className=\"absolute rounded bg-gray-600 text-gray-200\" style={{top: \"2rem\", zIndex: 100}}>\r\n                        {Object.keys(ItemRarity).filter(item => isNaN(parseInt(item))).map((value, index) => {\r\n                            const itemRarity: ItemRarity = ItemRarity[value as keyof typeof ItemRarity];\r\n                            \r\n                            return(\r\n                                <div key={index} className=\"flex flex-row items-center px-2 py-1 text-sm rounded hover:bg-gray-700 hover:text-gray-100 select-none cursor-pointer\"\r\n                                    tabIndex={0} \r\n                                    onClick={() => this.toggleRarity(itemRarity)}>\r\n                                    {(this.checkRarity(itemRarity) && \r\n                                        <FontAwesomeIcon className=\"mr-2\" icon=\"check\" />\r\n                                    ) || \r\n                                    (!this.checkRarity(itemRarity) && \r\n                                        <div className=\"\" style={{width: \"1.38rem\"}}></div>\r\n                                    )}\r\n                                    {ItemRarity[itemRarity]}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport { ItemType } from \"../utils/ItemType\";\r\n\r\nexport type TypeMultiSelectProps = {\r\n    type: ItemType;\r\n    onChange(type: ItemType, callback?: (() => void) | undefined): void;\r\n} \r\n\r\nexport type TypeMultiSelectState = {\r\n    isOpen: boolean;\r\n}\r\n\r\nexport default class TypeMultiSelect extends React.Component<TypeMultiSelectProps, TypeMultiSelectState> {\r\n    constructor(props: TypeMultiSelectProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isOpen: false\r\n        };\r\n\r\n        this.toggleOpen = this.toggleOpen.bind(this);\r\n        this.toggleType = this.toggleType.bind(this);\r\n        this.checkType = this.checkType.bind(this);\r\n    }\r\n\r\n    private static isPowerOf2(type: ItemType): boolean {\r\n        const typeNum = type as number;\r\n        return (typeNum !== 0) && ((typeNum & (typeNum - 1)) === 0);\r\n    }\r\n\r\n    private toggleOpen() {\r\n        const { isOpen } = this.state;\r\n        if (isOpen)\r\n            this.setState({isOpen: false});\r\n        else\r\n            this.setState({isOpen: true}, );\r\n    }\r\n\r\n    private toggleType(otherType: ItemType) {\r\n        const { type, onChange } = this.props;\r\n        let newType: ItemType;\r\n        switch (otherType) {\r\n        case ItemType.None:\r\n        case ItemType.All:\r\n            newType = otherType;\r\n            break;\r\n        default:\r\n            newType = type ^ otherType;\r\n            break;\r\n        }\r\n\r\n        onChange(newType, () => this.setState({isOpen: true}));\r\n    }\r\n\r\n    private checkType(otherType: ItemType): boolean {\r\n        const { type } = this.props;\r\n        if (type !== ItemType.All && otherType === ItemType.All)\r\n            return false;\r\n        return (type & otherType) !== 0;\r\n    }\r\n    \r\n    render() {\r\n        const { type } = this.props;\r\n        const { isOpen } = this.state;\r\n        let selectedText: string;\r\n\r\n        if (type === ItemType.None)\r\n            selectedText = ItemType[ItemType.None];\r\n        else if (type === ItemType.All)\r\n            selectedText = ItemType[ItemType.All];\r\n        else if (TypeMultiSelect.isPowerOf2(type))\r\n            selectedText = ItemType[type];\r\n        else\r\n            selectedText = \"Mixed\";\r\n\r\n        return(\r\n            <div className=\"relative\" tabIndex={0} onClick={this.toggleOpen}>\r\n                <div className=\"transition duration-150 ease-in-out px-2 py-1 text-sm flex items-center justify-between rounded-r bg-gray-600 text-gray-200 hover:shadow-lg hover:bg-gray-500 hover:text-gray-100 select-none cursor-pointer\" style={{width: \"10.29rem\"}}>\r\n                    <span>{selectedText}</span>\r\n                    {(isOpen && \r\n                        <FontAwesomeIcon className=\"text-xs\" icon=\"chevron-up\" />\r\n                    ) ||\r\n                    (!isOpen && \r\n                        <FontAwesomeIcon className=\"text-xs\" icon=\"chevron-down\" />\r\n                    )}\r\n                </div>\r\n                {(isOpen && \r\n                    <div className=\"absolute rounded bg-gray-600 text-gray-200\" style={{top: \"2rem\", zIndex: 100}}>\r\n                        {Object.keys(ItemType).filter(item => isNaN(parseInt(item))).map((value, index) => {\r\n                            const itemType: ItemType = ItemType[value as keyof typeof ItemType];\r\n                            \r\n                            return(\r\n                                <div key={index} className=\"flex flex-row items-center px-2 py-1 text-sm rounded hover:bg-gray-700 hover:text-gray-100 select-none cursor-pointer\"\r\n                                    tabIndex={0} \r\n                                    onClick={() => this.toggleType(itemType)}>\r\n                                    {(this.checkType(itemType) && \r\n                                        <FontAwesomeIcon className=\"mr-2\" icon=\"check\" />\r\n                                    ) || \r\n                                    (!this.checkType(itemType) && \r\n                                        <div className=\"\" style={{width: \"1.38rem\"}}></div>\r\n                                    )}\r\n                                    {ItemType[itemType]}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport { ItemQuery, ItemQueryOptions } from \"../dataContracts/ItemQuery\";\r\nimport { PricedItem } from \"../dataContracts/PricedItem\";\r\nimport { ItemField, ItemFieldSort } from \"../utils/ItemField\";\r\nimport { ItemRarity } from \"../utils/ItemRarity\";\r\nimport { ItemType } from \"../utils/ItemType\";\r\nimport RarityMultiSelect from \"./RarityMultiSelect\";\r\nimport TypeMultiSelect from \"./TypeMultiSelect\";\r\n\r\nexport type ListSortingBarProps = {\r\n    name: string;\r\n    items: PricedItem[];\r\n    onReload(): Promise<void>;\r\n    children?: (sortedItems: PricedItem[]) => React.ReactNode | null;\r\n}\r\n\r\nexport type ListSortingBarState = {\r\n    query: ItemQuery;\r\n    filteredItems: PricedItem[];\r\n    isFilterOpen: boolean;\r\n}\r\n\r\nexport default class ListSortingBar extends React.Component<ListSortingBarProps, ListSortingBarState> {\r\n    constructor(props: ListSortingBarProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            query: new ItemQuery(),\r\n            filteredItems: props.items,\r\n            isFilterOpen: false\r\n        };\r\n\r\n        this.resetQueryValues = this.resetQueryValues.bind(this);\r\n        this.toggleFilter = this.toggleFilter.bind(this);\r\n        this.onFilterOpen = this.onFilterOpen.bind(this);\r\n        this.onFilterClose = this.onFilterClose.bind(this);\r\n        this.onFilter = this.onFilter.bind(this);\r\n        this.onSearch = this.onSearch.bind(this);\r\n        this.sortCompare = this.sortCompare.bind(this);\r\n\r\n        this.onNameChange = this.onNameChange.bind(this);\r\n        this.onTypeChange = this.onTypeChange.bind(this);\r\n        this.onRarityChange = this.onRarityChange.bind(this);\r\n        this.onMinLevelChange = this.onMinLevelChange.bind(this);\r\n        this.onMaxLevelChange = this.onMaxLevelChange.bind(this);\r\n        this.onMinBuyPriceChange = this.onMinBuyPriceChange.bind(this);\r\n        this.onMaxBuyPriceChange = this.onMaxBuyPriceChange.bind(this);\r\n        this.onMinSellPriceChange = this.onMinSellPriceChange.bind(this);\r\n        this.onMaxSellPriceChange = this.onMaxSellPriceChange.bind(this);\r\n        this.onSort = this.onSort.bind(this);\r\n        this.onSortDirection = this.onSortDirection.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.onFilter();\r\n    }\r\n\r\n    resetQueryValues() {\r\n        this.setState({query: new ItemQuery()});\r\n    }\r\n\r\n    toggleFilter() {\r\n        const { isFilterOpen } = this.state;\r\n        if (isFilterOpen)\r\n            this.onFilterClose();\r\n        else\r\n            this.onFilterOpen();\r\n    }\r\n\r\n    onFilterOpen() {\r\n        this.setState({isFilterOpen: true});\r\n    }\r\n\r\n    onFilterClose() {\r\n        this.setState({isFilterOpen: false});\r\n    }\r\n\r\n    onFilter() {\r\n        // TODO: Implement filtering of the items from props here\r\n        const { items } = this.props;\r\n        const { query } = this.state;\r\n        let filteredItems: PricedItem[] = items;\r\n        console.log(items);\r\n        filteredItems = items.filter(item => {\r\n            return item.Name.toLowerCase().includes(query.name.toLowerCase()) &&\r\n                   (query.type & item.Type) !== 0 &&\r\n                   (query.rarity & item.Rarity) !== 0 &&\r\n                   item.Level >= query.minLevel &&\r\n                   item.Level <= query.maxLevel &&\r\n                   item.BuyPrice >= query.minBuyPrice &&\r\n                   item.BuyPrice <= query.maxBuyPrice &&\r\n                   item.SellPrice >= query.minSellPrice &&\r\n                   item.SellPrice <= query.maxSellPrice;\r\n        });\r\n        console.log(filteredItems);\r\n        \r\n        filteredItems = filteredItems.sort(this.sortCompare);\r\n\r\n        this.setState({filteredItems});\r\n    }\r\n\r\n    // Does an unfiltered search.\r\n    onSearch(event: React.FormEvent<HTMLFormElement>) {\r\n        event.preventDefault();\r\n        const { items } = this.props;\r\n        const { query } = this.state;\r\n        let filteredItems: PricedItem[] = items;\r\n        filteredItems = items.filter(item => {\r\n            return item.Name.toLowerCase().includes(query.name.toLowerCase());\r\n        });\r\n        \r\n        filteredItems = filteredItems.sort(this.sortCompare);\r\n\r\n        this.setState({filteredItems});\r\n    }\r\n\r\n    sortCompare(a: PricedItem, b: PricedItem): number {\r\n        const { query } = this.state;\r\n        const isSortAscending: boolean = query.sortDirection === ItemFieldSort.Ascending;\r\n\r\n        if (query.sortBy === ItemField.Name) {\r\n            if (isSortAscending)\r\n                return a.Name.toLowerCase().localeCompare(b.Name.toLowerCase());\r\n            \r\n            return b.Name.toLowerCase().localeCompare(a.Name.toLowerCase());\r\n        }\r\n\r\n        if (query.sortBy === ItemField.Appeal) {\r\n            if (isSortAscending)\r\n                return a.Appeal - b.Appeal;\r\n\r\n            return b.Appeal - a.Appeal;\r\n        }\r\n\r\n        if (query.sortBy === ItemField.Margin) {\r\n            if (isSortAscending)\r\n                return a.Margin - b.Margin;\r\n\r\n            return b.Margin - a.Margin;\r\n        }\r\n\r\n        if (query.sortBy === ItemField.Sold) {\r\n            if (isSortAscending)\r\n                return a.Sold - b.Sold;\r\n\r\n            return b.Sold - a.Sold;\r\n        }\r\n\r\n        if (query.sortBy === ItemField.Bought) {\r\n            if (isSortAscending)\r\n                return a.Bought - b.Bought;\r\n\r\n            return b.Bought - a.Bought;\r\n        }\r\n\r\n        if (query.sortBy === ItemField.Buys) {\r\n            if (isSortAscending)\r\n                return a.BuyPrice - b.BuyPrice;\r\n\r\n            return b.BuyPrice - a.BuyPrice;\r\n        }\r\n\r\n        if (query.sortBy === ItemField.Sells) {\r\n            if (isSortAscending)\r\n                return a.SellPrice - b.SellPrice;\r\n\r\n            return b.SellPrice - a.SellPrice;\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    onNameChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const value = event.target.value;\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            query.name = value;\r\n            return {query};\r\n        });\r\n    }\r\n    \r\n    onTypeChange(newType: ItemType, callback?: (() => void) | undefined) {\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            query.type = newType;\r\n            return {query};\r\n        }, callback);\r\n    }\r\n    \r\n    onRarityChange(newRarity: ItemRarity, callback?: (() => void) | undefined) {\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            query.rarity = newRarity;\r\n            return {query};\r\n        }, callback);\r\n    }\r\n\r\n    onMinLevelChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        if (value > 80)\r\n            value = 80;\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            if (value > query.maxLevel)\r\n                return {query};\r\n\r\n            query.minLevel = value;\r\n            return {query};\r\n        });\r\n    }\r\n\r\n    onMaxLevelChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        if (value > 80)\r\n            value = 80;\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            if (value < query.minLevel)\r\n                return {query};\r\n\r\n            query.maxLevel = value;\r\n            return {query};\r\n        });\r\n    }\r\n\r\n    onMinBuyPriceChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            query.minBuyPrice = value;\r\n            return {query};\r\n        });\r\n    }\r\n\r\n    onMaxBuyPriceChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            query.maxBuyPrice = value;\r\n            return {query};\r\n        });\r\n    }\r\n\r\n    onMinSellPriceChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            query.minSellPrice = value;\r\n            return {query};\r\n        });\r\n    }\r\n\r\n    onMaxSellPriceChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            query.maxSellPrice = value;\r\n            return {query};\r\n        });\r\n    }\r\n\r\n    onSort(event: React.ChangeEvent<HTMLSelectElement>) {\r\n        const value = event.target.value;\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            query.sortBy = parseInt(value) as ItemField;\r\n            return {query};\r\n        }, this.onFilter);\r\n    }\r\n\r\n    onSortDirection() {\r\n        this.setState(prevState => {\r\n            const query = prevState.query;\r\n            query.sortDirection = query.sortDirection === ItemFieldSort.Ascending ? ItemFieldSort.Descending : ItemFieldSort.Ascending;\r\n            return {query};\r\n        }, this.onFilter);\r\n    }\r\n\r\n    render() {\r\n        const { name, onReload, children } = this.props;\r\n        const { query, isFilterOpen, filteredItems } = this.state;\r\n        const isSortAscending: boolean = query.sortDirection === ItemFieldSort.Ascending;\r\n        return(\r\n            <>\r\n                <div className=\"flex flex-row justify-between items-center px-4 py-2 mb-4 bg-gray-900 text-gray-500\">\r\n                    <span className=\"\">{name}</span>\r\n                    \r\n                    <div className=\"flex items-center\">\r\n                        <form className=\"flex flex-row mr-4\"\r\n                            onSubmit={this.onSearch}>\r\n                            <input type=\"text\" className=\"pl-2 rounded-l bg-gray-600 text-gray-200\"\r\n                                value={query.name}\r\n                                onChange={this.onNameChange} />\r\n                            <button className=\"transition duration-150 ease-in-out flex items-center px-2 rounded-r bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\">\r\n                                <FontAwesomeIcon icon=\"search\" className=\"mr-1 text-xs\" />\r\n                                <span className=\"text-xs\">Search</span>\r\n                            </button>\r\n                        </form>\r\n                        <label htmlFor=\"\" className=\"mr-2 text-sm\">Sort By</label>\r\n                        <select name=\"\" id=\"\" className=\"pl-2 rounded-l h-6 text-sm bg-gray-600 text-gray-200\" \r\n                            value={query.sortBy} \r\n                            onChange={this.onSort}>\r\n                            <option value={ItemField.Name} className=\"\">{ItemField[ItemField.Name]}</option>\r\n                            <option value={ItemField.Buys} className=\"\">{ItemField[ItemField.Buys]}</option>\r\n                            <option value={ItemField.Sells} className=\"\">{ItemField[ItemField.Sells]}</option>\r\n                            <option value={ItemField.Appeal} className=\"\">{ItemField[ItemField.Appeal]}</option>\r\n                            <option value={ItemField.Margin} className=\"\">{ItemField[ItemField.Margin]}</option>\r\n                            <option value={ItemField.Sold} className=\"\">{ItemField[ItemField.Sold]}</option>\r\n                            <option value={ItemField.Bought} className=\"\">{ItemField[ItemField.Bought]}</option>\r\n                        </select>\r\n                        <button className=\"transition duration-150 ease-in-out px-2 mr-4 rounded-r bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\"\r\n                            onClick={this.onSortDirection}>\r\n                            {(isSortAscending && query.sortBy !== ItemField.Name &&\r\n                                <FontAwesomeIcon icon=\"sort-numeric-up\" />\r\n                            ) ||\r\n                            (!isSortAscending && query.sortBy !== ItemField.Name &&\r\n                                <FontAwesomeIcon icon=\"sort-numeric-down-alt\" />\r\n                            ) ||\r\n                            (isSortAscending && query.sortBy === ItemField.Name &&\r\n                                <FontAwesomeIcon icon=\"sort-alpha-up\" />\r\n                            ) ||\r\n                            (!isSortAscending && query.sortBy === ItemField.Name &&\r\n                                <FontAwesomeIcon icon=\"sort-alpha-down-alt\" />\r\n                            )}\r\n                        </button>\r\n                        <div className=\"relative\">\r\n                            <button className=\"transition duration-150 ease-in-out mr-4 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\" style={{padding: \"0.20rem 0.5rem\"}}\r\n                                onClick={this.toggleFilter}>\r\n                                <FontAwesomeIcon icon=\"filter\" className=\"mr-1 text-xs\" />\r\n                                <span className=\"text-xs\">Filter</span>\r\n                            </button>\r\n                            {(isFilterOpen && \r\n                                <div className=\"absolute flex flex-col px-3 py-3 w-64 filter-arrow-up rounded shadow-lg bg-gray-900\" style={{height: \"21.7rem\", top: \"2.75rem\", right: \"0rem\", zIndex: 100}}>\r\n                                    <div className=\"mb-2 flex flex-row\">\r\n                                        <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Name</label>\r\n                                        <input type=\"text\" className=\"w-full px-2 rounded-r bg-gray-600 text-gray-200\"\r\n                                            value={query.name}\r\n                                            onChange={this.onNameChange} />\r\n                                    </div>\r\n                                    <div className=\"mb-2 flex flex-row\">\r\n                                        <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Type</label>\r\n                                        <TypeMultiSelect type={query.type} onChange={this.onTypeChange} />\r\n                                    </div>\r\n                                    <div className=\"mb-2 flex flex-row\">\r\n                                        <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Rarity</label>\r\n                                        <RarityMultiSelect rarity={query.rarity} onChange={this.onRarityChange} />\r\n                                    </div>\r\n                                    <div className=\"mb-2 flex flex-col\">\r\n                                        <span className=\"mb-1 text-sm\">Level</span>\r\n                                        <div className=\"flex flex-row\">\r\n                                            <div className=\"mr-1 flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Min</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={query.minLevel}\r\n                                                    onChange={this.onMinLevelChange} />\r\n                                            </div>\r\n                                            <div className=\"flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Max</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={query.maxLevel}\r\n                                                    onChange={this.onMaxLevelChange} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"mb-2 flex flex-col\">\r\n                                        <span className=\"mb-1 text-sm\">Buy Price</span>\r\n                                        <div className=\"flex flex-row\">\r\n                                            <div className=\"mr-1 flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Min</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={query.minBuyPrice}\r\n                                                    onChange={this.onMinBuyPriceChange} />\r\n                                            </div>\r\n                                            <div className=\"flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Max</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={query.maxBuyPrice}\r\n                                                    onChange={this.onMaxBuyPriceChange} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"mb-4 flex flex-col\">\r\n                                        <span className=\"mb-1 text-sm\">Sell Price</span>\r\n                                        <div className=\"flex flex-row\">\r\n                                            <div className=\"mr-1 flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Min</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={query.minSellPrice}\r\n                                                    onChange={this.onMinSellPriceChange} />\r\n                                            </div>\r\n                                            <div className=\"flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Max</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={query.maxSellPrice}\r\n                                                    onChange={this.onMaxSellPriceChange} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex flex-row justify-between\">\r\n                                        <div className=\"\">\r\n                                            <button className=\"transition duration-150 ease-in-out px-2 py-1 rounded text-sm bg-red-700 text-red-300 hover:shadow-lg hover:bg-red-800 hover:text-red-200\"\r\n                                                onClick={this.resetQueryValues}>\r\n                                                Reset\r\n                                            </button>\r\n                                        </div>\r\n                                        <div className=\"flex flex-row-reverse\">\r\n                                            <button className=\"transition duration-150 ease-in-out ml-2 px-2 py-1 rounded text-sm bg-indigo-700 text-indigo-300 hover:shadow-lg hover:bg-indigo-800 hover:text-indigo-200\"\r\n                                                onClick={() => {\r\n                                                    this.onFilter(); \r\n                                                    this.onFilterClose();\r\n                                                }}>\r\n                                                Filter\r\n                                            </button>\r\n                                            <button className=\"transition duration-150 ease-in-out px-2 py-1 rounded text-sm bg-gray-700 text-gray-300 hover:shadow-lg hover:bg-gray-800 hover:text-gray-200\"\r\n                                                onClick={this.onFilterClose}>\r\n                                                Cancel\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <button className=\"transition duration-150 ease-in-out flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\" style={{padding: \"0.3rem 0.5rem\"}}\r\n                            onClick={onReload}>\r\n                            <FontAwesomeIcon icon=\"redo-alt\" className=\"text-sm\" />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                {children != null ? children(filteredItems): null}\r\n            </>\r\n        );\r\n    }\r\n}","export class HistoryItemQuery {\r\n    private id: number;\r\n    private newest: number;\r\n\r\n    constructor(id: number, newest?: number) {\r\n        this.id = id;\r\n        this.newest = newest ?? 0;\r\n    }\r\n\r\n    toObject(): { [key: string]: string } {\r\n        return {\r\n            id: this.id.toString(),\r\n            newest: this.newest.toString()\r\n        }\r\n    }\r\n}","import { ItemRarity } from \"../utils/ItemRarity\";\r\nimport { ItemType } from \"../utils/ItemType\";\r\nimport { ItemPriceSnapshot } from \"./ItemPriceSnapshot\";\r\n\r\nexport class HistoryItemPrices {\r\n    public readonly Id: number;\r\n    public readonly History: ItemPriceSnapshot[];\r\n\r\n    constructor(id: number, history: ItemPriceSnapshot[]) {\r\n        this.Id = id;\r\n        this.History = history;\r\n    }\r\n}\r\n\r\nexport type HistoryItem = {\r\n    Id: number;\r\n    ChatLink: string;\r\n    Name: string;\r\n    Icon: string;\r\n    Description: string;\r\n    Type: ItemType;\r\n    Rarity: ItemRarity;\r\n    Level: number;\r\n    History: ItemPriceSnapshot[];\r\n}\r\n\r\nexport class HistoryItemFactory {\r\n    static ToHistoryItem(item: any): HistoryItem | null {\r\n        try {\r\n            const result: HistoryItem = { \r\n                Id: item.id, \r\n                ChatLink: item.chatLink,\r\n                Name: item.name, \r\n                Icon: item.icon, \r\n                Description: item.description,\r\n                Type: parseInt(item.type),\r\n                Rarity: parseInt(item.rarity),\r\n                Level: item.level,\r\n\r\n                History: item.history,\r\n            };\r\n\r\n            return result;\r\n        } catch(e) {\r\n            console.log(e);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static ToHistoryItems(items: any): HistoryItem[] {\r\n        const arr: HistoryItem[] = [];\r\n        items.forEach((item: any) => {\r\n            const itemResult = HistoryItemFactory.ToHistoryItem(item);\r\n            if (itemResult != null)\r\n                arr.push(itemResult);\r\n        });\r\n\r\n        return arr;\r\n    }\r\n}","import { ItemRarity } from \"../utils/ItemRarity\";\r\nimport { ItemType } from \"../utils/ItemType\";\r\n\r\nexport type PricedItem = {\r\n    Id: number;\r\n    ChatLink: string;\r\n    Name: string;\r\n    Icon: string;\r\n    Description: string;\r\n    Type: ItemType;\r\n    Rarity: ItemRarity;\r\n    Level: number;\r\n\r\n    BuyPrice: number;\r\n    SellPrice: number;\r\n    Appeal: number;\r\n    Margin: number;\r\n    Sold: number;\r\n    Bought: number;\r\n}\r\n\r\nexport class PricedItemFactory {\r\n    static ToPricedItem(item: any): PricedItem | null {\r\n        try {\r\n            const result: PricedItem = { \r\n                Id: item.id, \r\n                ChatLink: item.chatLink,\r\n                Name: item.name, \r\n                Icon: item.icon, \r\n                Description: item.description,\r\n                Type: parseInt(item.type),\r\n                Rarity: parseInt(item.rarity),\r\n                Level: item.level,\r\n\r\n                BuyPrice: item.buyPrice,\r\n                SellPrice: item.sellPrice,\r\n                Appeal: parseFloat(parseFloat(item.appeal).toFixed(2)),\r\n                Margin: parseFloat(parseFloat(item.margin).toFixed(2)),\r\n                Sold: parseFloat(parseFloat(item.sold).toFixed(2)),\r\n                Bought: parseFloat(parseFloat(item.bought).toFixed(2))\r\n            };\r\n\r\n            return result;\r\n        } catch(e) {\r\n            console.log(e);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static ToPricedItems(items: any): PricedItem[] {\r\n        const arr: PricedItem[] = [];\r\n        items.forEach((item: any) => {\r\n            const itemResult = PricedItemFactory.ToPricedItem(item);\r\n            if (itemResult != null)\r\n                arr.push(itemResult);\r\n        });\r\n\r\n        return arr;\r\n    }\r\n}","const environment = {\r\n    urls: {\r\n        authority: \"https://auth.devwulfcodes.com\",\r\n        host: \"https://gw2.devwulfcodes.com\",\r\n        gw2calculator: \"https://gw2.devwulfcodes.com/api\"\r\n    }\r\n};\r\n\r\nexport default environment;","import { HistoryItem, HistoryItemFactory } from \"../dataContracts/HistoryItem\";\r\nimport { HistoryItemQuery } from \"../dataContracts/HistoryItemQuery\";\r\nimport { ItemList } from \"../dataContracts/ItemList\";\r\nimport { ItemQuery } from \"../dataContracts/ItemQuery\";\r\nimport { PricedItem, PricedItemFactory } from \"../dataContracts/PricedItem\";\r\nimport environment from \"../environment\";\r\n\r\nclass ApiService {\r\n    public async GetItems(accessToken: string, query: ItemQuery, pageNumber: number): Promise<PricedItem[] | null> {\r\n        const url = environment.urls.gw2calculator + \"/item/pricedItems?\" + new URLSearchParams(query.toObject()) + `&pageNumber=${pageNumber}`;\r\n        const response = await ApiService.Get(url, accessToken);\r\n        const result = await response.json();\r\n\r\n        if (response.ok)\r\n            return PricedItemFactory.ToPricedItems(result);\r\n\r\n        console.log(result);\r\n        return null;\r\n    }\r\n\r\n    public async GetItemPageCount(accessToken: string, query: ItemQuery): Promise<number> {\r\n        const url = environment.urls.gw2calculator + \"/item/pricedItems/pageCount?\" + new URLSearchParams(query.toObject());\r\n        const response = await ApiService.Get(url, accessToken);\r\n        const result = await response.json();\r\n\r\n        if (response.ok)\r\n            return result;\r\n\r\n        console.log(result);\r\n        return 0;\r\n    }\r\n\r\n    public async GetHistoryItems(accessToken: string, queries: HistoryItemQuery[]): Promise<HistoryItem[] | null> {\r\n        const url = environment.urls.gw2calculator + \"/item/historyItems\";\r\n        const response = await ApiService.Post(url, accessToken, queries);\r\n        const result = await response.json();\r\n\r\n        if (response.ok)\r\n            return HistoryItemFactory.ToHistoryItems(result);\r\n\r\n        console.log(result);\r\n        return null;\r\n    }\r\n\r\n    public async GetItemLists(accessToken: string) : Promise<ItemList[] | null> {\r\n        const url = environment.urls.gw2calculator + \"/list/getLists\";\r\n        const response = await ApiService.Get(url, accessToken);\r\n        const result = await response.json();\r\n\r\n        if (response.ok) {\r\n            const items = result.itemLists;\r\n            const itemLists: ItemList[] = [];\r\n            items.forEach((item: any) => {\r\n                const itemList: ItemList = {\r\n                    id: item.id,\r\n                    name: item.name\r\n                };\r\n                \r\n                itemLists.push(itemList);\r\n            });\r\n\r\n            return itemLists;\r\n        }\r\n\r\n        console.log(result);\r\n        return null;\r\n    }\r\n\r\n    public async GetItemList(accessToken: string, id: string) : Promise<number[] | null> {\r\n        const url = environment.urls.gw2calculator + \"/list/getList/\" + id;\r\n        const response = await ApiService.Get(url, accessToken);\r\n        const result = await response.json();\r\n\r\n        if (response.ok) {\r\n            const items = result.itemIds;\r\n            const itemIds: number[] = [];\r\n            items.forEach((id: any) => {\r\n                const idNum = parseInt(id);\r\n                itemIds.push(idNum);\r\n            });\r\n\r\n            return itemIds;\r\n        }\r\n\r\n        console.log(result);\r\n        return null;\r\n    }\r\n\r\n    public async CreateList(accessToken: string, name: string) : Promise<string | null> {\r\n        const url = environment.urls.gw2calculator + \"/list/createList\";\r\n        const response = await ApiService.Post(url, accessToken, {name});\r\n        const result = await response.json();\r\n\r\n        if (response.ok)\r\n            return result.listId;\r\n\r\n        console.log(result);\r\n        return null;\r\n    }\r\n\r\n    public async UpdateListName(accessToken: string, id: string, name: string) : Promise<boolean> {\r\n        const url = environment.urls.gw2calculator + \"/list/updateName\";\r\n        const response = await ApiService.Post(url, accessToken, {id, name});\r\n\r\n        if (response.ok)\r\n            return true;\r\n\r\n        const result = await response.json();\r\n        console.log(result);\r\n        return false;\r\n    }\r\n\r\n    public async AddListItem(accessToken: string, id: string, itemId: number) : Promise<boolean> {\r\n        const url = environment.urls.gw2calculator + \"/list/addItem\";\r\n        const response = await ApiService.Post(url, accessToken, {id, itemId});\r\n\r\n        if (response.ok)\r\n            return true;\r\n\r\n        const result = await response.json();\r\n        console.log(result);\r\n        return false;\r\n    }\r\n\r\n    public async DeleteListItem(accessToken: string, id: string, itemId: number) : Promise<boolean> {\r\n        const url = environment.urls.gw2calculator + \"/list/deleteItem\";\r\n        const response = await ApiService.Post(url, accessToken, {id, itemId});\r\n\r\n        if (response.ok)\r\n            return true;\r\n        \r\n        const result = await response.json();\r\n        console.log(result);\r\n        return false;\r\n    }\r\n\r\n    public async DeleteList(accessToken: string, id: string) : Promise<boolean> {\r\n        const url = environment.urls.gw2calculator + \"/list/deleteList\";\r\n        const response = await ApiService.Post(url, accessToken, {id});\r\n\r\n        if (response.ok)\r\n            return true;\r\n\r\n        const result = await response.json();\r\n        console.log(result);\r\n        return false;\r\n    }\r\n\r\n    private static async Get(url: string, accessToken: string) : Promise<Response> {\r\n        return fetch(url, {\r\n            method: \"GET\",\r\n            mode: \"cors\",\r\n            cache: \"no-cache\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": `Bearer ${accessToken}`\r\n            }\r\n        });\r\n    }\r\n\r\n    private static async Post(url: string, accessToken: string, body: any) : Promise<Response> {\r\n        return fetch(url, {\r\n            method: \"POST\",\r\n            mode: \"cors\",\r\n            cache: \"no-cache\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": `Bearer ${accessToken}`\r\n            },\r\n            body: body ? JSON.stringify(body) : undefined\r\n        });\r\n    }\r\n}\r\n\r\nexport default new ApiService();","import Dexie from \"dexie\";\r\nimport { HistoryItem, HistoryItemPrices } from \"../dataContracts/HistoryItem\";\r\nimport { ItemPriceSnapshot } from \"../dataContracts/ItemPriceSnapshot\";\r\nimport { HistoryTimespan } from \"../utils/HistoryTimespan\";\r\n\r\nclass LocalDB extends Dexie {\r\n    private historyItemPrices: Dexie.Table<HistoryItemPrices, number>;\r\n\r\n    constructor() {\r\n        super(\"GW2History\");\r\n\r\n        this.version(1).stores({\r\n            historyItemPrices: \"Id\"\r\n        });\r\n        this.open().catch(error => {\r\n            console.error(`Opening the db '${this.name}' failed: ${error}`);\r\n        });\r\n\r\n        this.historyItemPrices = this.table(\"historyItemPrices\");\r\n        this.historyItemPrices.mapToClass(HistoryItemPrices);\r\n    }\r\n\r\n    async getHistoryItemPrices(id: number, timespan: HistoryTimespan): Promise<ItemPriceSnapshot[] | null> {\r\n        const item = await this.historyItemPrices.get(id);\r\n        if (!item)\r\n            return null;\r\n        \r\n        if (timespan === HistoryTimespan.OneWeek)\r\n            return item.History;\r\n\r\n        let items: ItemPriceSnapshot[] = [];\r\n        const now = new Date();\r\n        let timeFromNow: number;\r\n        switch (timespan) {\r\n        case HistoryTimespan.OneHour:\r\n            timeFromNow = now.setDate(now.getTime() - (1 * 60 * 60 * 1000));\r\n            break;\r\n        case HistoryTimespan.SixHours:\r\n            timeFromNow = now.setDate(now.getTime() - (6 * 60 * 60 * 1000));\r\n            break;\r\n        case HistoryTimespan.TwelveHours:\r\n            timeFromNow = now.setDate(now.getTime() - (12 * 60 * 60 * 1000));\r\n            break;\r\n        case HistoryTimespan.OneDay:\r\n            timeFromNow = now.setDate(now.getDate() - 1);\r\n            break;\r\n        case HistoryTimespan.ThreeDays:\r\n            timeFromNow = now.setDate(now.getDate() - 3);\r\n            break;\r\n        default:\r\n            timeFromNow = now.setDate(now.getDate() - 7);\r\n            break;\r\n        }\r\n        \r\n        item.History.forEach(price => {\r\n            if (price.time >= timeFromNow)\r\n                items.push(price);\r\n        });\r\n\r\n        return items;\r\n    }\r\n\r\n    async getNewestTime(id: number): Promise<number> {\r\n        const history = await this.getHistoryItemPrices(id, HistoryTimespan.OneWeek);\r\n        if (!history)\r\n            return 0;\r\n        \r\n        return history[0].time;\r\n    }\r\n\r\n    async setHistoryItemPrices(id: number, newHistory: ItemPriceSnapshot[]) {\r\n        const item = await this.historyItemPrices.get(id);\r\n        if (!item) {\r\n            // If no item exists, just create a new item with the given id and history\r\n            const newItem = new HistoryItemPrices(id, newHistory);\r\n            await this.historyItemPrices.add(newItem, newItem.Id);\r\n\r\n            return;\r\n        }\r\n\r\n        // Else, update the history of the current item to include the new history\r\n        // Unshift (push to front) here because history is sorted by time descending,\r\n        // and the higher the time value, the newer it is.\r\n        item.History.unshift(...newHistory);\r\n        await this.historyItemPrices.update(id, {History: item.History});\r\n    }\r\n\r\n    async deleteOldPrices(id: number) {\r\n        const item = await this.historyItemPrices.get(id);\r\n        if (!item)\r\n            return;\r\n        \r\n        const currentPrices: ItemPriceSnapshot[] = [];\r\n        const now: Date = new Date();\r\n        const weekFromNow: number = now.setDate(now.getDate() - 7);\r\n        item.History.forEach(price => {\r\n            if (price.time >= weekFromNow)\r\n                currentPrices.push(price);\r\n        });\r\n\r\n        await this.historyItemPrices.update(id, {History: currentPrices});\r\n    }\r\n}\r\n\r\nexport default new LocalDB();","import { AuthenticationContext } from \"@axa-fr/react-oidc-context\";\r\nimport { User } from \"oidc-client\";\r\nimport React from \"react\";\r\nimport Scrollbar from \"react-scrollbars-custom\";\r\nimport ItemComparisonSlot from \"../components/ItemComparisonSlot\";\r\nimport ListSortingBar from \"../components/ListSortingBar\";\r\nimport SortingBar from \"../components/SortingBar\";\r\nimport { HistoryItemQuery } from \"../dataContracts/HistoryItemQuery\";\r\nimport { PricedItem } from \"../dataContracts/PricedItem\";\r\nimport ApiService from \"../services/ApiService\";\r\nimport LocalDB from \"../services/LocalDB\";\r\nimport { HistoryTimespan } from \"../utils/HistoryTimespan\";\r\nimport logo from \"../logo.svg\";\r\n\r\nexport type MyListProps = {\r\n    listId?: string;\r\n}\r\n\r\nexport type MyListState = {\r\n    id: string,\r\n    user: User | undefined;\r\n    items: PricedItem[];\r\n    timespan: HistoryTimespan;\r\n    isLoading: boolean;\r\n}\r\n\r\nexport default class MyList extends React.Component<MyListProps, MyListState> {\r\n    constructor(props: MyListProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            id: \"\",\r\n            user: undefined,\r\n            /*[19721, 46736, 46738, 46739, 72224, 9576, 24277, 67015],*/\r\n            items: [],\r\n            timespan: HistoryTimespan.OneWeek,\r\n            isLoading: false\r\n        };\r\n\r\n        this.updateId = this.updateId.bind(this);\r\n        this.setTimespan = this.setTimespan.bind(this);\r\n        this.getItems = this.getItems.bind(this);\r\n        this.deleteItem = this.deleteItem.bind(this);\r\n        this.onReload = this.onReload.bind(this);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.updateId();\r\n    }\r\n\r\n    async componentDidUpdate() {\r\n        await this.updateId();\r\n    }\r\n\r\n    async updateId() {\r\n        const { listId } = this.props;\r\n        const { id, timespan } = this.state;\r\n        if (listId && id !== listId)\r\n            this.setState({id: listId, items: [], isLoading: true}, async () => {\r\n                await this.setTimespan(timespan);\r\n            });\r\n    }\r\n\r\n    async setTimespan(timespan: HistoryTimespan) {\r\n        const items = await this.getItems(timespan);\r\n        this.setState({items, timespan, isLoading: false});\r\n    }\r\n\r\n    async getItems(timespan: HistoryTimespan): Promise<PricedItem[]> {\r\n        const { user, id } = this.state;\r\n\r\n        if (!user)\r\n            return [];\r\n\r\n        const ids = await ApiService.GetItemList(user.access_token, id);\r\n        if (!ids)\r\n            return [];\r\n\r\n        const historyItemQueries: HistoryItemQuery[] = [];\r\n        for (var i = 0; i < ids.length; i++) {\r\n            const id = ids[i];\r\n            const newest = await LocalDB.getNewestTime(id);\r\n            historyItemQueries.push(new HistoryItemQuery(id, newest));\r\n        }\r\n\r\n        const historyItems = await ApiService.GetHistoryItems(user.access_token, historyItemQueries);\r\n        if (!historyItems)\r\n            return [];\r\n\r\n        const pricedItems: PricedItem[] = [];\r\n        for (var i = 0; i < historyItems.length; i++) {\r\n            const item = historyItems[i];\r\n            await LocalDB.deleteOldPrices(item.Id);\r\n            await LocalDB.setHistoryItemPrices(item.Id, item.History);\r\n\r\n            const prices = await LocalDB.getHistoryItemPrices(item.Id, timespan);\r\n            if (!prices || prices.length <= 0) {\r\n                const pricedItem: PricedItem = {\r\n                    Id: item.Id,\r\n                    ChatLink: item.ChatLink,\r\n                    Name: item.Name,\r\n                    Icon: item.Icon,\r\n                    Description: item.Description,\r\n                    Type: item.Type,\r\n                    Rarity: item.Rarity,\r\n                    Level: item.Level,\r\n                \r\n                    BuyPrice: 0,\r\n                    SellPrice: 0,\r\n                    Appeal: 0,\r\n                    Margin: 0,\r\n                    Sold: 0,\r\n                    Bought: 0\r\n                };\r\n                pricedItems.push(pricedItem);\r\n\r\n                continue;\r\n            }\r\n            \r\n            const newestPrice = prices[0];\r\n            const buyPrice = newestPrice.buyPrice;\r\n            const sellPrice = newestPrice.sellPrice;\r\n            const margin = (sellPrice - buyPrice) / sellPrice * 100;\r\n            let sumSold: number = 0;\r\n            let sumBought: number = 0;\r\n            prices.forEach(price => {\r\n                sumSold += price.sold;\r\n                sumBought += price.bought;\r\n            });\r\n\r\n            const avgSold = sumSold / prices.length;\r\n            const avgBought = sumBought / prices.length;\r\n\r\n            const appeal = margin > 15 ? margin * avgSold * avgBought : 0;\r\n\r\n            const pricedItem: PricedItem = {\r\n                Id: item.Id,\r\n                ChatLink: item.ChatLink,\r\n                Name: item.Name,\r\n                Icon: item.Icon,\r\n                Description: item.Description,\r\n                Type: item.Type,\r\n                Rarity: item.Rarity,\r\n                Level: item.Level,\r\n            \r\n                BuyPrice: buyPrice,\r\n                SellPrice: sellPrice,\r\n                Appeal: appeal,\r\n                Margin: margin,\r\n                Sold: avgSold,\r\n                Bought: avgBought\r\n            };\r\n\r\n            pricedItems.push(pricedItem);\r\n        }\r\n\r\n        return pricedItems;\r\n    }\r\n\r\n    async deleteItem(itemId: number) {\r\n        const { id, user, items } = this.state;\r\n        if (!user)\r\n            return;\r\n\r\n        const result = await ApiService.DeleteListItem(user.access_token, id, itemId);\r\n        const tempItems = [...items];\r\n        if (result) {\r\n            const itemIndex = tempItems.findIndex(item => item.Id === itemId);\r\n            tempItems.splice(itemIndex, 1);\r\n            this.setState({items: tempItems});\r\n        }\r\n    }\r\n\r\n    async onReload() {\r\n        this.setState({isLoading: true, items: []}, async () => {\r\n            await this.setTimespan(this.state.timespan);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { user, items, timespan, isLoading } = this.state;\r\n\r\n        return (\r\n            <div className=\"main w-full px-4 py-4 bg-gray-800 text-gray-200\">\r\n                <AuthenticationContext.Consumer>\r\n                    {props => {\r\n                        if (props.oidcUser != null && !this.state.user)\r\n                            this.setState({user: props.oidcUser});\r\n                            \r\n                        if (user) {\r\n                            return(\r\n                                <ListSortingBar items={items} name=\"Tracked Items\" onReload={this.onReload}>\r\n                                    {sortedItems => (\r\n                                        <>\r\n                                            {(sortedItems.length > 0 && \r\n                                                <Scrollbar noScrollX style={{height: \"calc(100vh - 11rem)\"}}>\r\n                                                    {sortedItems.map((value, index) => (\r\n                                                        <div key={index} className=\"mb-2\">\r\n                                                            <ItemComparisonSlot item={value} deleteItem={this.deleteItem} />\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </Scrollbar>\r\n                                            ) || \r\n                                            (sortedItems.length <= 0 && !isLoading &&\r\n                                                <div className=\"flex justify-center\">\r\n                                                    No items found.\r\n                                                </div>\r\n                                            ) || \r\n                                            (sortedItems.length <= 0 && isLoading &&\r\n                                                <div className=\"flex flex-row items-center justify-center\">\r\n                                                    <img src={logo} alt=\"logo\" className=\"App-logo w-12\" />\r\n                                                    <span className=\"\">Loading items...</span>\r\n                                                </div>\r\n                                            )}\r\n                                        </>\r\n                                    )}\r\n                                </ListSortingBar>\r\n                            );\r\n                        }\r\n\r\n                        return(<>\r\n                            <ListSortingBar items={[]} name=\"Items\" onReload={async () => {}}>\r\n                                {sortedItems => (<></>)}\r\n                            </ListSortingBar>\r\n\r\n                            {/*\r\n                            <div className=\"\">\r\n                                Not logged in.\r\n                            </div>\r\n                            */}\r\n                        </>);\r\n                    }}\r\n                </AuthenticationContext.Consumer>\r\n                \r\n                {/*\r\n                <ItemComparisonSlot item={{ Id: 19721, Name: \"Glob of Ectoplasm\", Icon: \"https://render.guildwars2.com/file/18CE5D78317265000CF3C23ED76AB3CEE86BA60E/65941.png\", BuyPrice: 2022, SellPrice: 2232, Fee: Math.ceil(2232 * 0.15), AppealValue: 0, Margin: 0, TransactionRate: 0 }} />\r\n                <div className=\"block\">\r\n                    <div id=\"head\" className=\"\">\r\n                        <div className=\"flex flex-row flex-wrap\">\r\n                            <div className=\"font-bold\">Name</div>\r\n                            <div className=\"font-bold\">Buys</div>\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"body\" className=\"\">\r\n\r\n                    </div>\r\n                </div>\r\n                */}\r\n\r\n                {/*\r\n                <table className=\"table-fixed w-full\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th className=\"w-2/8\">Name</th>\r\n                            <th className=\"w-1/8\">Buys</th>\r\n                            <th className=\"w-1/8\">Sells</th>\r\n                            <th className=\"w-1/8\">Fee</th>\r\n                            <th className=\"w-1/8\">Appeal</th>\r\n                            <th className=\"w-1/8\">Margin</th>\r\n                            <th className=\"w-1/8\">Transaction Rate</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <ItemComparisonSlot item={{ Id: 19721, Name: \"Glob of Ectoplasm\", Icon: \"https://render.guildwars2.com/file/18CE5D78317265000CF3C23ED76AB3CEE86BA60E/65941.png\", BuyPrice: 2022, SellPrice: 2232, Fee: Math.ceil(2232 * 0.15), AppealValue: 0, Margin: 0, TransactionRate: 0 }} />\r\n                    </tbody>\r\n                </table>\r\n                */}\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\n\r\nexport default class Dashboard extends React.Component {\r\n    render() {\r\n        return(\r\n            <div className=\"w-full bg-gray-800 text-gray-200\"></div>\r\n        );\r\n    }\r\n}","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport Scrollbar from \"react-scrollbars-custom\";\r\nimport { PricedItem } from \"../dataContracts/PricedItem\";\r\nimport Price from \"./Price\";\r\n\r\nexport type ItemSummarySlotProps = {\r\n    item: PricedItem;\r\n    accessToken: string;\r\n}\r\n\r\nexport type ItemSummarySlotState = {\r\n    isDragging: boolean;\r\n    isAdding: boolean;\r\n}\r\n\r\nexport default class ItemSummarySlot extends React.Component<ItemSummarySlotProps, ItemSummarySlotState> {\r\n    private dragTarget: React.RefObject<HTMLDivElement>;\r\n    \r\n    constructor(props: ItemSummarySlotProps) {\r\n        super(props);\r\n\r\n        this.dragTarget = React.createRef();\r\n\r\n        this.state = {\r\n            isDragging: false,\r\n            isAdding: false\r\n        };\r\n\r\n        this.onDragStart = this.onDragStart.bind(this);\r\n        this.onDragEnd = this.onDragEnd.bind(this);\r\n        this.onAdd = this.onAdd.bind(this);\r\n    }\r\n\r\n    onDragStart(event: React.DragEvent<HTMLDivElement>) {\r\n        event.stopPropagation();\r\n        event.dataTransfer.setData(\"text\", this.props.item.Id.toString());\r\n\r\n        requestAnimationFrame(() => {\r\n            this.dragTarget.current?.classList.add(\"hide\");\r\n        });\r\n\r\n        this.setState({isDragging: true});\r\n    }\r\n\r\n    onDragEnd(event: React.DragEvent<HTMLDivElement>) {\r\n        this.dragTarget.current?.classList.remove(\"hide\");\r\n        this.setState({isDragging: false});\r\n    }\r\n\r\n    onAdd() {\r\n        this.setState(prevState => ({isAdding: !prevState.isAdding}));\r\n    }\r\n\r\n    render() {\r\n        const { item } = this.props;\r\n        const { isDragging, isAdding } = this.state;\r\n\r\n        return(\r\n            <div className=\"flex flex-row px-4 py-2 bg-gray-700\">\r\n                <div className=\"flex flex-row w-3/12 items-center mr-6\">\r\n                    <img src={item.Icon} alt={item.Name} className=\"mr-4 w-12 h-12\"/>\r\n                    <span className=\"italic text-gray-200\">{item.Name}</span>\r\n                </div>\r\n                <div className=\"flex flex-col w-2/12 items-center\">\r\n                    <label htmlFor=\"\" className=\"text-sm mb-1 font-bold text-gray-500\">Buys</label>\r\n                    <Price price={item.BuyPrice} />\r\n                </div>\r\n                <div className=\"flex flex-col w-2/12 items-center\">\r\n                    <label htmlFor=\"\" className=\"text-sm mb-1 font-bold text-gray-500\">Sells</label>\r\n                    <Price price={item.SellPrice} />\r\n                </div>\r\n                <div className=\"flex flex-col w-1/12 items-center\">\r\n                    <label htmlFor=\"\" className=\"text-sm mb-1 font-bold text-gray-500\">Margin</label>\r\n                    <span className={`${item.Margin > 15 ? \"text-green-500\" : \"text-red-500\"}`}>{item.Margin}%</span>\r\n                </div>\r\n                <div className=\"flex flex-col w-1/12 items-center\">\r\n                    <label htmlFor=\"\" className=\"text-sm mb-1 font-bold text-gray-500\">Sold</label>\r\n                    <span className=\"\">{item.Sold}</span>\r\n                </div>\r\n                <div className=\"flex flex-col w-1/12 items-center\">\r\n                    <label htmlFor=\"\" className=\"text-sm mb-1 font-bold text-gray-500\">Bought</label>\r\n                    <span className=\"\">{item.Bought}</span>\r\n                </div>\r\n                <div className=\"flex flex-col w-1/12 items-center\">\r\n                    <label htmlFor=\"\" className=\"text-sm mb-1 font-bold text-gray-500\">Appeal</label>\r\n                    <span className=\"\">{item.Appeal}</span>\r\n                </div>\r\n                <div className=\"flex flex-row w-1/12 items-center justify-center\">\r\n                    <div className=\"relative px-2 py-1 mr-3 rounded shadow-lg bg-gray-800 text-gray-300 cursor-move\"\r\n                        draggable\r\n                        onDragStart={this.onDragStart}\r\n                        onDragEnd={this.onDragEnd}>\r\n                        <FontAwesomeIcon icon=\"arrows-alt\" />\r\n                        <div ref={this.dragTarget} className={`${isDragging ? \"\" : \"hidden\"} absolute px-2 py-1 flex flex-row items-center justify-center w-32 h-12 rounded bg-gray-800`} style={{top: \"-0.25rem\", left: \"-2.75rem\"}}>\r\n                            <img src={item.Icon} alt={item.Name} className=\"mr-3 w-8 h-8 select-none\"/>\r\n                            <span className=\"italic text-sm truncate text-gray-300 select-none\">{item.Name}</span>\r\n                        </div>\r\n                    </div>\r\n                    {/*\r\n                    <div className=\"relative\">\r\n                        <button className=\"transition duration-150 ease-in-out px-3 py-2 rounded shadow-lg bg-green-700 text-green-300 hover:bg-green-800 hover:text-green-200\"\r\n                            onClick={this.onAdd}>\r\n                            <FontAwesomeIcon icon=\"plus\" />\r\n                        </button>\r\n                        <div className={`${isAdding ? \"\" : \"hidden\"} arrow-up absolute flex flex-col justify-center w-24 rounded bg-gray-900 text-gray-300`} style={{height: \"5.45rem\", top: \"3.25rem\", left: \"-1.875rem\"}}>\r\n                            <Scrollbar noScrollX>\r\n                                <div className=\"transition duration-150 ease-in-out px-2 py-1 text-sm rounded truncate hover:shadow-lg hover:bg-gray-600 select-none cursor-pointer\"\r\n                                    tabIndex={0}>\r\n                                    Testasdfasdfasdf\r\n                                </div>\r\n                                <div className=\"transition duration-150 ease-in-out px-2 py-1 text-sm rounded truncate hover:shadow-lg hover:bg-gray-600 select-none cursor-pointer\"\r\n                                    tabIndex={0}>\r\n                                    Testasdfasdfasdf\r\n                                </div>\r\n                                <div className=\"transition duration-150 ease-in-out px-2 py-1 text-sm rounded truncate hover:shadow-lg hover:bg-gray-600 select-none cursor-pointer\"\r\n                                    tabIndex={0}>\r\n                                    Test\r\n                                </div>\r\n                                <div className=\"transition duration-150 ease-in-out px-2 py-1 text-sm rounded truncate hover:shadow-lg hover:bg-gray-600 select-none cursor-pointer\"\r\n                                    tabIndex={0}>\r\n                                    Test\r\n                                </div>\r\n                            </Scrollbar>\r\n                        </div>\r\n                    </div>\r\n                    */}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import { AuthenticationContext } from \"@axa-fr/react-oidc-context\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { User } from \"oidc-client\";\r\nimport React from \"react\";\r\nimport { ItemQuery } from \"../dataContracts/ItemQuery\";\r\nimport { PricedItem } from \"../dataContracts/PricedItem\";\r\nimport ApiService from \"../services/ApiService\";\r\nimport { ItemField, ItemFieldSort } from \"../utils/ItemField\";\r\nimport { ItemRarity } from \"../utils/ItemRarity\";\r\nimport { ItemType } from \"../utils/ItemType\";\r\nimport RarityMultiSelect from \"./RarityMultiSelect\";\r\nimport TypeMultiSelect from \"./TypeMultiSelect\";\r\n\r\nexport type SortingBarProps = {\r\n    name: string;\r\n    onLoadingStart(): void;\r\n    onLoadingStop(): void;\r\n    children?: (sortedItems: PricedItem[]) => React.ReactNode | null;\r\n}\r\n\r\nexport type SortingBarState = {\r\n    user: User | undefined;\r\n    pendingQuery: ItemQuery;\r\n    currentQuery: ItemQuery;\r\n    filteredItems: PricedItem[];\r\n    isFilterOpen: boolean;\r\n    currentPage: number;\r\n    totalPages: number;\r\n}\r\n\r\nexport default class SortingBar extends React.Component<SortingBarProps, SortingBarState> {\r\n    constructor(props: SortingBarProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            user: undefined,\r\n            pendingQuery: new ItemQuery(),\r\n            currentQuery: new ItemQuery(),\r\n            filteredItems: [],\r\n            isFilterOpen: false,\r\n            currentPage: 1,\r\n            totalPages: 1\r\n        };\r\n\r\n        this.resetQueryValues = this.resetQueryValues.bind(this);\r\n        this.toggleFilter = this.toggleFilter.bind(this);\r\n        this.onFilterOpen = this.onFilterOpen.bind(this);\r\n        this.onFilterClose = this.onFilterClose.bind(this);\r\n        this.onFilter = this.onFilter.bind(this);\r\n        this.onSearch = this.onSearch.bind(this);\r\n        this.onToPage = this.onToPage.bind(this);\r\n        this.onFirstPage = this.onFirstPage.bind(this);\r\n        this.onLastPage = this.onLastPage.bind(this);\r\n        this.onNextPage = this.onNextPage.bind(this);\r\n        this.onPrevPage = this.onPrevPage.bind(this);\r\n\r\n        this.onNameChange = this.onNameChange.bind(this);\r\n        this.onTypeChange = this.onTypeChange.bind(this);\r\n        this.onRarityChange = this.onRarityChange.bind(this);\r\n        this.onMinLevelChange = this.onMinLevelChange.bind(this);\r\n        this.onMaxLevelChange = this.onMaxLevelChange.bind(this);\r\n        this.onMinBuyPriceChange = this.onMinBuyPriceChange.bind(this);\r\n        this.onMaxBuyPriceChange = this.onMaxBuyPriceChange.bind(this);\r\n        this.onMinSellPriceChange = this.onMinSellPriceChange.bind(this);\r\n        this.onMaxSellPriceChange = this.onMaxSellPriceChange.bind(this);\r\n        this.onSort = this.onSort.bind(this);\r\n        this.onSortDirection = this.onSortDirection.bind(this);\r\n    }\r\n\r\n    resetQueryValues() {\r\n        this.setState({pendingQuery: new ItemQuery()});\r\n    }\r\n\r\n    toggleFilter() {\r\n        const { isFilterOpen } = this.state;\r\n        if (isFilterOpen)\r\n            this.onFilterClose();\r\n        else\r\n            this.onFilterOpen();\r\n    }\r\n\r\n    onFilterOpen() {\r\n        this.setState({isFilterOpen: true});\r\n    }\r\n\r\n    onFilterClose() {\r\n        this.setState({isFilterOpen: false});\r\n    }\r\n\r\n    async onFilter() {\r\n        const { onLoadingStart, onLoadingStop } = this.props;\r\n        const { user, pendingQuery } = this.state;\r\n\r\n        if (!user)\r\n            return;\r\n\r\n        this.setState({filteredItems: []}, async () => {\r\n            const totalPages = await ApiService.GetItemPageCount(user.access_token, pendingQuery);\r\n            if (totalPages <= 0)\r\n                return;       \r\n    \r\n            onLoadingStart(); \r\n        \r\n            const items = await ApiService.GetItems(user.access_token, pendingQuery, 1) ?? [];\r\n            this.setState({filteredItems: items, currentQuery: pendingQuery, currentPage: 1, totalPages: totalPages}, onLoadingStop);\r\n        });\r\n    }\r\n\r\n    async onSearch(event: React.FormEvent<HTMLFormElement>) {\r\n        event.preventDefault();\r\n        const { onLoadingStart, onLoadingStop } = this.props;\r\n        const { user, pendingQuery } = this.state;\r\n\r\n        if (!user)\r\n            return;\r\n\r\n        const nameOnlyQuery = new ItemQuery({name: pendingQuery.name});\r\n        this.setState({filteredItems: []}, async () => {\r\n            const totalPages = await ApiService.GetItemPageCount(user.access_token, nameOnlyQuery);\r\n            if (totalPages <= 0)\r\n                return;  \r\n    \r\n            onLoadingStart();\r\n            \r\n            const items = await ApiService.GetItems(user.access_token, nameOnlyQuery, 1) ?? [];\r\n            this.setState({filteredItems: items, currentQuery: nameOnlyQuery, currentPage: 1, totalPages: totalPages}, onLoadingStop);\r\n        });\r\n    }\r\n\r\n    async onToPage(pageNumber: number) {\r\n        const { onLoadingStart, onLoadingStop } = this.props;\r\n        const { user, currentQuery, totalPages } = this.state;\r\n\r\n        if (!user)\r\n            return;\r\n\r\n        if (pageNumber <= 0 || pageNumber > totalPages)\r\n            return;\r\n\r\n        this.setState({filteredItems: []}, async () => {\r\n            onLoadingStart();\r\n    \r\n            const items = await ApiService.GetItems(user.access_token, currentQuery, pageNumber) ?? [];\r\n            this.setState({filteredItems: items, currentPage: pageNumber}, onLoadingStop);\r\n        });\r\n    }\r\n\r\n    async onFirstPage() {\r\n        await this.onToPage(1);\r\n    }\r\n\r\n    async onLastPage() {\r\n        const { totalPages } = this.state;\r\n        await this.onToPage(totalPages);\r\n    }\r\n\r\n    async onNextPage() {\r\n        const { onLoadingStart, onLoadingStop } = this.props;\r\n        const { user, currentQuery, currentPage, totalPages } = this.state;\r\n\r\n        if (!user)\r\n            return;\r\n\r\n        if (currentPage >= totalPages)\r\n            return;\r\n\r\n        \r\n        this.setState({filteredItems: []}, async () => {\r\n            onLoadingStart();\r\n    \r\n            const items = await ApiService.GetItems(user.access_token, currentQuery, currentPage + 1) ?? [];\r\n            this.setState({filteredItems: items, currentPage: currentPage + 1}, onLoadingStop);\r\n        });\r\n    }\r\n\r\n    async onPrevPage() {\r\n        const { onLoadingStart, onLoadingStop } = this.props;\r\n        const { user, currentQuery, currentPage } = this.state;\r\n\r\n        if (!user)\r\n            return;\r\n\r\n        if (currentPage <= 1)\r\n            return;\r\n\r\n        this.setState({filteredItems: []}, async () => {\r\n            onLoadingStart();\r\n            \r\n            const items = await ApiService.GetItems(user.access_token, currentQuery, currentPage - 1) ?? [];\r\n            this.setState({filteredItems: items, currentPage: currentPage - 1}, onLoadingStop);\r\n        });\r\n    }\r\n\r\n    onNameChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const value = event.target.value;\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            query.name = value;\r\n            return {pendingQuery: query};\r\n        });\r\n    }\r\n    \r\n    onTypeChange(newType: ItemType, callback?: (() => void) | undefined) {\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            query.type = newType;\r\n            return {pendingQuery: query};\r\n        }, callback);\r\n    }\r\n    \r\n    onRarityChange(newRarity: ItemRarity, callback?: (() => void) | undefined) {\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            query.rarity = newRarity;\r\n            return {pendingQuery: query};\r\n        }, callback);\r\n    }\r\n\r\n    onMinLevelChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        if (value > 80)\r\n            value = 80;\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            if (value > query.maxLevel)\r\n                return {pendingQuery: query};\r\n\r\n            query.minLevel = value;\r\n            return {pendingQuery: query};\r\n        });\r\n    }\r\n\r\n    onMaxLevelChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        if (value > 80)\r\n            value = 80;\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            if (value < query.minLevel)\r\n                return {pendingQuery: query};\r\n\r\n            query.maxLevel = value;\r\n            return {pendingQuery: query};\r\n        });\r\n    }\r\n\r\n    onMinBuyPriceChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            query.minBuyPrice = value;\r\n            return {pendingQuery: query};\r\n        });\r\n    }\r\n\r\n    onMaxBuyPriceChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            query.maxBuyPrice = value;\r\n            return {pendingQuery: query};\r\n        });\r\n    }\r\n\r\n    onMinSellPriceChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            query.minSellPrice = value;\r\n            return {pendingQuery: query};\r\n        });\r\n    }\r\n\r\n    onMaxSellPriceChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        let value = parseInt(event.target.value ?? \"0\");\r\n        if (value < 0)\r\n            value = 0;\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            query.maxSellPrice = value;\r\n            return {pendingQuery: query};\r\n        });\r\n    }\r\n\r\n    onSort(event: React.ChangeEvent<HTMLSelectElement>) {\r\n        const value = event.target.value;\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            query.sortBy = parseInt(value) as ItemField;\r\n            return {pendingQuery: query};\r\n        }, this.onFilter);\r\n    }\r\n\r\n    onSortDirection() {\r\n        this.setState(prevState => {\r\n            const query = prevState.pendingQuery;\r\n            query.sortDirection = query.sortDirection === ItemFieldSort.Ascending ? ItemFieldSort.Descending : ItemFieldSort.Ascending;\r\n            return {pendingQuery: query};\r\n        }, this.onFilter);\r\n    }\r\n\r\n    render() {\r\n        const { name, children } = this.props;\r\n        const { pendingQuery, filteredItems, isFilterOpen, currentPage, totalPages } = this.state;\r\n\r\n        const isSortAscending: boolean = pendingQuery.sortDirection === ItemFieldSort.Ascending;\r\n        const pageNums: number[] = [];\r\n        \r\n        for (var i = currentPage < 5 ? 1 : currentPage - 4; \r\n            i <= ((currentPage + 4) <= totalPages ? currentPage + 4 : totalPages); \r\n            i++) {\r\n            pageNums.push(i);\r\n        }\r\n\r\n        return(\r\n            <>\r\n                <div className=\"flex flex-row justify-between items-center px-4 py-2 mb-4 bg-gray-900 text-gray-500\">\r\n                    <AuthenticationContext.Consumer>\r\n                        {props => {\r\n                            if (props.oidcUser != null && !this.state.user)\r\n                                this.setState({user: props.oidcUser}, this.onFilter);\r\n\r\n                            return(\r\n                                <></>\r\n                            );\r\n                        }}\r\n                    </AuthenticationContext.Consumer>\r\n                    <span className=\"\">{name}</span>\r\n                    <div className=\"flex items-center\">\r\n                        <form className=\"flex flex-row mr-4\"\r\n                            onSubmit={this.onSearch}>\r\n                            <input type=\"text\" className=\"pl-2 rounded-l bg-gray-600 text-gray-200\"\r\n                                value={pendingQuery.name}\r\n                                onChange={this.onNameChange} />\r\n                            <button className=\"transition duration-150 ease-in-out flex items-center px-2 rounded-r bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\">\r\n                                <FontAwesomeIcon icon=\"search\" className=\"mr-1 text-xs\" />\r\n                                <span className=\"text-xs\">Search</span>\r\n                            </button>\r\n                        </form>\r\n                        <label htmlFor=\"\" className=\"mr-2 text-sm\">Sort By</label>\r\n                        <select name=\"\" id=\"\" className=\"pl-2 rounded-l h-6 text-sm bg-gray-700 text-gray-300\" \r\n                            value={pendingQuery.sortBy} \r\n                            onChange={this.onSort}>\r\n                            <option value={ItemField.Name} className=\"\">{ItemField[ItemField.Name]}</option>\r\n                            <option value={ItemField.Buys} className=\"\">{ItemField[ItemField.Buys]}</option>\r\n                            <option value={ItemField.Sells} className=\"\">{ItemField[ItemField.Sells]}</option>\r\n                            <option value={ItemField.Appeal} className=\"\">{ItemField[ItemField.Appeal]}</option>\r\n                            <option value={ItemField.Margin} className=\"\">{ItemField[ItemField.Margin]}</option>\r\n                            <option value={ItemField.Sold} className=\"\">{ItemField[ItemField.Sold]}</option>\r\n                            <option value={ItemField.Bought} className=\"\">{ItemField[ItemField.Bought]}</option>\r\n                        </select>\r\n                        <button className=\"transition duration-150 ease-in-out px-2 mr-4 rounded-r border-l border-gray-800 bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\"\r\n                            onClick={this.onSortDirection}>\r\n                            {(isSortAscending && pendingQuery.sortBy !== ItemField.Name &&\r\n                                <FontAwesomeIcon icon=\"sort-numeric-up\" />\r\n                            ) ||\r\n                            (!isSortAscending && pendingQuery.sortBy !== ItemField.Name &&\r\n                                <FontAwesomeIcon icon=\"sort-numeric-down-alt\" />\r\n                            ) ||\r\n                            (isSortAscending && pendingQuery.sortBy === ItemField.Name &&\r\n                                <FontAwesomeIcon icon=\"sort-alpha-up\" />\r\n                            ) ||\r\n                            (!isSortAscending && pendingQuery.sortBy === ItemField.Name &&\r\n                                <FontAwesomeIcon icon=\"sort-alpha-down-alt\" />\r\n                            )}\r\n                        </button>\r\n                        <div className=\"relative\">\r\n                            <button className=\"transition duration-150 ease-in-out mr-4 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\" style={{padding: \"0.20rem 0.5rem\"}}\r\n                                onClick={this.toggleFilter}>\r\n                                <FontAwesomeIcon icon=\"filter\" className=\"mr-1 text-xs\" />\r\n                                <span className=\"text-xs\">Filter</span>\r\n                            </button>\r\n                            {(isFilterOpen && \r\n                                <div className=\"absolute flex flex-col px-3 py-3 w-64 filter-arrow-up rounded shadow-lg bg-gray-900\" style={{height: \"21.7rem\", top: \"2.75rem\", right: \"0rem\", zIndex: 100}}>\r\n                                    <div className=\"mb-2 flex flex-row\">\r\n                                        <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Name</label>\r\n                                        <input type=\"text\" className=\"w-full px-2 rounded-r bg-gray-600 text-gray-200\"\r\n                                            value={pendingQuery.name}\r\n                                            onChange={this.onNameChange} />\r\n                                    </div>\r\n                                    <div className=\"mb-2 flex flex-row\">\r\n                                        <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Type</label>\r\n                                        <TypeMultiSelect type={pendingQuery.type} onChange={this.onTypeChange} />\r\n                                    </div>\r\n                                    <div className=\"mb-2 flex flex-row\">\r\n                                        <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Rarity</label>\r\n                                        <RarityMultiSelect rarity={pendingQuery.rarity} onChange={this.onRarityChange} />\r\n                                    </div>\r\n                                    <div className=\"mb-2 flex flex-col\">\r\n                                        <span className=\"mb-1 text-sm\">Level</span>\r\n                                        <div className=\"flex flex-row\">\r\n                                            <div className=\"mr-1 flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Min</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={pendingQuery.minLevel}\r\n                                                    onChange={this.onMinLevelChange} />\r\n                                            </div>\r\n                                            <div className=\"flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Max</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={pendingQuery.maxLevel}\r\n                                                    onChange={this.onMaxLevelChange} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"mb-2 flex flex-col\">\r\n                                        <span className=\"mb-1 text-sm\">Buy Price</span>\r\n                                        <div className=\"flex flex-row\">\r\n                                            <div className=\"mr-1 flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Min</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={pendingQuery.minBuyPrice}\r\n                                                    onChange={this.onMinBuyPriceChange} />\r\n                                            </div>\r\n                                            <div className=\"flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Max</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={pendingQuery.maxBuyPrice}\r\n                                                    onChange={this.onMaxBuyPriceChange} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"mb-4 flex flex-col\">\r\n                                        <span className=\"mb-1 text-sm\">Sell Price</span>\r\n                                        <div className=\"flex flex-row\">\r\n                                            <div className=\"mr-1 flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Min</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={pendingQuery.minSellPrice}\r\n                                                    onChange={this.onMinSellPriceChange} />\r\n                                            </div>\r\n                                            <div className=\"flex flex-row\">\r\n                                                <label htmlFor=\"\" className=\"px-2 py-1 rounded-l text-xs bg-gray-700 text-gray-300\">Max</label>\r\n                                                <input type=\"number\" className=\"w-full px-2 rounded-r text-sm bg-gray-600 text-gray-200\"\r\n                                                    value={pendingQuery.maxSellPrice}\r\n                                                    onChange={this.onMaxSellPriceChange} />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex flex-row justify-between\">\r\n                                        <div className=\"\">\r\n                                            <button className=\"transition duration-150 ease-in-out px-2 py-1 rounded text-sm bg-red-700 text-red-300 hover:shadow-lg hover:bg-red-800 hover:text-red-200\"\r\n                                                onClick={this.resetQueryValues}>\r\n                                                Reset\r\n                                            </button>\r\n                                        </div>\r\n                                        <div className=\"flex flex-row-reverse\">\r\n                                            <button className=\"transition duration-150 ease-in-out ml-2 px-2 py-1 rounded text-sm bg-indigo-700 text-indigo-300 hover:shadow-lg hover:bg-indigo-800 hover:text-indigo-200\"\r\n                                                onClick={async () => {\r\n                                                    await this.onFilter(); \r\n                                                    this.onFilterClose();\r\n                                                }}>\r\n                                                Filter\r\n                                            </button>\r\n                                            <button className=\"transition duration-150 ease-in-out px-2 py-1 rounded text-sm bg-gray-700 text-gray-300 hover:shadow-lg hover:bg-gray-800 hover:text-gray-200\"\r\n                                                onClick={this.onFilterClose}>\r\n                                                Cancel\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <button className=\"transition duration-150 ease-in-out flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\" style={{padding: \"0.3rem 0.5rem\"}}\r\n                            onClick={this.onFilter}>\r\n                            <FontAwesomeIcon icon=\"redo-alt\" className=\"text-sm\" />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                {children != null ? children(filteredItems): null}\r\n                {totalPages > 0 && (\r\n                    <div className=\"mt-4 flex flex-row-reverse w-full\">\r\n                        <div className=\"flex flex-row\">\r\n                            <button className=\"transition duration-150 ease-in-out mr-4 px-2 py-1 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\"\r\n                                onClick={this.onFirstPage}>\r\n                                <FontAwesomeIcon icon=\"angle-double-left\" className=\"mr-1 text-xs\" />\r\n                                <span className=\"\">First</span>\r\n                            </button>\r\n                            <button className=\"transition duration-150 ease-in-out mr-4 px-2 py-1 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\"\r\n                                onClick={this.onPrevPage}>\r\n                                <FontAwesomeIcon icon=\"arrow-left\" className=\"mr-1 text-xs\" />\r\n                                <span className=\"\">Prev</span>\r\n                            </button>\r\n                            {pageNums.map((value, index) => (\r\n                                <button key={index} disabled={currentPage === value} \r\n                                    className={`transition duration-150 ease-in-out mr-4 px-2 py-1 flex items-center rounded ${currentPage === value ? \"bg-gray-900 text-gray-200 cursor-default\" : \"bg-gray-700 text-gray-300 hover:bg-gray-900 hover:text-gray-200 hover:shadow-lg\"}`}\r\n                                    onClick={() => this.onToPage(value)}>\r\n                                    {value}\r\n                                </button>\r\n                            ))}\r\n                            <button className=\"transition duration-150 ease-in-out mr-4 px-2 py-1 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\"\r\n                                onClick={this.onNextPage}>\r\n                                <span className=\"mr-1\">Next</span>\r\n                                <FontAwesomeIcon icon=\"arrow-right\" className=\"text-xs\" />\r\n                            </button>\r\n                            <button className=\"transition duration-150 ease-in-out px-2 py-1 flex items-center rounded bg-gray-700 text-gray-300 hover:bg-gray-800 hover:text-gray-200 hover:shadow-lg\"\r\n                                onClick={this.onLastPage}>\r\n                                <span className=\"mr-1\">Last</span>\r\n                                <FontAwesomeIcon icon=\"angle-double-right\" className=\"text-xs\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n}","import { AuthenticationContext } from \"@axa-fr/react-oidc-context\";\r\nimport { faDivide } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { User } from \"oidc-client\";\r\nimport React from \"react\";\r\nimport Scrollbar from \"react-scrollbars-custom\";\r\nimport ItemSummarySlot from \"../components/ItemSummarySlot\";\r\nimport SortingBar from \"../components/SortingBar\";\r\nimport { PricedItem } from \"../dataContracts/PricedItem\";\r\nimport { ItemRarity } from \"../utils/ItemRarity\";\r\nimport { ItemType } from \"../utils/ItemType\";\r\nimport logo from \"../logo.svg\";\r\n\r\nexport type GeneralSearchProps = {\r\n\r\n}\r\n\r\nexport type GeneralSearchState = {\r\n    user: User | undefined;\r\n    isLoading: boolean;\r\n}\r\n\r\nexport default class GeneralSearch extends React.Component<GeneralSearchProps, GeneralSearchState> {\r\n    constructor(props: GeneralSearchProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            user: undefined,\r\n            isLoading: false\r\n        };\r\n\r\n        this.onLoadingStart = this.onLoadingStart.bind(this);\r\n        this.onLoadingStop = this.onLoadingStop.bind(this);\r\n    }\r\n\r\n    onLoadingStart() {\r\n        this.setState({isLoading: true});\r\n    }\r\n\r\n    onLoadingStop() {\r\n        this.setState({isLoading: false});\r\n    }\r\n\r\n    render() {\r\n        const { user, isLoading } = this.state;\r\n\r\n        const item: PricedItem = {\r\n            Id: 27328,\r\n            ChatLink: \"\",\r\n            Name: \"Ebonblade\",\r\n            Description: \"\",\r\n            Icon: \"https://render.guildwars2.com/file/F7B7ECFA56A55434245E4D311516A2C7771204B4/780577.png\",\r\n            Type: ItemType.Weapon,\r\n            Rarity: ItemRarity.Exotic,\r\n            Level: 0,\r\n            Sold: 0,\r\n            Bought: 0,\r\n            Margin: 0,\r\n            Appeal: 0,\r\n            BuyPrice: 0,\r\n            SellPrice: 0\r\n        };\r\n\r\n        return(\r\n            <div className=\"main w-full px-4 py-4 bg-gray-800 text-gray-200\">\r\n                <AuthenticationContext.Consumer>\r\n                    {props => {\r\n                        if (props.oidcUser != null && !this.state.user)\r\n                            this.setState({user: props.oidcUser});\r\n\r\n                        if (user) {\r\n                            return(\r\n                                <SortingBar name=\"Results\" onLoadingStart={this.onLoadingStart} onLoadingStop={this.onLoadingStop}>\r\n                                    {sortedItems => (\r\n                                        <>\r\n                                            {(sortedItems.length > 0 && \r\n                                                <Scrollbar noScrollX style={{height: \"calc(100vh - 14rem)\"}}>\r\n                                                    {sortedItems.map((value, index) => (\r\n                                                        <div key={index} className=\"mb-2\">\r\n                                                            <ItemSummarySlot item={value} accessToken={user.access_token} />\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </Scrollbar>\r\n                                            ) || \r\n                                            (sortedItems.length <= 0 && !isLoading &&\r\n                                                <div className=\"\">\r\n                                                    No items found.\r\n                                                </div>\r\n                                            ) || \r\n                                            (sortedItems.length <= 0 && isLoading &&\r\n                                                <div className=\"flex flex-row items-center justify-center\">\r\n                                                    <img src={logo} alt=\"logo\" className=\"App-logo w-12\" />\r\n                                                    <span className=\"\">Loading items...</span>\r\n                                                </div>\r\n                                            )}\r\n                                        </>\r\n                                    )}\r\n                                </SortingBar>\r\n                            );\r\n                        }\r\n\r\n                        return(\r\n                            <div className=\"\">\r\n                                Not logged in.\r\n                            </div>\r\n                        );\r\n                    }}\r\n                </AuthenticationContext.Consumer>\r\n            </div>\r\n        );\r\n    }\r\n}","import environment from \"./environment\";\r\n\r\nconst configuration = {\r\n    client_id: \"gw2_calculator_app\",\r\n    response_type: \"id_token token\",\r\n    scope: \"openid email roles profile gw2calculator\",\r\n    automaticSilentRenew: true,\r\n    loadUserInfo: true,\r\n    authority: environment.urls.authority,\r\n    redirect_uri: `${environment.urls.host}/authentication/callback`,\r\n    post_logout_redirect_uri: `${environment.urls.host}/`,\r\n    silent_redirect_uri: `${environment.urls.host}/authentication/silent_callback`\r\n};\r\n\r\nexport default configuration;","import { AuthenticationContext } from \"@axa-fr/react-oidc-context\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class Header extends React.Component {\r\n    render() {\r\n        return(\r\n            <header className=\"\" style={{boxShadow: \"0 10px 15px -3px rgba(0, 0, 0, 0.2)\", zIndex: 100}}>\r\n                <AuthenticationContext.Consumer>\r\n                    {props => {\r\n                        return(\r\n                            <div className=\"flex justify-between items-center px-4 bg-indigo-700 text-indigo-200\">\r\n                                <div className=\"flex flex-row items-center\">\r\n                                    <Link className=\"transition duration-150 ease-in-out mr-6 text-lg font-bold hover:text-indigo-100\"\r\n                                        to=\"/\">\r\n                                        GW2 Calculator\r\n                                    </Link>\r\n                                    <Link className=\"transition duration-150 ease-in-out mr-3 py-5 px-2 hover:bg-indigo-600 hover:text-indigo-100\"\r\n                                        to=\"/\">\r\n                                        Dashboard\r\n                                    </Link>\r\n                                    <Link className=\"transition duration-150 ease-in-out mr-3 py-5 px-2 hover:bg-indigo-600 hover:text-indigo-100\"\r\n                                        to=\"/search\">\r\n                                        Search\r\n                                    </Link>\r\n                                    <Link className=\"transition duration-150 ease-in-out mr-3 py-5 px-2 hover:bg-indigo-600 hover:text-indigo-100\"\r\n                                        to=\"/list\">\r\n                                        My List\r\n                                    </Link>\r\n                                </div>\r\n\r\n                                {props.oidcUser && (\r\n                                    <div className=\"\">\r\n                                        <span className=\"mr-4\">Hello, {props.oidcUser.profile.name}!</span>\r\n                                        <button className=\"transition duration-150 ease-in-out px-4 py-1 bg-indigo-800 hover:shadow-lg hover:bg-indigo-900 hover:text-indigo-100\"\r\n                                            onClick={() => props.logout()}>\r\n                                            Logout\r\n                                        </button>\r\n                                    </div>\r\n                                ) ||\r\n                                (!props.oidcUser && (\r\n                                    <div className=\"\">\r\n                                        <button className=\"transition duration-150 ease-in-out px-4 py-1 bg-indigo-800 hover:shadow-lg hover:bg-indigo-900 hover:text-indigo-100\"\r\n                                            onClick={() => props.login()}>\r\n                                            Login\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        );\r\n                    }}\r\n                </AuthenticationContext.Consumer>\r\n            </header>\r\n        );\r\n    }\r\n}","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ItemList } from \"../dataContracts/ItemList\";\r\nimport environment from \"../environment\";\r\nimport ApiService from \"../services/ApiService\";\r\nimport CustomLink from \"./CustomLink\";\r\n\r\nexport type AddItemListSlotProps = {\r\n    onAddItemList(name: string): Promise<void>;\r\n}\r\n\r\nexport type AddItemListSlotState = {\r\n    isAdding: boolean;\r\n    name: string;\r\n}\r\n\r\nexport default class AddItemListSlot extends React.Component<AddItemListSlotProps, AddItemListSlotState> {\r\n    constructor(props: AddItemListSlotProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isAdding: false,\r\n            name: \"\"\r\n        };\r\n\r\n        this.onAddItemListStart = this.onAddItemListStart.bind(this);\r\n        this.onAddItemListStop = this.onAddItemListStop.bind(this);\r\n        this.onAddItemList = this.onAddItemList.bind(this);\r\n    }\r\n\r\n    onAddItemListStart(event: React.MouseEvent<HTMLDivElement, MouseEvent>) {\r\n        event.stopPropagation();\r\n        this.setState({isAdding: true});\r\n    }\r\n\r\n    onAddItemListStop(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\r\n        event.stopPropagation();\r\n        this.setState({isAdding: false});\r\n    }\r\n\r\n    async onAddItemList(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\r\n        event.stopPropagation();\r\n        const { onAddItemList } = this.props;\r\n        const { name } = this.state;\r\n        if (!name)\r\n            return;\r\n        \r\n        await onAddItemList(name);\r\n        this.setState({isAdding: false});\r\n    }\r\n\r\n    render() {\r\n        const { isAdding, name } = this.state;\r\n\r\n        return(\r\n            <div className=\"transition duration-150 ease-in-out flex flex-row items-center justify-between mx-2 border-2 border-dashed rounded-lg border-indigo-700 bg-opacity-0 bg-indigo-700 text-indigo-300 hover:bg-opacity-100 hover:text-indigo-200 cursor-pointer\"\r\n                tabIndex={0}\r\n                onClick={this.onAddItemListStart}>\r\n                {(!isAdding && \r\n                    <div className=\"px-4 py-3\">\r\n                        <div className=\"pointer-events-none select-none\">\r\n                            <FontAwesomeIcon icon=\"plus\" className=\"mr-3\" />\r\n                            Add New List...\r\n                        </div>\r\n                    </div>\r\n                ) || \r\n                (isAdding && \r\n                    <div className=\"px-2 py-3 flex flex-row\">\r\n                        <input type=\"text\" className=\"px-2 mr-1 w-2/3 rounded bg-indigo-400 text-indigo-900\" \r\n                            value={name} \r\n                            onClick={event => event.stopPropagation()}\r\n                            onChange={event => this.setState({name: event.target.value})} />\r\n                        <div className=\"flex flex-row\">\r\n                            <button className=\"transition duration-150 ease-in-out px-2 mr-1 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200\" style={{paddingTop: \"0.35rem\", paddingBottom: \"0.35rem\"}}\r\n                                onClick={this.onAddItemList}>\r\n                                <FontAwesomeIcon className=\"text-xs\" icon=\"check\" />\r\n                            </button>\r\n                            <button className=\"transition duration-150 ease-in-out px-2 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200\"\r\n                                onClick={this.onAddItemListStop}>\r\n                                <FontAwesomeIcon className=\"text-xs\" icon=\"times\" />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nexport interface CustomLinkProps extends React.HTMLAttributes<HTMLElement> {\r\n    to: string;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nexport default function CustomLink(props: CustomLinkProps) {\r\n    const { push } = useHistory();\r\n    const { to, children, ...rest } = props;\r\n    return(\r\n        <div onClick={() => push(to)} {...rest}>\r\n            {children}\r\n        </div>\r\n    );\r\n}","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ItemList } from \"../dataContracts/ItemList\";\r\nimport environment from \"../environment\";\r\nimport ApiService from \"../services/ApiService\";\r\nimport CustomLink from \"./CustomLink\";\r\n\r\nexport type ItemListSlotProps = {\r\n    itemList: ItemList;\r\n    onDrop(id: string, itemId: number): Promise<void>;\r\n    onEditName(id: string, name: string): Promise<void>;\r\n    onDeleteList(id: string): Promise<void>;\r\n}\r\n\r\nexport type ItemListSlotState = {\r\n    isMouseHover: boolean;\r\n    isDragHover: boolean;\r\n    isEditing: boolean;\r\n    newName: string;\r\n}\r\n\r\nexport default class ItemListSlot extends React.Component<ItemListSlotProps, ItemListSlotState> {\r\n    constructor(props: ItemListSlotProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isMouseHover: false,\r\n            isDragHover: false,\r\n            isEditing: false,\r\n            newName: props.itemList.name\r\n        };\r\n\r\n        this.onMouseEnter = this.onMouseEnter.bind(this);\r\n        this.onMouseLeave = this.onMouseLeave.bind(this);\r\n        this.onDragEnter = this.onDragEnter.bind(this);\r\n        this.onDragOver = this.onDragOver.bind(this);\r\n        this.onDragLeave = this.onDragLeave.bind(this);\r\n        this.onDrop = this.onDrop.bind(this);\r\n\r\n        this.onEditNameStart = this.onEditNameStart.bind(this);\r\n        this.onEditNameStop = this.onEditNameStop.bind(this);\r\n        this.onEditName = this.onEditName.bind(this);\r\n        this.onDeleteList = this.onDeleteList.bind(this);\r\n    }\r\n\r\n    onMouseEnter() {\r\n        this.setState({isMouseHover: true});\r\n    }\r\n\r\n    onMouseLeave() {\r\n        this.setState({isMouseHover: false});\r\n    }\r\n\r\n    async onDragEnter(event: React.DragEvent<HTMLDivElement>) {\r\n        event.preventDefault();\r\n        this.setState({isDragHover: true});\r\n    }\r\n\r\n    onDragOver(event: React.DragEvent<HTMLDivElement>) {\r\n        event.preventDefault();\r\n    }\r\n\r\n    async onDragLeave(event: React.DragEvent<HTMLDivElement>) {\r\n        event.preventDefault();\r\n        this.setState({isDragHover: false});\r\n    }\r\n\r\n    async onDrop(event: React.DragEvent<HTMLDivElement>) {\r\n        event.preventDefault();\r\n        const { itemList, onDrop } = this.props;\r\n        const itemId = parseInt(event.dataTransfer.getData(\"text\"));\r\n        await onDrop(itemList.id, itemId);\r\n        this.setState({isDragHover: false});\r\n    }\r\n\r\n    onEditNameStart(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\r\n        event.stopPropagation();\r\n        this.setState({isEditing: true, newName: this.props.itemList.name});\r\n    }\r\n\r\n    onEditNameStop(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\r\n        event.stopPropagation();\r\n        this.setState({isEditing: false});\r\n    }\r\n\r\n    async onEditName(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\r\n        event.stopPropagation();\r\n        const { itemList, onEditName } = this.props;\r\n        const { newName } = this.state;\r\n        if (!newName)\r\n            return;\r\n\r\n        await onEditName(itemList.id, newName);\r\n        this.setState({isEditing: false});\r\n    }\r\n\r\n    async onDeleteList(event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\r\n        event.stopPropagation();\r\n        const { itemList, onDeleteList } = this.props;\r\n        await onDeleteList(itemList.id);\r\n    }\r\n\r\n    render() {\r\n        const { itemList } = this.props;\r\n        const { isMouseHover, isDragHover, isEditing, newName } = this.state;\r\n\r\n        return(\r\n            <CustomLink className={`transition duration-150 ease-in-out flex flex-row items-center justify-between px-4 py-3 bg-opacity-25 ${isDragHover ? \"bg-green-700 text-green-300\" : \"bg-indigo-700 text-indigo-300\"} hover:bg-opacity-100 hover:text-indigo-200 cursor-pointer`}\r\n                to={`/list/${itemList.id}`}\r\n                onMouseEnter={this.onMouseEnter}\r\n                onMouseLeave={this.onMouseLeave}\r\n                onDragEnter={this.onDragEnter}\r\n                onDragOver={this.onDragOver}\r\n                onDragLeave={this.onDragLeave}\r\n                onDrop={this.onDrop}>\r\n                {(!isEditing && \r\n                    <>\r\n                        <span className=\"truncate pointer-events-none select-none\">{itemList.name}</span>\r\n                        <div className={`${isMouseHover ? \"\" : \"hidden\"} flex flex-row`}>\r\n                            <button className=\"transition duration-150 ease-in-out px-2 mr-1 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200\" style={{paddingTop: \"0.35rem\", paddingBottom: \"0.35rem\"}}\r\n                                onClick={this.onEditNameStart}>\r\n                                <FontAwesomeIcon className=\"text-xs\" icon=\"pencil-alt\" />\r\n                            </button>\r\n                            <button className=\"transition duration-150 ease-in-out px-2 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200\"\r\n                                onClick={this.onDeleteList}>\r\n                                <FontAwesomeIcon className=\"text-xs\" icon=\"trash-alt\" />\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n                ) || \r\n                (isEditing && \r\n                    <>\r\n                        <input type=\"text\" className=\"px-2 w-2/3 rounded bg-indigo-400 text-indigo-900\" \r\n                            value={newName} \r\n                            onClick={event => event.stopPropagation()}\r\n                            onChange={event => this.setState({newName: event.target.value})} />\r\n                        <div className={`${isMouseHover ? \"\" : \"hidden\"} flex flex-row`}>\r\n                            <button className=\"transition duration-150 ease-in-out px-2 mr-1 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200\" style={{paddingTop: \"0.35rem\", paddingBottom: \"0.35rem\"}}\r\n                                onClick={this.onEditName}>\r\n                                <FontAwesomeIcon className=\"text-xs\" icon=\"check\" />\r\n                            </button>\r\n                            <button className=\"transition duration-150 ease-in-out px-2 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200\"\r\n                                onClick={this.onEditNameStop}>\r\n                                <FontAwesomeIcon className=\"text-xs\" icon=\"times\" />\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </CustomLink>\r\n        );\r\n    }\r\n}","import { AuthenticationContext } from \"@axa-fr/react-oidc-context\";\r\nimport { User } from \"oidc-client\";\r\nimport React from \"react\";\r\nimport Scrollbar from \"react-scrollbars-custom\";\r\nimport { ItemList } from \"../dataContracts/ItemList\";\r\nimport ApiService from \"../services/ApiService\";\r\nimport AddItemListSlot from \"./AddItemListSlot\";\r\nimport ItemListSlot from \"./ItemListSlot\";\r\n\r\nexport type SidebarProps = {\r\n\r\n}\r\n\r\nexport type SidebarState = {\r\n    user: User | undefined;\r\n    itemLists: ItemList[];\r\n}\r\n\r\nexport default class Sidebar extends React.Component<SidebarProps, SidebarState> {\r\n    constructor(props: SidebarProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            user: undefined,\r\n            itemLists: []\r\n        };\r\n\r\n        this.refreshItemLists = this.refreshItemLists.bind(this);\r\n\r\n        this.onAddItem = this.onAddItem.bind(this);\r\n        this.onEditName = this.onEditName.bind(this);\r\n        this.onAddList = this.onAddList.bind(this);\r\n        this.onDeleteList = this.onDeleteList.bind(this);\r\n    }\r\n\r\n    async refreshItemLists() {\r\n        const { user } = this.state;\r\n        if (!user)\r\n            return;\r\n\r\n        const itemLists = await ApiService.GetItemLists(user.access_token);\r\n        if (!itemLists)\r\n            return;\r\n\r\n        this.setState({itemLists});\r\n    }\r\n\r\n    async onAddItem(id: string, itemId: number) {\r\n        const { user } = this.state;\r\n        if (!user)\r\n            return;\r\n\r\n        await ApiService.AddListItem(user.access_token, id, itemId);\r\n    }\r\n\r\n    async onEditName(id: string, name: string) {\r\n        const { user, itemLists } = this.state;\r\n        if (!user)\r\n            return;\r\n\r\n        const result = await ApiService.UpdateListName(user.access_token, id, name);\r\n        if (result) {\r\n            const index = itemLists.findIndex(list => list.id === id);\r\n            itemLists[index].name = name;\r\n            this.setState({itemLists});\r\n        }\r\n    }\r\n\r\n    async onAddList(name: string) {\r\n        const { user, itemLists } = this.state;\r\n        if (!user)\r\n            return;\r\n\r\n        const result = await ApiService.CreateList(user.access_token, name);\r\n        if (result) {\r\n            const itemList: ItemList = {\r\n                id: result,\r\n                name: name\r\n            };\r\n            itemLists.push(itemList);\r\n            this.setState({itemLists});\r\n        }\r\n    }\r\n\r\n    async onDeleteList(id: string) {\r\n        const { user, itemLists } = this.state;\r\n        if (!user)\r\n            return;\r\n\r\n        const result = await ApiService.DeleteList(user.access_token, id);\r\n        if (result) {\r\n            const index = itemLists.findIndex(list => list.id === id);\r\n            itemLists.splice(index, 1);\r\n            this.setState({itemLists});\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { itemLists, user } = this.state;\r\n\r\n        return(\r\n            <div className=\"sidebar hidden py-4 xl:flex xl:w-1/4 bg-gray-900\" style={{width: \"16rem\"}}>\r\n                <AuthenticationContext.Consumer>\r\n                    {props => {\r\n                        if (props.oidcUser != null && !this.state.user)\r\n                            this.setState({user: props.oidcUser}, () => {\r\n                                this.refreshItemLists();\r\n                            });\r\n                        if (user) {\r\n                            return(\r\n                                <Scrollbar noScrollX>\r\n                                    {itemLists.map((itemList, index) => (\r\n                                        <div key={index} className=\"mb-2\">\r\n                                            <ItemListSlot itemList={itemList} onDrop={this.onAddItem} onEditName={this.onEditName} onDeleteList={this.onDeleteList} />\r\n                                        </div>\r\n                                    ))}\r\n                                    <div className=\"w-full flex flex-col\">\r\n                                        <AddItemListSlot onAddItemList={this.onAddList} />\r\n                                    </div>\r\n                                </Scrollbar>\r\n                            );\r\n                        }\r\n\r\n                        return(<>\r\n                            <Scrollbar noScrollX>\r\n                                <div className=\"w-full flex flex-col\">\r\n                                    <AddItemListSlot onAddItemList={this.onAddList} />\r\n                                </div>\r\n                            </Scrollbar>\r\n                        </>);\r\n                    }}\r\n                </AuthenticationContext.Consumer>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport logo from \"./logo.svg\";\r\nimport \"./App.css\";\r\nimport \"./assets/main.css\";\r\nimport MyList from \"./pages/MyList\";\r\nimport Dashboard from \"./pages/Dashboard\";\r\nimport GeneralSearch from \"./pages/GeneralSearch\";\r\nimport { BrowserRouter, Redirect, Route, Switch, useParams } from \"react-router-dom\";\r\nimport { AuthenticationProvider, withOidcSecure } from \"@axa-fr/react-oidc-context\";\r\nimport configuration from \"./open-id-config\";\r\nimport Header from \"./components/Header\";\r\nimport { config } from \"process\";\r\nimport Sidebar from \"./components/Sidebar\";\r\n\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { fas } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nlibrary.add(fas);\r\n\r\nfunction App() {\r\n    const afterLogin = () => (\r\n        <div className=\"flex justify-center items-center w-screen h-screen bg-gray-700 text-gray-100\">\r\n            <div className=\"flex flex-row items-center\">\r\n                <img src={logo} alt=\"logo\" className=\"App-logo w-12\" />\r\n                <span className=\"\">Logging in...</span>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const afterLogout = () => (\r\n        <div className=\"flex justify-center items-center w-screen h-screen bg-gray-700 text-gray-100\">\r\n            <div className=\"flex flex-row items-center\">\r\n                <img src={logo} alt=\"logo\" className=\"App-logo w-12\" />\r\n                <span className=\"\">Logging out...</span>\r\n            </div>\r\n        </div>\r\n    );\r\n    \r\n    return(\r\n        <div className=\"flex flex-col\">\r\n            <BrowserRouter>\r\n                <AuthenticationProvider configuration={configuration}\r\n                    callbackComponentOverride={afterLogin}\r\n                    authenticating={afterLogout}>\r\n                    <Header />\r\n                    <Redirect path=\"/authentication/callback\" to=\"/\" />\r\n                    <div className=\"flex flex-row\" style={{height: \"calc(100vh - 4rem)\"}}>\r\n                        <Switch>\r\n                            <Route exact path=\"/\" component={Dashboard} />\r\n                            <Route path=\"/search\" component={GeneralSearch} />\r\n                            <Route exact path=\"/list\" component={MyList} />\r\n                            <Route path=\"/list/:id\" component={MyListComponent} />\r\n                        </Switch>\r\n                        <Sidebar />\r\n                    </div>\r\n                </AuthenticationProvider>\r\n            </BrowserRouter>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction MyListComponent() {\r\n    const { id } = useParams();\r\n\r\n    return(\r\n        <MyList listId={id} />\r\n    );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}