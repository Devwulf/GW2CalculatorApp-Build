(this["webpackJsonpgw2-calculator"]=this["webpackJsonpgw2-calculator"]||[]).push([[0],{32:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},49:function(e,t,a){e.exports=a(89)},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),i=a.n(s),o=(a(54),a(32)),c=a.n(o),l=(a(55),a(56),a(25)),u=a(2),m=a.n(u),d=a(3),p=a(5),h=a(6),f=a(4),v=a(9),g=a(8),x=a(14),b=a(18),y=a(7),E=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.price,a=e.priceColor,n=t<0,s=Math.abs(t),i=Math.floor(s/1e4),o=Math.floor(s%1e4/100),c=Math.floor(s%1e4%100);return r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{id:"gold",className:"mr-1 flex flex-row items-center"},r.a.createElement(y.a,{icon:"minus",className:"".concat(n?"":"hidden"," ").concat(a," mr-1"),style:{fontSize:"0.5rem"}}),r.a.createElement("img",{src:"https://wiki.guildwars2.com/images/d/d1/Gold_coin.png",alt:"Gold Coin",className:"mr-1 w-4 h-4"}),r.a.createElement("span",{className:"text-sm ".concat(a)},i)),r.a.createElement("div",{id:"silver",className:"mr-1 flex flex-row items-center"},r.a.createElement("img",{src:"https://wiki.guildwars2.com/images/3/3c/Silver_coin.png",alt:"Silver Coin",className:"mr-1 w-4 h-4"}),r.a.createElement("span",{className:"text-sm ".concat(a)},o)),r.a.createElement("div",{id:"copper",className:"mr-1 flex flex-row items-center"},r.a.createElement("img",{src:"https://wiki.guildwars2.com/images/e/eb/Copper_coin.png",alt:"Copper Coin",className:"mr-1 w-4 h-4"}),r.a.createElement("span",{className:"text-sm ".concat(a)},c)))}}]),a}(r.a.Component);E.defaultProps={price:0,priceColor:"text-gray-200"};var N,k,w=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={amount:1},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.deleteItem,s=this.state.amount,i=Math.round(a.SellPrice*s),o=Math.round(a.BuyPrice*s),c=Math.round(.15*a.SellPrice)*s,l=i-o-c;return r.a.createElement("div",{className:"flex flex-row px-4 py-2 bg-gray-700"},r.a.createElement("div",{className:"flex flex-row w-2/8 items-center mr-6"},r.a.createElement("img",{src:a.Icon,alt:a.Name,className:"mr-4 w-12 h-12"}),r.a.createElement("span",{className:"italic text-gray-200"},a.Name)),r.a.createElement("div",{className:"flex flex-col xl:flex-row w-5/12 items-center"},r.a.createElement("div",{className:"flex flex-row xl:mr-4"},r.a.createElement("div",{className:"flex flex-col items-center mr-4"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 text-gray-500"},"Amount"),r.a.createElement("input",{type:"number",className:"w-16 px-1 text-sm bg-gray-600 text-gray-200",defaultValue:1,onChange:function(t){var a=parseInt(t.target.value);console.log(a),null==a||isNaN(a)||e.setState({amount:a})}})),r.a.createElement("div",{className:"flex flex-col items-center"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Net Profit"),r.a.createElement(E,{price:l,priceColor:"".concat(l<0?"text-red-500":"text-green-500")}))),r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{className:"flex flex-col items-center mr-4"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 text-gray-500"},"Buys"),r.a.createElement(E,{price:o})),r.a.createElement("div",{className:"flex flex-col items-center mr-4"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 text-gray-500"},"Sells"),r.a.createElement(E,{price:i})),r.a.createElement("div",{className:"flex flex-col items-center"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 text-gray-500"},"Fees"),r.a.createElement(E,{price:c})))),r.a.createElement("div",{className:"w-2/8"},r.a.createElement("div",{className:"flex flex-col xl:flex-row justify-evenly w-full h-full"},r.a.createElement("div",{className:"flex flex-row xl:flex-col items-center xl:mr-4"},r.a.createElement("label",{htmlFor:"",className:"text-sm mr-4 xl:mr-0 xl:mb-1 font-bold text-gray-500"},"Appeal"),r.a.createElement("span",{className:"text-gray-200"},a.Appeal.toFixed(2))),r.a.createElement("div",{className:"flex flex-row xl:flex-col items-center xl:mr-4"},r.a.createElement("label",{htmlFor:"",className:"text-sm mr-4 xl:mr-0 xl:mb-1 text-gray-500"},"Margin"),r.a.createElement("span",{className:a.Margin<15?"text-red-500":"text-green-500"},a.Margin.toFixed(2),"%")),r.a.createElement("div",{className:"flex flex-row xl:flex-col items-center xl:mr-4"},r.a.createElement("label",{htmlFor:"",className:"text-sm mr-4 xl:mr-0 xl:mb-1 text-gray-500"},"Sold"),r.a.createElement("span",{className:"text-gray-200"},a.Sold.toFixed(2))),r.a.createElement("div",{className:"flex flex-row xl:flex-col items-center xl:mr-4"},r.a.createElement("label",{htmlFor:"",className:"text-sm mr-4 xl:mr-0 xl:mb-1 text-gray-500"},"Bought"),r.a.createElement("span",{className:"text-gray-200"},a.Bought.toFixed(2))))),r.a.createElement("div",{className:"flex flex-row w-1/12 items-center justify-center"},r.a.createElement("button",{className:"transition duration-150 ease-in-out px-3 py-1 rounded shadow-lg bg-red-700 text-red-300 hover:bg-red-800 hover:text-red-200",onClick:function(){return n(a.Id)}},r.a.createElement(y.a,{icon:"trash-alt"}))))}}]),a}(r.a.Component);!function(e){e[e.Name=0]="Name",e[e.Buys=1]="Buys",e[e.Sells=2]="Sells",e[e.Appeal=3]="Appeal",e[e.Margin=4]="Margin",e[e.Sold=5]="Sold",e[e.Bought=6]="Bought"}(N||(N={})),function(e){e[e.Ascending=0]="Ascending",e[e.Descending=1]="Descending"}(k||(k={}));var O,j=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={sortBy:N.Appeal,sortDirection:k.Descending,searchStr:""},n.onSort=n.onSort.bind(Object(f.a)(n)),n.onSortDirection=n.onSortDirection.bind(Object(f.a)(n)),n}return Object(h.a)(a,[{key:"onSort",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.target.value),console.log(t.target.value),a=parseInt(t.target.value),this.setState({sortBy:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSortDirection",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.sortDirection,a=t===k.Ascending?k.Descending:k.Ascending,this.setState({sortDirection:a});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.items,s=t.onReload,i=t.children,o=this.state,c=o.sortBy,l=o.sortDirection,u=o.searchStr,m=l===k.Ascending,d=n.sort((function(e,t){return c===N.Name?m?e.Name.toLowerCase().localeCompare(t.Name.toLowerCase()):t.Name.toLowerCase().localeCompare(e.Name.toLowerCase()):c===N.Appeal?m?e.Appeal-t.Appeal:t.Appeal-e.Appeal:c===N.Margin?m?e.Margin-t.Margin:t.Margin-e.Margin:c===N.Sold?m?e.Sold-t.Sold:t.Sold-e.Sold:c===N.Bought?m?e.Bought-t.Bought:t.Bought-e.Bought:c===N.Buys?m?e.BuyPrice-t.BuyPrice:t.BuyPrice-e.BuyPrice:c===N.Sells?m?e.SellPrice-t.SellPrice:t.SellPrice-e.SellPrice:0}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-row justify-between items-center px-4 py-2 mb-4 bg-gray-900 text-gray-500"},r.a.createElement("span",{className:""},a),r.a.createElement("div",{className:"flex items-center"},r.a.createElement("form",{className:"flex flex-row mr-4",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{type:"text",className:"pl-2 rounded-l bg-gray-600 text-gray-200",value:u,onChange:function(t){return e.setState({searchStr:t.target.value})}}),r.a.createElement("button",{className:"flex items-center px-2 rounded-r bg-gray-700 text-gray-300"},r.a.createElement(y.a,{icon:"search",className:"mr-1 text-xs"}),r.a.createElement("span",{className:"text-xs"},"Search"))),r.a.createElement("label",{htmlFor:"",className:"mr-2 text-sm"},"Sort By"),r.a.createElement("select",{name:"",id:"",className:"pl-2 rounded-l h-6 text-sm bg-gray-700 text-gray-300",value:c,onChange:this.onSort},r.a.createElement("option",{value:N.Name,className:""},N[N.Name]),r.a.createElement("option",{value:N.Buys,className:""},N[N.Buys]),r.a.createElement("option",{value:N.Sells,className:""},N[N.Sells]),r.a.createElement("option",{value:N.Appeal,className:""},N[N.Appeal]),r.a.createElement("option",{value:N.Margin,className:""},N[N.Margin]),r.a.createElement("option",{value:N.Sold,className:""},N[N.Sold]),r.a.createElement("option",{value:N.Bought,className:""},N[N.Bought])),r.a.createElement("button",{className:"px-2 mr-4 rounded-r border-l border-gray-800 bg-gray-700 text-gray-300",onClick:this.onSortDirection},m&&c!==N.Name&&r.a.createElement(y.a,{icon:"sort-numeric-up"})||!m&&c!==N.Name&&r.a.createElement(y.a,{icon:"sort-numeric-down-alt"})||m&&c===N.Name&&r.a.createElement(y.a,{icon:"sort-alpha-up"})||!m&&c===N.Name&&r.a.createElement(y.a,{icon:"sort-alpha-down-alt"})),r.a.createElement("button",{className:"flex items-center rounded bg-gray-700 text-gray-300",style:{padding:"0.20rem 0.5rem"},onClick:s},r.a.createElement(y.a,{icon:"redo-alt",className:"text-xs"})))),null!=i?i(d):null)}}]),a}(r.a.Component),S=function(){function e(t,a){Object(p.a)(this,e),this.id=void 0,this.newest=void 0,this.id=t,this.newest=null!==a&&void 0!==a?a:0}return Object(h.a)(e,[{key:"toObject",value:function(){return{id:this.id.toString(),newest:this.newest.toString()}}}]),e}(),I=function e(t,a){Object(p.a)(this,e),this.Id=void 0,this.History=void 0,this.Id=t,this.History=a},D=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"ToHistoryItem",value:function(e){try{return{Id:e.id,ChatLink:e.chatLink,Name:e.name,Icon:e.icon,Description:e.description,Type:parseInt(e.type),Rarity:parseInt(e.rarity),Level:e.level,History:e.history}}catch(t){return console.log(t),null}}},{key:"ToHistoryItems",value:function(t){var a=[];return t.forEach((function(t){var n=e.ToHistoryItem(t);null!=n&&a.push(n)})),a}}]),e}(),L=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"ToPricedItem",value:function(e){try{return{Id:e.id,ChatLink:e.chatLink,Name:e.name,Icon:e.icon,Description:e.description,Type:parseInt(e.type),Rarity:parseInt(e.rarity),Level:e.level,BuyPrice:e.buyPrice,SellPrice:e.sellPrice,Appeal:parseFloat(parseFloat(e.appeal).toFixed(2)),Margin:parseFloat(parseFloat(e.margin).toFixed(2)),Sold:parseFloat(parseFloat(e.sold).toFixed(2)),Bought:parseFloat(parseFloat(e.bought).toFixed(2))}}catch(t){return console.log(t),null}}},{key:"ToPricedItems",value:function(t){var a=[];return t.forEach((function(t){var n=e.ToPricedItem(t);null!=n&&a.push(n)})),a}}]),e}(),P={urls:{authority:"https://auth.devwulfcodes.com",host:"https://gw2.devwulfcodes.com",gw2calculator:"https://gw2.devwulfcodes.com/api"}},A=new(function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,[{key:"GetItems",value:function(){var t=Object(d.a)(m.a.mark((function t(a,n,r){var s,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=P.urls.gw2calculator+"/item/pricedItems?"+new URLSearchParams(n.toObject())+"&pageNumber=".concat(r),t.next=3,e.Get(s,a);case 3:return i=t.sent,t.next=6,i.json();case 6:if(o=t.sent,!i.ok){t.next=9;break}return t.abrupt("return",L.ToPricedItems(o));case 9:return console.log(o),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"GetItemsWithIds",value:function(){var t=Object(d.a)(m.a.mark((function t(a,n,r){var s,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=P.urls.gw2calculator+"/item/pricedItems",t.next=3,e.Post(s,a,{ids:n,pageNumber:r});case 3:return i=t.sent,t.next=6,i.json();case 6:if(o=t.sent,!i.ok){t.next=9;break}return t.abrupt("return",L.ToPricedItems(o));case 9:return console.log(o),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"GetHistoryItems",value:function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r,s,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=P.urls.gw2calculator+"/item/historyItems",t.next=3,e.Post(r,a,n);case 3:return s=t.sent,t.next=6,s.json();case 6:if(i=t.sent,!s.ok){t.next=9;break}return t.abrupt("return",D.ToHistoryItems(i));case 9:return console.log(i),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"GetItemLists",value:function(){var t=Object(d.a)(m.a.mark((function t(a){var n,r,s,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=P.urls.gw2calculator+"/list/getLists",t.next=3,e.Get(n,a);case 3:return r=t.sent,t.next=6,r.json();case 6:if(s=t.sent,!r.ok){t.next=12;break}return i=s.itemLists,o=[],i.forEach((function(e){var t={id:e.id,name:e.name};o.push(t)})),t.abrupt("return",o);case 12:return console.log(s),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"GetItemList",value:function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r,s,i,o,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=P.urls.gw2calculator+"/list/getList/"+n,t.next=3,e.Get(r,a);case 3:return s=t.sent,t.next=6,s.json();case 6:if(i=t.sent,!s.ok){t.next=12;break}return o=i.itemIds,c=[],o.forEach((function(e){var t=parseInt(e);c.push(t)})),t.abrupt("return",c);case 12:return console.log(i),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"CreateList",value:function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r,s,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=P.urls.gw2calculator+"/list/createList",t.next=3,e.Post(r,a,{name:n});case 3:return s=t.sent,t.next=6,s.json();case 6:if(i=t.sent,!s.ok){t.next=9;break}return t.abrupt("return",i.listId);case 9:return console.log(i),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"UpdateListName",value:function(){var t=Object(d.a)(m.a.mark((function t(a,n,r){var s,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=P.urls.gw2calculator+"/list/updateName",t.next=3,e.Post(s,a,{id:n,name:r});case 3:if(!(i=t.sent).ok){t.next=6;break}return t.abrupt("return",!0);case 6:return t.next=8,i.json();case 8:return o=t.sent,console.log(o),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"AddListItem",value:function(){var t=Object(d.a)(m.a.mark((function t(a,n,r){var s,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=P.urls.gw2calculator+"/list/addItem",t.next=3,e.Post(s,a,{id:n,itemId:r});case 3:if(!(i=t.sent).ok){t.next=6;break}return t.abrupt("return",!0);case 6:return t.next=8,i.json();case 8:return o=t.sent,console.log(o),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"DeleteListItem",value:function(){var t=Object(d.a)(m.a.mark((function t(a,n,r){var s,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=P.urls.gw2calculator+"/list/deleteItem",t.next=3,e.Post(s,a,{id:n,itemId:r});case 3:if(!(i=t.sent).ok){t.next=6;break}return t.abrupt("return",!0);case 6:return t.next=8,i.json();case 8:return o=t.sent,console.log(o),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"DeleteList",value:function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r,s,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=P.urls.gw2calculator+"/list/deleteList",t.next=3,e.Post(r,a,{id:n});case 3:if(!(s=t.sent).ok){t.next=6;break}return t.abrupt("return",!0);case 6:return t.next=8,s.json();case 8:return i=t.sent,console.log(i),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}],[{key:"Get",value:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"Post",value:function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:n?JSON.stringify(n):void 0}));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}()),C=a(45);!function(e){e[e.OneHour=0]="OneHour",e[e.SixHours=1]="SixHours",e[e.TwelveHours=2]="TwelveHours",e[e.OneDay=3]="OneDay",e[e.ThreeDays=4]="ThreeDays",e[e.OneWeek=5]="OneWeek"}(O||(O={}));var B,T,M=new(function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this,"GW2History")).historyItemPrices=void 0,e.version(1).stores({historyItemPrices:"Id"}),e.open().catch((function(t){console.error("Opening the db '".concat(e.name,"' failed: ").concat(t))})),e.historyItemPrices=e.table("historyItemPrices"),e.historyItemPrices.mapToClass(I),e}return Object(h.a)(a,[{key:"getHistoryItemPrices",value:function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.historyItemPrices.get(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:if(a!==O.OneWeek){e.next=7;break}return e.abrupt("return",n.History);case 7:r=[],s=new Date,e.t0=a,e.next=e.t0===O.OneHour?12:e.t0===O.SixHours?14:e.t0===O.TwelveHours?16:e.t0===O.OneDay?18:e.t0===O.ThreeDays?20:22;break;case 12:return i=s.setDate(s.getTime()-36e5),e.abrupt("break",24);case 14:return i=s.setDate(s.getTime()-216e5),e.abrupt("break",24);case 16:return i=s.setDate(s.getTime()-432e5),e.abrupt("break",24);case 18:return i=s.setDate(s.getDate()-1),e.abrupt("break",24);case 20:return i=s.setDate(s.getDate()-3),e.abrupt("break",24);case 22:return i=s.setDate(s.getDate()-7),e.abrupt("break",24);case 24:return n.History.forEach((function(e){e.time>=i&&r.push(e)})),e.abrupt("return",r);case 26:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getNewestTime",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHistoryItemPrices(t,O.OneWeek);case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return",0);case 5:return e.abrupt("return",a[0].time);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setHistoryItemPrices",value:function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.historyItemPrices.get(t);case 2:if(r=e.sent){e.next=8;break}return s=new I(t,a),e.next=7,this.historyItemPrices.add(s,s.Id);case 7:return e.abrupt("return");case 8:return(n=r.History).unshift.apply(n,Object(l.a)(a)),e.next=11,this.historyItemPrices.update(t,{History:r.History});case 11:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteOldPrices",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.historyItemPrices.get(t);case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:return n=[],r=new Date,s=r.setDate(r.getDate()-7),a.History.forEach((function(e){e.time>=s&&n.push(e)})),e.next=11,this.historyItemPrices.update(t,{History:n});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(C.a)),F=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={id:"",user:void 0,items:[],timespan:O.OneWeek},n.updateId=n.updateId.bind(Object(f.a)(n)),n.setTimespan=n.setTimespan.bind(Object(f.a)(n)),n.getItems=n.getItems.bind(Object(f.a)(n)),n.deleteItem=n.deleteItem.bind(Object(f.a)(n)),n.onReload=n.onReload.bind(Object(f.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateId();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateId();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateId",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n,r,s=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.listId,a=this.state,n=a.id,r=a.timespan,t&&n!==t&&this.setState({id:t},Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.setTimespan(r);case 2:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTimespan",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getItems(t);case 2:a=e.sent,this.setState({items:a,timespan:t});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getItems",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,s,i,o,c,l,u,d,p,h,f,v,g,x,b,y,E,N,k,w,O;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.user,r=a.id,n){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,A.GetItemList(n.access_token,r);case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return",[]);case 8:i=[],o=0;case 10:if(!(o<s.length)){e.next=19;break}return c=s[o],e.next=14,M.getNewestTime(c);case 14:l=e.sent,i.push(new S(c,l));case 16:o++,e.next=10;break;case 19:return e.next=21,A.GetHistoryItems(n.access_token,i);case 21:if(u=e.sent){e.next=24;break}return e.abrupt("return",[]);case 24:d=[],o=0;case 26:if(!(o<u.length)){e.next=54;break}return p=u[o],e.next=30,M.deleteOldPrices(p.Id);case 30:return e.next=32,M.setHistoryItemPrices(p.Id,p.History);case 32:return e.next=34,M.getHistoryItemPrices(p.Id,t);case 34:if((h=e.sent)&&!(h.length<=0)){e.next=39;break}return f={Id:p.Id,ChatLink:p.ChatLink,Name:p.Name,Icon:p.Icon,Description:p.Description,Type:p.Type,Rarity:p.Rarity,Level:p.Level,BuyPrice:0,SellPrice:0,Appeal:0,Margin:0,Sold:0,Bought:0},d.push(f),e.abrupt("continue",51);case 39:v=h[0],g=v.buyPrice,x=v.sellPrice,b=(x-g)/x*100,y=0,E=0,h.forEach((function(e){y+=e.sold,E+=e.bought})),N=y/h.length,k=E/h.length,w=b>15?b*N*k:0,O={Id:p.Id,ChatLink:p.ChatLink,Name:p.Name,Icon:p.Icon,Description:p.Description,Type:p.Type,Rarity:p.Rarity,Level:p.Level,BuyPrice:g,SellPrice:x,Appeal:w,Margin:b,Sold:N,Bought:k},d.push(O);case 51:o++,e.next=26;break;case 54:return e.abrupt("return",d);case 55:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteItem",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,s,i,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.id,r=a.user,s=a.items,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A.DeleteListItem(r.access_token,n,t);case 5:i=e.sent,o=Object(l.a)(s),i&&(c=o.findIndex((function(e){return e.Id===t})),o.splice(c,1),this.setState({items:o}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onReload",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setTimespan(this.state.timespan);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.items;t.timespan;return r.a.createElement("div",{className:"main w-full px-4 py-4 bg-gray-800 text-gray-200"},r.a.createElement(x.AuthenticationContext.Consumer,null,(function(t){return null==t.oidcUser||e.state.user||e.setState({user:t.oidcUser}),a?r.a.createElement(j,{items:n,name:"Tracked Items",onReload:e.onReload},(function(t){return r.a.createElement(r.a.Fragment,null,t.length>0&&r.a.createElement(b.a,{noScrollX:!0,style:{height:"calc(100vh - 11rem)"}},t.map((function(t,a){return r.a.createElement("div",{key:a,className:"mb-2"},r.a.createElement(w,{item:t,deleteItem:e.deleteItem}))})))||t.length<=0&&r.a.createElement("div",{className:""},"No items found."))})):r.a.createElement("div",{className:""},"Not logged in.")})))}}]),a}(r.a.Component),H=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"w-full bg-gray-800 text-gray-200"})}}]),a}(r.a.Component),_=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).dragTarget=void 0,n.dragTarget=r.a.createRef(),n.state={isDragging:!1,isAdding:!1},n.onDragStart=n.onDragStart.bind(Object(f.a)(n)),n.onDragEnd=n.onDragEnd.bind(Object(f.a)(n)),n.onAdd=n.onAdd.bind(Object(f.a)(n)),n}return Object(h.a)(a,[{key:"onDragStart",value:function(e){var t=this;e.stopPropagation(),e.dataTransfer.setData("text",this.props.item.Id.toString()),requestAnimationFrame((function(){var e;null===(e=t.dragTarget.current)||void 0===e||e.classList.add("hide")})),this.setState({isDragging:!0})}},{key:"onDragEnd",value:function(e){var t;null===(t=this.dragTarget.current)||void 0===t||t.classList.remove("hide"),this.setState({isDragging:!1})}},{key:"onAdd",value:function(){this.setState((function(e){return{isAdding:!e.isAdding}}))}},{key:"render",value:function(){var e=this.props.item,t=this.state,a=t.isDragging;t.isAdding;return r.a.createElement("div",{className:"flex flex-row px-4 py-2 bg-gray-700"},r.a.createElement("div",{className:"flex flex-row w-3/12 items-center mr-6"},r.a.createElement("img",{src:e.Icon,alt:e.Name,className:"mr-4 w-12 h-12"}),r.a.createElement("span",{className:"italic text-gray-200"},e.Name)),r.a.createElement("div",{className:"flex flex-col w-2/12 items-center"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Buys"),r.a.createElement(E,{price:e.BuyPrice})),r.a.createElement("div",{className:"flex flex-col w-2/12 items-center"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Sells"),r.a.createElement(E,{price:e.SellPrice})),r.a.createElement("div",{className:"flex flex-col w-1/12 items-center"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Margin"),r.a.createElement("span",{className:"".concat(e.Margin>15?"text-green-500":"text-red-500")},e.Margin,"%")),r.a.createElement("div",{className:"flex flex-col w-1/12 items-center"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Sold"),r.a.createElement("span",{className:""},e.Sold)),r.a.createElement("div",{className:"flex flex-col w-1/12 items-center"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Bought"),r.a.createElement("span",{className:""},e.Bought)),r.a.createElement("div",{className:"flex flex-col w-1/12 items-center"},r.a.createElement("label",{htmlFor:"",className:"text-sm mb-1 font-bold text-gray-500"},"Appeal"),r.a.createElement("span",{className:""},e.Appeal)),r.a.createElement("div",{className:"flex flex-row w-1/12 items-center justify-center"},r.a.createElement("div",{className:"relative px-2 py-1 mr-3 rounded shadow-lg bg-gray-800 text-gray-300 cursor-move",draggable:!0,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},r.a.createElement(y.a,{icon:"arrows-alt"}),r.a.createElement("div",{ref:this.dragTarget,className:"".concat(a?"":"hidden"," absolute px-2 py-1 flex flex-row items-center justify-center w-32 h-12 rounded bg-gray-800"),style:{top:"-0.25rem",left:"-2.75rem"}},r.a.createElement("img",{src:e.Icon,alt:e.Name,className:"mr-3 w-8 h-8 select-none"}),r.a.createElement("span",{className:"italic text-sm truncate text-gray-300 select-none"},e.Name)))))}}]),a}(r.a.Component);!function(e){e[e.None=0]="None",e[e.Junk=1]="Junk",e[e.Basic=2]="Basic",e[e.Fine=4]="Fine",e[e.Masterwork=8]="Masterwork",e[e.Rare=16]="Rare",e[e.Exotic=32]="Exotic",e[e.Ascended=64]="Ascended",e[e.Legendary=128]="Legendary",e[e.All=255]="All"}(B||(B={})),function(e){e[e.None=0]="None",e[e.Armor=1]="Armor",e[e.Back=2]="Back",e[e.Bag=4]="Bag",e[e.Consumable=8]="Consumable",e[e.Container=16]="Container",e[e.CraftingMaterial=32]="CraftingMaterial",e[e.Gathering=64]="Gathering",e[e.Gizmo=128]="Gizmo",e[e.Key=256]="Key",e[e.MiniPet=512]="MiniPet",e[e.Tool=1024]="Tool",e[e.Trait=2048]="Trait",e[e.Trinket=4096]="Trinket",e[e.Trophy=8192]="Trophy",e[e.UpgradeComponent=16384]="UpgradeComponent",e[e.Weapon=32768]="Weapon",e[e.All=65535]="All"}(T||(T={}));var G=function(){function e(t){var a,n,r,s,i,o,c,l,u,m,d;Object(p.a)(this,e),this.name=void 0,this.type=void 0,this.rarity=void 0,this.minLevel=void 0,this.maxLevel=void 0,this.minBuyPrice=void 0,this.maxBuyPrice=void 0,this.minSellPrice=void 0,this.maxSellPrice=void 0,this.sortBy=void 0,this.sortDirection=void 0,this.name=null!==(a=null===t||void 0===t?void 0:t.name)&&void 0!==a?a:"",this.type=null!==(n=null===t||void 0===t?void 0:t.type)&&void 0!==n?n:T.All,this.rarity=null!==(r=null===t||void 0===t?void 0:t.rarity)&&void 0!==r?r:B.All,this.minLevel=null!==(s=null===t||void 0===t?void 0:t.minLevel)&&void 0!==s?s:0,this.maxLevel=null!==(i=null===t||void 0===t?void 0:t.maxLevel)&&void 0!==i?i:80,this.minBuyPrice=null!==(o=null===t||void 0===t?void 0:t.minBuyPrice)&&void 0!==o?o:0,this.maxBuyPrice=null!==(c=null===t||void 0===t?void 0:t.maxBuyPrice)&&void 0!==c?c:1e8,this.minSellPrice=null!==(l=null===t||void 0===t?void 0:t.minSellPrice)&&void 0!==l?l:1e4,this.maxSellPrice=null!==(u=null===t||void 0===t?void 0:t.maxSellPrice)&&void 0!==u?u:1e8,this.sortBy=null!==(m=null===t||void 0===t?void 0:t.sortBy)&&void 0!==m?m:N.Appeal,this.sortDirection=null!==(d=null===t||void 0===t?void 0:t.sortDirection)&&void 0!==d?d:k.Descending}return Object(h.a)(e,[{key:"toObject",value:function(){return{name:this.name,type:this.type.valueOf().toString(),rarity:this.rarity.valueOf().toString(),minLevel:this.minLevel.toString(),maxLevel:this.maxLevel.toString(),minBuyPrice:this.minBuyPrice.toString(),maxBuyPrice:this.maxBuyPrice.toString(),minSellPrice:this.minSellPrice.toString(),maxSellPrice:this.maxSellPrice.toString(),sortBy:this.sortBy.valueOf().toString(),sortDirection:this.sortDirection.valueOf().toString()}}}]),e}(),R=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={user:void 0,items:[],sortBy:N.Appeal,sortDirection:k.Descending,searchStr:""},n.updateItems=n.updateItems.bind(Object(f.a)(n)),n.onSearch=n.onSearch.bind(Object(f.a)(n)),n.onSort=n.onSort.bind(Object(f.a)(n)),n.onSortDirection=n.onSortDirection.bind(Object(f.a)(n)),n.getItems=n.getItems.bind(Object(f.a)(n)),n}return Object(h.a)(a,[{key:"updateItems",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getItems();case 2:if(null!=(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:this.setState({items:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSearch",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state.searchStr,e.next=4,this.getItems({name:a});case 4:if(null!=(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:this.setState({items:n});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSort",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t.target.value),e.next=3,this.getItems({sortBy:a});case 3:if(null!=(n=e.sent)){e.next=6;break}return e.abrupt("return");case 6:this.setState({sortBy:a,items:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSortDirection",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.sortDirection,a=t===k.Ascending?k.Descending:k.Ascending,e.next=4,this.getItems({sortDirection:a});case 4:if(null!=(n=e.sent)){e.next=7;break}return e.abrupt("return");case 7:this.setState({sortDirection:a,items:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getItems",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,s,i,o,c,l,u,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.state,o=i.user,c=i.searchStr,l=i.sortBy,u=i.sortDirection,d={name:null!==(a=null===t||void 0===t?void 0:t.name)&&void 0!==a?a:c,sortBy:null!==(n=null===t||void 0===t?void 0:t.sortBy)&&void 0!==n?n:l,sortDirection:null!==(r=null===t||void 0===t?void 0:t.sortDirection)&&void 0!==r?r:u},o){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,A.GetItems(o.access_token,new G(d),1);case 6:if(e.t1=s=e.sent,e.t0=null!==e.t1,!e.t0){e.next=10;break}e.t0=void 0!==s;case 10:if(!e.t0){e.next=14;break}e.t2=s,e.next=15;break;case 14:e.t2=[];case 15:return e.abrupt("return",e.t2);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.children,s=this.state,i=s.items,o=s.sortBy,c=s.sortDirection,l=s.searchStr,u=c===k.Ascending;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-row justify-between items-center px-4 py-2 mb-4 bg-gray-900 text-gray-500"},r.a.createElement(x.AuthenticationContext.Consumer,null,(function(t){return null==t.oidcUser||e.state.user||e.setState({user:t.oidcUser},(function(){return e.updateItems()})),r.a.createElement(r.a.Fragment,null)})),r.a.createElement("span",{className:""},a),r.a.createElement("div",{className:"flex items-center"},r.a.createElement("form",{className:"flex flex-row mr-4",onSubmit:this.onSearch},r.a.createElement("input",{type:"text",className:"pl-2 rounded-l bg-gray-600 text-gray-200",value:l,onChange:function(t){return e.setState({searchStr:t.target.value})}}),r.a.createElement("button",{className:"flex items-center px-2 rounded-r bg-gray-700 text-gray-300"},r.a.createElement(y.a,{icon:"search",className:"mr-1 text-xs"}),r.a.createElement("span",{className:"text-xs"},"Search"))),r.a.createElement("label",{htmlFor:"",className:"mr-2 text-sm"},"Sort By"),r.a.createElement("select",{name:"",id:"",className:"pl-2 rounded-l h-6 text-sm bg-gray-700 text-gray-300",value:o,onChange:this.onSort},r.a.createElement("option",{value:N.Name,className:""},N[N.Name]),r.a.createElement("option",{value:N.Buys,className:""},N[N.Buys]),r.a.createElement("option",{value:N.Sells,className:""},N[N.Sells]),r.a.createElement("option",{value:N.Appeal,className:""},N[N.Appeal]),r.a.createElement("option",{value:N.Margin,className:""},N[N.Margin]),r.a.createElement("option",{value:N.Sold,className:""},N[N.Sold]),r.a.createElement("option",{value:N.Bought,className:""},N[N.Bought])),r.a.createElement("button",{className:"px-2 mr-4 rounded-r border-l border-gray-800 bg-gray-700 text-gray-300",onClick:this.onSortDirection},u&&o!==N.Name&&r.a.createElement(y.a,{icon:"sort-numeric-up"})||!u&&o!==N.Name&&r.a.createElement(y.a,{icon:"sort-numeric-down-alt"})||u&&o===N.Name&&r.a.createElement(y.a,{icon:"sort-alpha-up"})||!u&&o===N.Name&&r.a.createElement(y.a,{icon:"sort-alpha-down-alt"})),r.a.createElement("button",{className:"mr-4 flex items-center rounded bg-gray-700 text-gray-300",style:{padding:"0.20rem 0.5rem"}},r.a.createElement(y.a,{icon:"filter",className:"mr-1 text-xs"}),r.a.createElement("span",{className:"text-xs"},"Filter")),r.a.createElement("button",{className:"flex items-center rounded bg-gray-700 text-gray-300",style:{padding:"0.20rem 0.5rem"},onClick:this.updateItems},r.a.createElement(y.a,{icon:"redo-alt",className:"text-xs"})))),null!=n?n(i):null)}}]),a}(r.a.Component),U=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={user:void 0},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.state.user;T.Weapon,B.Exotic;return r.a.createElement("div",{className:"main w-full px-4 py-4 bg-gray-800 text-gray-200"},r.a.createElement(x.AuthenticationContext.Consumer,null,(function(a){return null==a.oidcUser||e.state.user||e.setState({user:a.oidcUser}),t?r.a.createElement(R,{name:"Results"},(function(e){return r.a.createElement(r.a.Fragment,null,e.length>0&&r.a.createElement(b.a,{noScrollX:!0,style:{height:"calc(100vh - 11rem)"}},e.map((function(e,a){return r.a.createElement("div",{key:a,className:"mb-2"},r.a.createElement(_,{item:e,accessToken:t.access_token}))})))||e.length<=0&&r.a.createElement("div",{className:""},"No items found."))})):r.a.createElement("div",{className:""},"Not logged in.")})))}}]),a}(r.a.Component),W=a(19),z=a(10),J={client_id:"gw2_calculator_app",response_type:"id_token token",scope:"openid email roles profile gw2calculator",automaticSilentRenew:!0,loadUserInfo:!0,authority:P.urls.authority,redirect_uri:"".concat(P.urls.host,"/authentication/callback"),post_logout_redirect_uri:"".concat(P.urls.host,"/"),silent_redirect_uri:"".concat(P.urls.host,"/authentication/silent_callback")},X=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"",style:{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.2)",zIndex:100}},r.a.createElement(x.AuthenticationContext.Consumer,null,(function(e){return r.a.createElement("div",{className:"flex justify-between items-center px-4 bg-indigo-700 text-indigo-200"},r.a.createElement("div",{className:"flex flex-row items-center"},r.a.createElement(W.b,{className:"transition duration-150 ease-in-out mr-6 text-lg font-bold hover:text-indigo-100",to:"/"},"GW2 Calculator"),r.a.createElement(W.b,{className:"transition duration-150 ease-in-out mr-3 py-5 px-2 hover:bg-indigo-600 hover:text-indigo-100",to:"/"},"Dashboard"),r.a.createElement(W.b,{className:"transition duration-150 ease-in-out mr-3 py-5 px-2 hover:bg-indigo-600 hover:text-indigo-100",to:"/search"},"Search")),e.oidcUser&&r.a.createElement("div",{className:""},r.a.createElement("span",{className:"mr-4"},"Hello, ",e.oidcUser.profile.name,"!"),r.a.createElement("button",{className:"transition duration-150 ease-in-out px-4 py-1 bg-indigo-800 hover:shadow-lg hover:bg-indigo-900 hover:text-indigo-100",onClick:function(){return e.logout()}},"Logout"))||!e.oidcUser&&r.a.createElement("div",{className:""},r.a.createElement("button",{className:"transition duration-150 ease-in-out px-4 py-1 bg-indigo-800 hover:shadow-lg hover:bg-indigo-900 hover:text-indigo-100",onClick:function(){return e.login()}},"Login")))})))}}]),a}(r.a.Component),K=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={isAdding:!1,name:""},n.onAddItemListStart=n.onAddItemListStart.bind(Object(f.a)(n)),n.onAddItemListStop=n.onAddItemListStop.bind(Object(f.a)(n)),n.onAddItemList=n.onAddItemList.bind(Object(f.a)(n)),n}return Object(h.a)(a,[{key:"onAddItemListStart",value:function(e){e.stopPropagation(),this.setState({isAdding:!0})}},{key:"onAddItemListStop",value:function(e){e.stopPropagation(),this.setState({isAdding:!1})}},{key:"onAddItemList",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),a=this.props.onAddItemList,n=this.state.name){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,a(n);case 7:this.setState({isAdding:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.isAdding,n=t.name;return r.a.createElement("button",{className:"transition duration-150 ease-in-out flex flex-row items-center justify-between mx-4 border-2 border-dashed rounded-lg border-indigo-700 bg-opacity-0 bg-indigo-700 text-indigo-300 hover:bg-opacity-100 hover:text-indigo-200 cursor-pointer",onClick:this.onAddItemListStart},!a&&r.a.createElement("div",{className:"px-4 py-3"},r.a.createElement("div",{className:"pointer-events-none select-none"},r.a.createElement(y.a,{icon:"plus",className:"mr-3"}),"Add New List..."))||a&&r.a.createElement("div",{className:"px-2 py-3 flex flex-row"},r.a.createElement("input",{type:"text",className:"px-2 mr-1 w-2/3 rounded bg-indigo-400 text-indigo-900",value:n,onClick:function(e){return e.stopPropagation()},onChange:function(t){return e.setState({name:t.target.value})}}),r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 mr-1 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",style:{paddingTop:"0.35rem",paddingBottom:"0.35rem"},onClick:this.onAddItemList},r.a.createElement(y.a,{className:"text-xs",icon:"check"})),r.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",onClick:this.onAddItemListStop},r.a.createElement(y.a,{className:"text-xs",icon:"times"})))))}}]),a}(r.a.Component),q=a(48);function V(e){var t=Object(z.g)().push,a=e.to,n=e.children,s=Object(q.a)(e,["to","children"]);return r.a.createElement("div",Object.assign({onClick:function(){return t(a)}},s),n)}var $=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={isMouseHover:!1,isDragHover:!1,isEditing:!1,newName:e.itemList.name},n.onMouseEnter=n.onMouseEnter.bind(Object(f.a)(n)),n.onMouseLeave=n.onMouseLeave.bind(Object(f.a)(n)),n.onDragEnter=n.onDragEnter.bind(Object(f.a)(n)),n.onDragOver=n.onDragOver.bind(Object(f.a)(n)),n.onDragLeave=n.onDragLeave.bind(Object(f.a)(n)),n.onDrop=n.onDrop.bind(Object(f.a)(n)),n.onEditNameStart=n.onEditNameStart.bind(Object(f.a)(n)),n.onEditNameStop=n.onEditNameStop.bind(Object(f.a)(n)),n.onEditName=n.onEditName.bind(Object(f.a)(n)),n.onDeleteList=n.onDeleteList.bind(Object(f.a)(n)),n}return Object(h.a)(a,[{key:"onMouseEnter",value:function(){this.setState({isMouseHover:!0})}},{key:"onMouseLeave",value:function(){this.setState({isMouseHover:!1})}},{key:"onDragEnter",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.setState({isDragHover:!0});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragLeave",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.setState({isDragHover:!1});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDrop",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props,n=a.itemList,r=a.onDrop,s=parseInt(t.dataTransfer.getData("text")),e.next=5,r(n.id,s);case 5:this.setState({isDragHover:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEditNameStart",value:function(e){e.stopPropagation(),this.setState({isEditing:!0,newName:this.props.itemList.name})}},{key:"onEditNameStop",value:function(e){e.stopPropagation(),this.setState({isEditing:!1})}},{key:"onEditName",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),a=this.props,n=a.itemList,r=a.onEditName,s=this.state.newName){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,r(n.id,s);case 7:this.setState({isEditing:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDeleteList",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),a=this.props,n=a.itemList,r=a.onDeleteList,e.next=4,r(n.id);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.itemList,a=this.state,n=a.isMouseHover,s=a.isDragHover,i=a.isEditing,o=a.newName;return r.a.createElement(V,{className:"transition duration-150 ease-in-out flex flex-row items-center justify-between px-4 py-3 bg-opacity-25 ".concat(s?"bg-green-700 text-green-300":"bg-indigo-700 text-indigo-300"," hover:bg-opacity-100 hover:text-indigo-200 cursor-pointer"),to:"/list/".concat(t.id),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"truncate pointer-events-none select-none"},t.name),r.a.createElement("div",{className:"".concat(n?"":"hidden"," flex flex-row")},r.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 mr-1 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",style:{paddingTop:"0.35rem",paddingBottom:"0.35rem"},onClick:this.onEditNameStart},r.a.createElement(y.a,{className:"text-xs",icon:"pencil-alt"})),r.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",onClick:this.onDeleteList},r.a.createElement(y.a,{className:"text-xs",icon:"trash-alt"}))))||i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",className:"px-2 w-2/3 rounded bg-indigo-400 text-indigo-900",value:o,onClick:function(e){return e.stopPropagation()},onChange:function(t){return e.setState({newName:t.target.value})}}),r.a.createElement("div",{className:"".concat(n?"":"hidden"," flex flex-row")},r.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 mr-1 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",style:{paddingTop:"0.35rem",paddingBottom:"0.35rem"},onClick:this.onEditName},r.a.createElement(y.a,{className:"text-xs",icon:"check"})),r.a.createElement("button",{className:"transition duration-150 ease-in-out px-2 flex items-center rounded hover:shadow-lg bg-indigo-800 text-indigo-300 hover:bg-indigo-900 hover:text-indigo-200",onClick:this.onEditNameStop},r.a.createElement(y.a,{className:"text-xs",icon:"times"})))))}}]),a}(r.a.Component),Q=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={user:void 0,itemLists:[]},n.refreshItemLists=n.refreshItemLists.bind(Object(f.a)(n)),n.onAddItem=n.onAddItem.bind(Object(f.a)(n)),n.onEditName=n.onEditName.bind(Object(f.a)(n)),n.onAddList=n.onAddList.bind(Object(f.a)(n)),n.onDeleteList=n.onDeleteList.bind(Object(f.a)(n)),n}return Object(h.a)(a,[{key:"refreshItemLists",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.user){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A.GetItemLists(t.access_token);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return");case 8:this.setState({itemLists:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onAddItem",value:function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.user){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A.AddListItem(n.access_token,t,a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onEditName",value:function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.user,s=n.itemLists,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A.UpdateListName(r.access_token,t,a);case 5:e.sent&&(i=s.findIndex((function(e){return e.id===t})),s[i].name=a,this.setState({itemLists:s}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onAddList",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.user,r=a.itemLists,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A.CreateList(n.access_token,t);case 5:(s=e.sent)&&(i={id:s,name:t},r.push(i),this.setState({itemLists:r}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDeleteList",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,n=a.user,r=a.itemLists,n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A.DeleteList(n.access_token,t);case 5:e.sent&&(s=r.findIndex((function(e){return e.id===t})),r.splice(s,1),this.setState({itemLists:r}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.itemLists,n=t.user;return r.a.createElement("div",{className:"sidebar hidden py-4 xl:flex xl:w-1/4 bg-gray-900",style:{width:"16rem"}},r.a.createElement(x.AuthenticationContext.Consumer,null,(function(t){return null==t.oidcUser||e.state.user||e.setState({user:t.oidcUser},(function(){e.refreshItemLists()})),n?r.a.createElement(b.a,{noScrollX:!0},a.map((function(t,a){return r.a.createElement("div",{key:a,className:"mb-2"},r.a.createElement($,{itemList:t,onDrop:e.onAddItem,onEditName:e.onEditName,onDeleteList:e.onDeleteList}))})),r.a.createElement(K,{onAddItemList:e.onAddList})):r.a.createElement(r.a.Fragment,null)})))}}]),a}(r.a.Component),Y=a(21),Z=a(47);function ee(){var e=Object(z.h)().id;return r.a.createElement(F,{listId:e})}Y.b.add(Z.a);var te=function(){return r.a.createElement("div",{className:"flex flex-col"},r.a.createElement(W.a,null,r.a.createElement(x.AuthenticationProvider,{configuration:J,callbackComponentOverride:function(){return r.a.createElement("div",{className:"flex justify-center items-center w-screen h-screen bg-gray-700 text-gray-100"},r.a.createElement("div",{className:"flex flex-row items-center"},r.a.createElement("img",{src:c.a,alt:"logo",className:"App-logo w-12"}),r.a.createElement("span",{className:""},"Logging in...")))},authenticating:function(){return r.a.createElement("div",{className:"flex justify-center items-center w-screen h-screen bg-gray-700 text-gray-100"},r.a.createElement("div",{className:"flex flex-row items-center"},r.a.createElement("img",{src:c.a,alt:"logo",className:"App-logo w-12"}),r.a.createElement("span",{className:""},"Logging out...")))}},r.a.createElement(X,null),r.a.createElement(z.a,{path:"/authentication/callback",to:"/"}),r.a.createElement("div",{className:"flex flex-row",style:{height:"calc(100vh - 4rem)"}},r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/",component:H}),r.a.createElement(z.b,{path:"/search",component:U}),r.a.createElement(z.b,{exact:!0,path:"/list",component:F}),r.a.createElement(z.b,{path:"/list/:id",component:ee})),r.a.createElement(Q,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.ca6613c6.chunk.js.map